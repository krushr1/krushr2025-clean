#!/usr/bin/env node
/**
 * Claude Code File Watcher Command
 * Usage: claude watch
 */

const KrushrFileWatcher = require('../workflows/watch-automation.js');

function showHelp() {
    console.log(`
ðŸ‘€ Krushr File Watcher Automation

Usage: claude watch

Automatically runs workflows when files change:
  â€¢ TypeScript/React files â†’ format, imports, lint
  â€¢ Prisma schema â†’ type generation
  â€¢ Config files â†’ build validation
  â€¢ Test files â†’ test execution

Features:
  âœ… Real-time file monitoring
  âœ… Debounced execution (2s delay)
  âœ… Smart workflow triggering
  âœ… Multi-directory watching

Press Ctrl+C to stop watching.

ðŸš€ Continuous automation for Krushr development
`);
}

async function main() {
    const args = process.argv.slice(2);
    
    if (args.includes('--help') || args.includes('-h')) {
        showHelp();
        return;
    }

    console.log('ðŸ‘€ Starting Krushr file watcher...\n');
    
    const watcher = new KrushrFileWatcher();
    watcher.start();
}

if (require.main === module) {
    main();
}