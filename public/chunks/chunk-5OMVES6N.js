import{F as ie,L as ae,M as se,h as X,i as $,j as Z,m as Q,p as M,q as j,r as ee,s as te,t as re,w as oe,x as _,y as ne}from"/chunks/chunk-L4CZ4ABC.js";import{a as R,c as Y,e as J,h as N}from"/chunks/chunk-UVQEY3UQ.js";import{c as S,f as q}from"/chunks/chunk-Y23ZUE4R.js";import{c as E,d as K,e as L,g as W}from"/chunks/chunk-XLF7ZOXQ.js";function ze(e,r){let t=ie(),o=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,n=_(e),a=n.getDay(),s=(a<o?-7:0)+6-(a-o);return n.setDate(n.getDate()+s),n.setHours(23,59,59,999),n}function We(e){return se(e,ae(e))}var ye=E(K(),1);var i=E(K(),1);var u=E(L(),1),[k,st]=Y("Tooltip",[M]),A=M(),ce="TooltipProvider",Re=700,H="tooltip.open",[Ce,U]=k(ce),le=e=>{let{__scopeTooltip:r,delayDuration:t=Re,skipDelayDuration:o=300,disableHoverableContent:n=!1,children:a}=e,s=i.useRef(!0),m=i.useRef(!1),c=i.useRef(0);return i.useEffect(()=>{let d=c.current;return()=>window.clearTimeout(d)},[]),(0,u.jsx)(Ce,{scope:r,isOpenDelayedRef:s,delayDuration:t,onOpen:i.useCallback(()=>{window.clearTimeout(c.current),s.current=!1},[]),onClose:i.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>s.current=!0,o)},[o]),isPointerInTransitRef:m,onPointerInTransitChange:i.useCallback(d=>{m.current=d},[]),disableHoverableContent:n,children:a})};le.displayName=ce;var D="Tooltip",[Pe,O]=k(D),ue=e=>{let{__scopeTooltip:r,children:t,open:o,defaultOpen:n,onOpenChange:a,disableHoverableContent:s,delayDuration:m}=e,c=U(D,e.__scopeTooltip),d=A(r),[l,f]=i.useState(null),g=X(),p=i.useRef(0),x=s??c.disableHoverableContent,T=m??c.delayDuration,v=i.useRef(!1),[y,h]=$({prop:o,defaultProp:n??!1,onChange:B=>{B?(c.onOpen(),document.dispatchEvent(new CustomEvent(H))):c.onClose(),a?.(B)},caller:D}),P=i.useMemo(()=>y?v.current?"delayed-open":"instant-open":"closed",[y]),w=i.useCallback(()=>{window.clearTimeout(p.current),p.current=0,v.current=!1,h(!0)},[h]),b=i.useCallback(()=>{window.clearTimeout(p.current),p.current=0,h(!1)},[h]),z=i.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{v.current=!0,h(!0),p.current=0},T)},[T,h]);return i.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),(0,u.jsx)(j,{...d,children:(0,u.jsx)(Pe,{scope:r,contentId:g,open:y,stateAttribute:P,trigger:l,onTriggerChange:f,onTriggerEnter:i.useCallback(()=>{c.isOpenDelayedRef.current?z():w()},[c.isOpenDelayedRef,z,w]),onTriggerLeave:i.useCallback(()=>{x?b():(window.clearTimeout(p.current),p.current=0)},[b,x]),onOpen:w,onClose:b,disableHoverableContent:x,children:t})})};ue.displayName=D;var I="TooltipTrigger",pe=i.forwardRef((e,r)=>{let{__scopeTooltip:t,...o}=e,n=O(I,t),a=U(I,t),s=A(t),m=i.useRef(null),c=S(r,m,n.onTriggerChange),d=i.useRef(!1),l=i.useRef(!1),f=i.useCallback(()=>d.current=!1,[]);return i.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),(0,u.jsx)(ee,{asChild:!0,...s,children:(0,u.jsx)(J.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...o,ref:c,onPointerMove:R(e.onPointerMove,g=>{g.pointerType!=="touch"&&!l.current&&!a.isPointerInTransitRef.current&&(n.onTriggerEnter(),l.current=!0)}),onPointerLeave:R(e.onPointerLeave,()=>{n.onTriggerLeave(),l.current=!1}),onPointerDown:R(e.onPointerDown,()=>{n.open&&n.onClose(),d.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:R(e.onFocus,()=>{d.current||n.onOpen()}),onBlur:R(e.onBlur,n.onClose),onClick:R(e.onClick,n.onClose)})})});pe.displayName=I;var G="TooltipPortal",[we,be]=k(G,{forceMount:void 0}),de=e=>{let{__scopeTooltip:r,forceMount:t,children:o,container:n}=e,a=O(G,r);return(0,u.jsx)(we,{scope:r,forceMount:t,children:(0,u.jsx)(N,{present:t||a.open,children:(0,u.jsx)(Q,{asChild:!0,container:n,children:o})})})};de.displayName=G;var C="TooltipContent",fe=i.forwardRef((e,r)=>{let t=be(C,e.__scopeTooltip),{forceMount:o=t.forceMount,side:n="top",...a}=e,s=O(C,e.__scopeTooltip);return(0,u.jsx)(N,{present:o||s.open,children:s.disableHoverableContent?(0,u.jsx)(me,{side:n,...a,ref:r}):(0,u.jsx)(Ee,{side:n,...a,ref:r})})}),Ee=i.forwardRef((e,r)=>{let t=O(C,e.__scopeTooltip),o=U(C,e.__scopeTooltip),n=i.useRef(null),a=S(r,n),[s,m]=i.useState(null),{trigger:c,onClose:d}=t,l=n.current,{onPointerInTransitChange:f}=o,g=i.useCallback(()=>{m(null),f(!1)},[f]),p=i.useCallback((x,T)=>{let v=x.currentTarget,y={x:x.clientX,y:x.clientY},h=Ae(y,v.getBoundingClientRect()),P=Le(y,h),w=Se(T.getBoundingClientRect()),b=Me([...P,...w]);m(b),f(!0)},[f]);return i.useEffect(()=>()=>g(),[g]),i.useEffect(()=>{if(c&&l){let x=v=>p(v,l),T=v=>p(v,c);return c.addEventListener("pointerleave",x),l.addEventListener("pointerleave",T),()=>{c.removeEventListener("pointerleave",x),l.removeEventListener("pointerleave",T)}}},[c,l,p,g]),i.useEffect(()=>{if(s){let x=T=>{let v=T.target,y={x:T.clientX,y:T.clientY},h=c?.contains(v)||l?.contains(v),P=!Ne(y,s);h?g():P&&(g(),d())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[c,l,s,d,g]),(0,u.jsx)(me,{...e,ref:a})}),[De,Oe]=k(D,{isInside:!1}),_e=q("TooltipContent"),me=i.forwardRef((e,r)=>{let{__scopeTooltip:t,children:o,"aria-label":n,onEscapeKeyDown:a,onPointerDownOutside:s,...m}=e,c=O(C,t),d=A(t),{onClose:l}=c;return i.useEffect(()=>(document.addEventListener(H,l),()=>document.removeEventListener(H,l)),[l]),i.useEffect(()=>{if(c.trigger){let f=g=>{g.target?.contains(c.trigger)&&l()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,l]),(0,u.jsx)(Z,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:f=>f.preventDefault(),onDismiss:l,children:(0,u.jsxs)(te,{"data-state":c.stateAttribute,...d,...m,ref:r,style:{...m.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,u.jsx)(_e,{children:o}),(0,u.jsx)(De,{scope:t,isInside:!0,children:(0,u.jsx)(oe,{id:c.contentId,role:"tooltip",children:n||o})})]})})});fe.displayName=C;var ge="TooltipArrow",ke=i.forwardRef((e,r)=>{let{__scopeTooltip:t,...o}=e,n=A(t);return Oe(ge,t).isInside?null:(0,u.jsx)(re,{...n,...o,ref:r})});ke.displayName=ge;function Ae(e,r){let t=Math.abs(r.top-e.y),o=Math.abs(r.bottom-e.y),n=Math.abs(r.right-e.x),a=Math.abs(r.left-e.x);switch(Math.min(t,o,n,a)){case a:return"left";case n:return"right";case t:return"top";case o:return"bottom";default:throw new Error("unreachable")}}function Le(e,r,t=5){let o=[];switch(r){case"top":o.push({x:e.x-t,y:e.y+t},{x:e.x+t,y:e.y+t});break;case"bottom":o.push({x:e.x-t,y:e.y-t},{x:e.x+t,y:e.y-t});break;case"left":o.push({x:e.x+t,y:e.y-t},{x:e.x+t,y:e.y+t});break;case"right":o.push({x:e.x-t,y:e.y-t},{x:e.x-t,y:e.y+t});break}return o}function Se(e){let{top:r,right:t,bottom:o,left:n}=e;return[{x:n,y:r},{x:t,y:r},{x:t,y:o},{x:n,y:o}]}function Ne(e,r){let{x:t,y:o}=e,n=!1;for(let a=0,s=r.length-1;a<r.length;s=a++){let m=r[a],c=r[s],d=m.x,l=m.y,f=c.x,g=c.y;l>o!=g>o&&t<(f-d)*(o-l)/(g-l)+d&&(n=!n)}return n}function Me(e){let r=e.slice();return r.sort((t,o)=>t.x<o.x?-1:t.x>o.x?1:t.y<o.y?-1:t.y>o.y?1:0),He(r)}function He(e){if(e.length<=1)return e.slice();let r=[];for(let o=0;o<e.length;o++){let n=e[o];for(;r.length>=2;){let a=r[r.length-1],s=r[r.length-2];if((a.x-s.x)*(n.y-s.y)>=(a.y-s.y)*(n.x-s.x))r.pop();else break}r.push(n)}r.pop();let t=[];for(let o=e.length-1;o>=0;o--){let n=e[o];for(;t.length>=2;){let a=t[t.length-1],s=t[t.length-2];if((a.x-s.x)*(n.y-s.y)>=(a.y-s.y)*(n.x-s.x))t.pop();else break}t.push(n)}return t.pop(),r.length===1&&t.length===1&&r[0].x===t[0].x&&r[0].y===t[0].y?r:r.concat(t)}var xe=le,ve=ue,Te=pe,he=de,F=fe;var V=E(L(),1),lt=xe,ut=ve,pt=Te,Ue=ye.forwardRef(({className:e,sideOffset:r=4,...t},o)=>(0,V.jsx)(he,{children:(0,V.jsx)(F,{ref:o,sideOffset:r,className:W("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...t})}));Ue.displayName=F.displayName;function Ge(){let e=document.activeElement;if(!e)return!1;let r=e.tagName.toLowerCase();if(r==="input"||r==="textarea"||r==="select"||e.getAttribute("contenteditable")==="true")return!0;let t=e.parentElement;for(;t;){if(t.getAttribute("contenteditable")==="true")return!0;t=t.parentElement}return!!(e.classList.contains("ProseMirror")||e.classList.contains("tiptap")||e.classList.contains("ql-editor")||e.getAttribute("role")==="textbox"||e.closest('[role="dialog"], [role="alertdialog"], .sheet-content')&&(e.getAttribute("contenteditable")||r==="input"||r==="textarea"))}function ft(e){return Ge()?!1:((e.metaKey||e.ctrlKey)&&e.key==="Enter",!0)}function vt(e,r){let t=_(e);return isNaN(r)?ne(e,NaN):(r&&t.setDate(t.getDate()+r),t)}var ht=e=>new Date(e).toLocaleDateString("en-US",{year:"2-digit",month:"numeric",day:"numeric"}),yt=e=>new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});export{vt as a,ze as b,We as c,ht as d,yt as e,lt as f,ut as g,pt as h,Ue as i,ft as j};
