import{a as ct,c as Qi}from"/chunks/chunk-JTMKD6PY.js";import{$ as Un,D as Qr,E as zo,F as $i,J as jo,L as Xi,O as Yi,P as qi,T as Ji,W as Zi,_ as Wo,b as xr,c as Ii,f as In,g as Oe,h as $e,i as It,j as Nr,m as Mr,n as Et,p as Ir,q as Zr,r as Bn,s as zn,t as jn,u as Hi,x as Te}from"/chunks/chunk-ULZFB66Z.js";import{a as qt,b as Wn,c as Jt}from"/chunks/chunk-WIV7UOIL.js";import{a as rs}from"/chunks/chunk-OBSEXZVO.js";import{b as Mi,d as be,e as es,g as ts}from"/chunks/chunk-JHM7S6XW.js";import{f as pe}from"/chunks/chunk-AB5KX5AV.js";import{a as Bo,b as Dr}from"/chunks/chunk-GVUCDI63.js";import{a as K,b as Gi,c as et,d as Dt,e as de,f as Ki,g as ft,h as Pt}from"/chunks/chunk-UVQEY3UQ.js";import{a as Ni,b as Dn,c as we,d as Rt}from"/chunks/chunk-Y23ZUE4R.js";import{B as En,C as Pi,D as kn,Db as Fn,E as Tn,G as Sr,Ga as Bi,H as Rr,Ha as zi,Na as _n,P as Oo,Pa as Fo,Q as Ei,R as ki,Ta as Nt,V as _o,W as Ti,X as Ai,Y as An,Z as Oi,_ as Lo,_a as ji,ab as Ln,c as U,d as he,da as _i,e as ve,g as G,h as Di,ha as On,hb as Wi,ib as Ui,na as Li,qb as Mt,v as Pn,wb as Vi,xa as Fi,y as Cr,yb as Jr,z as qr}from"/chunks/chunk-XLF7ZOXQ.js";var Ve=U(he(),1);var C=U(he()),or=U(Ni());var Ie=U(he());function os(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,Ie.useMemo)(()=>n=>{t.forEach(o=>o(n))},t)}var en=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Zt(e){let t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Vn(e){return"nodeType"in e}function Xe(e){var t,r;return e?Zt(e)?e:Vn(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}function Gn(e){let{Document:t}=Xe(e);return e instanceof t}function Pr(e){return Zt(e)?!1:e instanceof Xe(e).HTMLElement}function Vo(e){return e instanceof Xe(e).SVGElement}function Qt(e){return e?Zt(e)?e.document:Vn(e)?Gn(e)?e:Pr(e)||Vo(e)?e.ownerDocument:document:document:document}var at=en?Ie.useLayoutEffect:Ie.useEffect;function tn(e){let t=(0,Ie.useRef)(e);return at(()=>{t.current=e}),(0,Ie.useCallback)(function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return t.current==null?void 0:t.current(...n)},[])}function as(){let e=(0,Ie.useRef)(null),t=(0,Ie.useCallback)((n,o)=>{e.current=setInterval(n,o)},[]),r=(0,Ie.useCallback)(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,r]}function Er(e,t){t===void 0&&(t=[e]);let r=(0,Ie.useRef)(e);return at(()=>{r.current!==e&&(r.current=e)},t),r}function kr(e,t){let r=(0,Ie.useRef)();return(0,Ie.useMemo)(()=>{let n=e(r.current);return r.current=n,n},[...t])}function rn(e){let t=tn(e),r=(0,Ie.useRef)(null),n=(0,Ie.useCallback)(o=>{o!==r.current&&t?.(o,r.current),r.current=o},[]);return[r,n]}function nn(e){let t=(0,Ie.useRef)();return(0,Ie.useEffect)(()=>{t.current=e},[e]),t.current}var Uo={};function er(e,t){return(0,Ie.useMemo)(()=>{if(t)return t;let r=Uo[e]==null?0:Uo[e]+1;return Uo[e]=r,e+"-"+r},[e,t])}function is(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return n.reduce((a,s)=>{let i=Object.entries(s);for(let[c,d]of i){let f=a[c];f!=null&&(a[c]=f+e*d)}return a},{...t})}}var tr=is(1),rr=is(-1);function md(e){return"clientX"in e&&"clientY"in e}function Tr(e){if(!e)return!1;let{KeyboardEvent:t}=Xe(e.target);return t&&e instanceof t}function pd(e){if(!e)return!1;let{TouchEvent:t}=Xe(e.target);return t&&e instanceof t}function on(e){if(pd(e)){if(e.touches&&e.touches.length){let{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){let{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return md(e)?{x:e.clientX,y:e.clientY}:null}var Ze=Object.freeze({Translate:{toString(e){if(!e)return;let{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;let{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[Ze.Translate.toString(e),Ze.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:n}=e;return t+" "+r+"ms "+n}}}),ns="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function ss(e){return e.matches(ns)?e:e.querySelector(ns)}var nr=U(he()),hd={display:"none"};function cs(e){let{id:t,value:r}=e;return nr.default.createElement("div",{id:t,style:hd},r)}function ls(e){let{id:t,announcement:r,ariaLiveType:n="assertive"}=e,o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return nr.default.createElement("div",{id:t,style:o,role:"status","aria-live":n,"aria-atomic":!0},r)}function us(){let[e,t]=(0,nr.useState)("");return{announce:(0,nr.useCallback)(n=>{n!=null&&t(n)},[]),announcement:e}}var Rs=(0,C.createContext)(null);function gd(e){let t=(0,C.useContext)(Rs);(0,C.useEffect)(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function vd(){let[e]=(0,C.useState)(()=>new Set),t=(0,C.useCallback)(n=>(e.add(n),()=>e.delete(n)),[e]);return[(0,C.useCallback)(n=>{let{type:o,event:a}=n;e.forEach(s=>{var i;return(i=s[o])==null?void 0:i.call(s,a)})},[e]),t]}var bd={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},yd={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function wd(e){let{announcements:t=yd,container:r,hiddenTextDescribedById:n,screenReaderInstructions:o=bd}=e,{announce:a,announcement:s}=us(),i=er("DndLiveRegion"),[c,d]=(0,C.useState)(!1);if((0,C.useEffect)(()=>{d(!0)},[]),gd((0,C.useMemo)(()=>({onDragStart(l){let{active:h}=l;a(t.onDragStart({active:h}))},onDragMove(l){let{active:h,over:v}=l;t.onDragMove&&a(t.onDragMove({active:h,over:v}))},onDragOver(l){let{active:h,over:v}=l;a(t.onDragOver({active:h,over:v}))},onDragEnd(l){let{active:h,over:v}=l;a(t.onDragEnd({active:h,over:v}))},onDragCancel(l){let{active:h,over:v}=l;a(t.onDragCancel({active:h,over:v}))}}),[a,t])),!c)return null;let f=C.default.createElement(C.default.Fragment,null,C.default.createElement(cs,{id:n,value:o.draggable}),C.default.createElement(ls,{id:i,announcement:s}));return r?(0,or.createPortal)(f,r):f}var _e;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(_e||(_e={}));function Hn(){}function un(e,t){return(0,C.useMemo)(()=>({sensor:e,options:t??{}}),[e,t])}function Xn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,C.useMemo)(()=>[...t].filter(n=>n!=null),[...t])}var mt=Object.freeze({x:0,y:0});function Ns(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function xd(e,t){let r=on(e);if(!r)return"0 0";let n={x:(r.x-t.left)/t.width*100,y:(r.y-t.top)/t.height*100};return n.x+"% "+n.y+"%"}function Ms(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return r-n}function Cd(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return n-r}function ds(e){let{left:t,top:r,height:n,width:o}=e;return[{x:t,y:r},{x:t+o,y:r},{x:t,y:r+n},{x:t+o,y:r+n}]}function Zo(e,t){if(!e||e.length===0)return null;let[r]=e;return t?r[t]:r}function fs(e,t,r){return t===void 0&&(t=e.left),r===void 0&&(r=e.top),{x:t+e.width*.5,y:r+e.height*.5}}var Ds=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e,o=fs(t,t.left,t.top),a=[];for(let s of n){let{id:i}=s,c=r.get(i);if(c){let d=Ns(fs(c),o);a.push({id:i,data:{droppableContainer:s,value:d}})}}return a.sort(Ms)},Yn=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e,o=ds(t),a=[];for(let s of n){let{id:i}=s,c=r.get(i);if(c){let d=ds(c),f=o.reduce((h,v,S)=>h+Ns(d[S],v),0),l=Number((f/4).toFixed(4));a.push({id:i,data:{droppableContainer:s,value:l}})}}return a.sort(Ms)};function Sd(e,t){let r=Math.max(t.top,e.top),n=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),s=o-n,i=a-r;if(n<o&&r<a){let c=t.width*t.height,d=e.width*e.height,f=s*i,l=f/(c+d-f);return Number(l.toFixed(4))}return 0}var Rd=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e,o=[];for(let a of n){let{id:s}=a,i=r.get(s);if(i){let c=Sd(i,t);c>0&&o.push({id:s,data:{droppableContainer:a,value:c}})}}return o.sort(Cd)};function Nd(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}function Is(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:mt}function Md(e){return function(r){for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return o.reduce((s,i)=>({...s,top:s.top+e*i.y,bottom:s.bottom+e*i.y,left:s.left+e*i.x,right:s.right+e*i.x}),{...r})}}var Dd=Md(1);function Ps(e){if(e.startsWith("matrix3d(")){let t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){let t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Id(e,t,r){let n=Ps(t);if(!n)return e;let{scaleX:o,scaleY:a,x:s,y:i}=n,c=e.left-s-(1-o)*parseFloat(r),d=e.top-i-(1-a)*parseFloat(r.slice(r.indexOf(" ")+1)),f=o?e.width/o:e.width,l=a?e.height/a:e.height;return{width:f,height:l,top:d,right:c+f,bottom:d+l,left:c}}var Pd={ignoreTransform:!1};function sr(e,t){t===void 0&&(t=Pd);let r=e.getBoundingClientRect();if(t.ignoreTransform){let{transform:d,transformOrigin:f}=Xe(e).getComputedStyle(e);d&&(r=Id(r,d,f))}let{top:n,left:o,width:a,height:s,bottom:i,right:c}=r;return{top:n,left:o,width:a,height:s,bottom:i,right:c}}function ms(e){return sr(e,{ignoreTransform:!0})}function Ed(e){let t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}function kd(e,t){return t===void 0&&(t=Xe(e).getComputedStyle(e)),t.position==="fixed"}function Td(e,t){t===void 0&&(t=Xe(e).getComputedStyle(e));let r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{let a=t[o];return typeof a=="string"?r.test(a):!1})}function dn(e,t){let r=[];function n(o){if(t!=null&&r.length>=t||!o)return r;if(Gn(o)&&o.scrollingElement!=null&&!r.includes(o.scrollingElement))return r.push(o.scrollingElement),r;if(!Pr(o)||Vo(o)||r.includes(o))return r;let a=Xe(e).getComputedStyle(o);return o!==e&&Td(o,a)&&r.push(o),kd(o,a)?r:n(o.parentNode)}return e?n(e):r}function Es(e){let[t]=dn(e,1);return t??null}function Go(e){return!en||!e?null:Zt(e)?e:Vn(e)?Gn(e)||e===Qt(e).scrollingElement?window:Pr(e)?e:null:null}function ks(e){return Zt(e)?e.scrollX:e.scrollLeft}function Ts(e){return Zt(e)?e.scrollY:e.scrollTop}function $o(e){return{x:ks(e),y:Ts(e)}}var Be;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Be||(Be={}));function As(e){return!en||!e?!1:e===document.scrollingElement}function Os(e){let t={x:0,y:0},r=As(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},o=e.scrollTop<=t.y,a=e.scrollLeft<=t.x,s=e.scrollTop>=n.y,i=e.scrollLeft>=n.x;return{isTop:o,isLeft:a,isBottom:s,isRight:i,maxScroll:n,minScroll:t}}var Ad={x:.2,y:.2};function Od(e,t,r,n,o){let{top:a,left:s,right:i,bottom:c}=r;n===void 0&&(n=10),o===void 0&&(o=Ad);let{isTop:d,isBottom:f,isLeft:l,isRight:h}=Os(e),v={x:0,y:0},S={x:0,y:0},p={height:t.height*o.y,width:t.width*o.x};return!d&&a<=t.top+p.height?(v.y=Be.Backward,S.y=n*Math.abs((t.top+p.height-a)/p.height)):!f&&c>=t.bottom-p.height&&(v.y=Be.Forward,S.y=n*Math.abs((t.bottom-p.height-c)/p.height)),!h&&i>=t.right-p.width?(v.x=Be.Forward,S.x=n*Math.abs((t.right-p.width-i)/p.width)):!l&&s<=t.left+p.width&&(v.x=Be.Backward,S.x=n*Math.abs((t.left+p.width-s)/p.width)),{direction:v,speed:S}}function _d(e){if(e===document.scrollingElement){let{innerWidth:a,innerHeight:s}=window;return{top:0,left:0,right:a,bottom:s,width:a,height:s}}let{top:t,left:r,right:n,bottom:o}=e.getBoundingClientRect();return{top:t,left:r,right:n,bottom:o,width:e.clientWidth,height:e.clientHeight}}function _s(e){return e.reduce((t,r)=>tr(t,$o(r)),mt)}function Ld(e){return e.reduce((t,r)=>t+ks(r),0)}function Fd(e){return e.reduce((t,r)=>t+Ts(r),0)}function Ls(e,t){if(t===void 0&&(t=sr),!e)return;let{top:r,left:n,bottom:o,right:a}=t(e);Es(e)&&(o<=0||a<=0||r>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}var Bd=[["x",["left","right"],Ld],["y",["top","bottom"],Fd]],sn=class{constructor(t,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;let n=dn(r),o=_s(n);this.rect={...t},this.width=t.width,this.height=t.height;for(let[a,s,i]of Bd)for(let c of s)Object.defineProperty(this,c,{get:()=>{let d=i(n),f=o[a]-d;return this.rect[c]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}},ar=class{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=t}add(t,r,n){var o;(o=this.target)==null||o.addEventListener(t,r,n),this.listeners.push([t,r,n])}};function zd(e){let{EventTarget:t}=Xe(e);return e instanceof t?e:Qt(e)}function Ko(e,t){let r=Math.abs(e.x),n=Math.abs(e.y);return typeof t=="number"?Math.sqrt(r**2+n**2)>t:"x"in t&&"y"in t?r>t.x&&n>t.y:"x"in t?r>t.x:"y"in t?n>t.y:!1}var lt;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(lt||(lt={}));function ps(e){e.preventDefault()}function jd(e){e.stopPropagation()}var fe;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(fe||(fe={}));var Fs={start:[fe.Space,fe.Enter],cancel:[fe.Esc],end:[fe.Space,fe.Enter,fe.Tab]},Wd=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case fe.Right:return{...r,x:r.x+25};case fe.Left:return{...r,x:r.x-25};case fe.Down:return{...r,y:r.y+25};case fe.Up:return{...r,y:r.y-25}}},Ar=class{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;let{event:{target:r}}=t;this.props=t,this.listeners=new ar(Qt(r)),this.windowListeners=new ar(Xe(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(lt.Resize,this.handleCancel),this.windowListeners.add(lt.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(lt.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:t,onStart:r}=this.props,n=t.node.current;n&&Ls(n),r(mt)}handleKeyDown(t){if(Tr(t)){let{active:r,context:n,options:o}=this.props,{keyboardCodes:a=Fs,coordinateGetter:s=Wd,scrollBehavior:i="smooth"}=o,{code:c}=t;if(a.end.includes(c)){this.handleEnd(t);return}if(a.cancel.includes(c)){this.handleCancel(t);return}let{collisionRect:d}=n.current,f=d?{x:d.left,y:d.top}:mt;this.referenceCoordinates||(this.referenceCoordinates=f);let l=s(t,{active:r,context:n.current,currentCoordinates:f});if(l){let h=rr(l,f),v={x:0,y:0},{scrollableAncestors:S}=n.current;for(let p of S){let m=t.code,{isTop:y,isRight:b,isLeft:x,isBottom:I,maxScroll:w,minScroll:E}=Os(p),D=_d(p),A={x:Math.min(m===fe.Right?D.right-D.width/2:D.right,Math.max(m===fe.Right?D.left:D.left+D.width/2,l.x)),y:Math.min(m===fe.Down?D.bottom-D.height/2:D.bottom,Math.max(m===fe.Down?D.top:D.top+D.height/2,l.y))},J=m===fe.Right&&!b||m===fe.Left&&!x,oe=m===fe.Down&&!I||m===fe.Up&&!y;if(J&&A.x!==l.x){let $=p.scrollLeft+h.x,le=m===fe.Right&&$<=w.x||m===fe.Left&&$>=E.x;if(le&&!h.y){p.scrollTo({left:$,behavior:i});return}le?v.x=p.scrollLeft-$:v.x=m===fe.Right?p.scrollLeft-w.x:p.scrollLeft-E.x,v.x&&p.scrollBy({left:-v.x,behavior:i});break}else if(oe&&A.y!==l.y){let $=p.scrollTop+h.y,le=m===fe.Down&&$<=w.y||m===fe.Up&&$>=E.y;if(le&&!h.x){p.scrollTo({top:$,behavior:i});return}le?v.y=p.scrollTop-$:v.y=m===fe.Down?p.scrollTop-w.y:p.scrollTop-E.y,v.y&&p.scrollBy({top:-v.y,behavior:i});break}}this.handleMove(t,tr(rr(l,this.referenceCoordinates),v))}}}handleMove(t,r){let{onMove:n}=this.props;t.preventDefault(),n(r)}handleEnd(t){let{onEnd:r}=this.props;t.preventDefault(),this.detach(),r()}handleCancel(t){let{onCancel:r}=this.props;t.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}};Ar.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:n=Fs,onActivation:o}=t,{active:a}=r,{code:s}=e.nativeEvent;if(n.start.includes(s)){let i=a.activatorNode.current;return i&&e.target!==i?!1:(e.preventDefault(),o?.({event:e.nativeEvent}),!0)}return!1}}];function hs(e){return!!(e&&"distance"in e)}function gs(e){return!!(e&&"delay"in e)}var cn=class{constructor(t,r,n){var o;n===void 0&&(n=zd(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=r;let{event:a}=t,{target:s}=a;this.props=t,this.events=r,this.document=Qt(s),this.documentListeners=new ar(this.document),this.listeners=new ar(n),this.windowListeners=new ar(Xe(s)),this.initialCoordinates=(o=on(a))!=null?o:mt,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:t,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(lt.Resize,this.handleCancel),this.windowListeners.add(lt.DragStart,ps),this.windowListeners.add(lt.VisibilityChange,this.handleCancel),this.windowListeners.add(lt.ContextMenu,ps),this.documentListeners.add(lt.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(gs(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(hs(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,r){let{active:n,onPending:o}=this.props;o(n,t,this.initialCoordinates,r)}handleStart(){let{initialCoordinates:t}=this,{onStart:r}=this.props;t&&(this.activated=!0,this.documentListeners.add(lt.Click,jd,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(lt.SelectionChange,this.removeTextSelection),r(t))}handleMove(t){var r;let{activated:n,initialCoordinates:o,props:a}=this,{onMove:s,options:{activationConstraint:i}}=a;if(!o)return;let c=(r=on(t))!=null?r:mt,d=rr(o,c);if(!n&&i){if(hs(i)){if(i.tolerance!=null&&Ko(d,i.tolerance))return this.handleCancel();if(Ko(d,i.distance))return this.handleStart()}if(gs(i)&&Ko(d,i.tolerance))return this.handleCancel();this.handlePending(i,d);return}t.cancelable&&t.preventDefault(),s(c)}handleEnd(){let{onAbort:t,onEnd:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleCancel(){let{onAbort:t,onCancel:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleKeydown(t){t.code===fe.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}},Ud={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}},zt=class extends cn{constructor(t){let{event:r}=t,n=Qt(r.target);super(t,Ud,n)}};zt.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return!r.isPrimary||r.button!==0?!1:(n?.({event:r}),!0)}}];var Vd={move:{name:"mousemove"},end:{name:"mouseup"}},Xo;(function(e){e[e.RightClick=2]="RightClick"})(Xo||(Xo={}));var Yo=class extends cn{constructor(t){super(t,Vd,Qt(t.event.target))}};Yo.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return r.button===Xo.RightClick?!1:(n?.({event:r}),!0)}}];var Ho={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}},qo=class extends cn{constructor(t){super(t,Ho)}static setup(){return window.addEventListener(Ho.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Ho.move.name,t)};function t(){}}};qo.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t,{touches:o}=r;return o.length>1?!1:(n?.({event:r}),!0)}}];var an;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(an||(an={}));var $n;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})($n||($n={}));function Gd(e){let{acceleration:t,activator:r=an.Pointer,canScroll:n,draggingRect:o,enabled:a,interval:s=5,order:i=$n.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:f,delta:l,threshold:h}=e,v=Hd({delta:l,disabled:!a}),[S,p]=as(),m=(0,C.useRef)({x:0,y:0}),y=(0,C.useRef)({x:0,y:0}),b=(0,C.useMemo)(()=>{switch(r){case an.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case an.DraggableRect:return o}},[r,o,c]),x=(0,C.useRef)(null),I=(0,C.useCallback)(()=>{let E=x.current;if(!E)return;let D=m.current.x*y.current.x,A=m.current.y*y.current.y;E.scrollBy(D,A)},[]),w=(0,C.useMemo)(()=>i===$n.TreeOrder?[...d].reverse():d,[i,d]);(0,C.useEffect)(()=>{if(!a||!d.length||!b){p();return}for(let E of w){if(n?.(E)===!1)continue;let D=d.indexOf(E),A=f[D];if(!A)continue;let{direction:J,speed:oe}=Od(E,A,b,t,h);for(let $ of["x","y"])v[$][J[$]]||(oe[$]=0,J[$]=0);if(oe.x>0||oe.y>0){p(),x.current=E,S(I,s),m.current=oe,y.current=J;return}}m.current={x:0,y:0},y.current={x:0,y:0},p()},[t,I,n,p,a,s,JSON.stringify(b),JSON.stringify(v),S,d,w,f,JSON.stringify(h)])}var Kd={x:{[Be.Backward]:!1,[Be.Forward]:!1},y:{[Be.Backward]:!1,[Be.Forward]:!1}};function Hd(e){let{delta:t,disabled:r}=e,n=nn(t);return kr(o=>{if(r||!n||!o)return Kd;let a={x:Math.sign(t.x-n.x),y:Math.sign(t.y-n.y)};return{x:{[Be.Backward]:o.x[Be.Backward]||a.x===-1,[Be.Forward]:o.x[Be.Forward]||a.x===1},y:{[Be.Backward]:o.y[Be.Backward]||a.y===-1,[Be.Forward]:o.y[Be.Forward]||a.y===1}}},[r,t,n])}function $d(e,t){let r=t!=null?e.get(t):void 0,n=r?r.node.current:null;return kr(o=>{var a;return t==null?null:(a=n??o)!=null?a:null},[n,t])}function Xd(e,t){return(0,C.useMemo)(()=>e.reduce((r,n)=>{let{sensor:o}=n,a=o.activators.map(s=>({eventName:s.eventName,handler:t(s.handler,n)}));return[...r,...a]},[]),[e,t])}var ln;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(ln||(ln={}));var Jo;(function(e){e.Optimized="optimized"})(Jo||(Jo={}));var vs=new Map;function Yd(e,t){let{dragging:r,dependencies:n,config:o}=t,[a,s]=(0,C.useState)(null),{frequency:i,measure:c,strategy:d}=o,f=(0,C.useRef)(e),l=m(),h=Er(l),v=(0,C.useCallback)(function(y){y===void 0&&(y=[]),!h.current&&s(b=>b===null?y:b.concat(y.filter(x=>!b.includes(x))))},[h]),S=(0,C.useRef)(null),p=kr(y=>{if(l&&!r)return vs;if(!y||y===vs||f.current!==e||a!=null){let b=new Map;for(let x of e){if(!x)continue;if(a&&a.length>0&&!a.includes(x.id)&&x.rect.current){b.set(x.id,x.rect.current);continue}let I=x.node.current,w=I?new sn(c(I),I):null;x.rect.current=w,w&&b.set(x.id,w)}return b}return y},[e,a,r,l,c]);return(0,C.useEffect)(()=>{f.current=e},[e]),(0,C.useEffect)(()=>{l||v()},[r,l]),(0,C.useEffect)(()=>{a&&a.length>0&&s(null)},[JSON.stringify(a)]),(0,C.useEffect)(()=>{l||typeof i!="number"||S.current!==null||(S.current=setTimeout(()=>{v(),S.current=null},i))},[i,l,v,...n]),{droppableRects:p,measureDroppableContainers:v,measuringScheduled:a!=null};function m(){switch(d){case ln.Always:return!1;case ln.BeforeDragging:return r;default:return!r}}}function Qo(e,t){return kr(r=>e?r||(typeof t=="function"?t(e):e):null,[t,e])}function qd(e,t){return Qo(e,t)}function Jd(e){let{callback:t,disabled:r}=e,n=tn(t),o=(0,C.useMemo)(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;let{MutationObserver:a}=window;return new a(n)},[n,r]);return(0,C.useEffect)(()=>()=>o?.disconnect(),[o]),o}function qn(e){let{callback:t,disabled:r}=e,n=tn(t),o=(0,C.useMemo)(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;let{ResizeObserver:a}=window;return new a(n)},[r]);return(0,C.useEffect)(()=>()=>o?.disconnect(),[o]),o}function Zd(e){return new sn(sr(e),e)}function bs(e,t,r){t===void 0&&(t=Zd);let[n,o]=(0,C.useState)(null);function a(){o(c=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=c??r)!=null?d:null}let f=t(e);return JSON.stringify(c)===JSON.stringify(f)?c:f})}let s=Jd({callback(c){if(e)for(let d of c){let{type:f,target:l}=d;if(f==="childList"&&l instanceof HTMLElement&&l.contains(e)){a();break}}}}),i=qn({callback:a});return at(()=>{a(),e?(i?.observe(e),s?.observe(document.body,{childList:!0,subtree:!0})):(i?.disconnect(),s?.disconnect())},[e]),n}function Qd(e){let t=Qo(e);return Is(e,t)}var ys=[];function ef(e){let t=(0,C.useRef)(e),r=kr(n=>e?n&&n!==ys&&e&&t.current&&e.parentNode===t.current.parentNode?n:dn(e):ys,[e]);return(0,C.useEffect)(()=>{t.current=e},[e]),r}function tf(e){let[t,r]=(0,C.useState)(null),n=(0,C.useRef)(e),o=(0,C.useCallback)(a=>{let s=Go(a.target);s&&r(i=>i?(i.set(s,$o(s)),new Map(i)):null)},[]);return(0,C.useEffect)(()=>{let a=n.current;if(e!==a){s(a);let i=e.map(c=>{let d=Go(c);return d?(d.addEventListener("scroll",o,{passive:!0}),[d,$o(d)]):null}).filter(c=>c!=null);r(i.length?new Map(i):null),n.current=e}return()=>{s(e),s(a)};function s(i){i.forEach(c=>{let d=Go(c);d?.removeEventListener("scroll",o)})}},[o,e]),(0,C.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((a,s)=>tr(a,s),mt):_s(e):mt,[e,t])}function ws(e,t){t===void 0&&(t=[]);let r=(0,C.useRef)(null);return(0,C.useEffect)(()=>{r.current=null},t),(0,C.useEffect)(()=>{let n=e!==mt;n&&!r.current&&(r.current=e),!n&&r.current&&(r.current=null)},[e]),r.current?rr(e,r.current):mt}function rf(e){(0,C.useEffect)(()=>{if(!en)return;let t=e.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(let r of t)r?.()}},e.map(t=>{let{sensor:r}=t;return r}))}function nf(e,t){return(0,C.useMemo)(()=>e.reduce((r,n)=>{let{eventName:o,handler:a}=n;return r[o]=s=>{a(s,t)},r},{}),[e,t])}function Bs(e){return(0,C.useMemo)(()=>e?Ed(e):null,[e])}var xs=[];function of(e,t){t===void 0&&(t=sr);let[r]=e,n=Bs(r?Xe(r):null),[o,a]=(0,C.useState)(xs);function s(){a(()=>e.length?e.map(c=>As(c)?n:new sn(t(c),c)):xs)}let i=qn({callback:s});return at(()=>{i?.disconnect(),s(),e.forEach(c=>i?.observe(c))},[e]),o}function zs(e){if(!e)return null;if(e.children.length>1)return e;let t=e.children[0];return Pr(t)?t:e}function af(e){let{measure:t}=e,[r,n]=(0,C.useState)(null),o=(0,C.useCallback)(d=>{for(let{target:f}of d)if(Pr(f)){n(l=>{let h=t(f);return l?{...l,width:h.width,height:h.height}:h});break}},[t]),a=qn({callback:o}),s=(0,C.useCallback)(d=>{let f=zs(d);a?.disconnect(),f&&a?.observe(f),n(f?t(f):null)},[t,a]),[i,c]=rn(s);return(0,C.useMemo)(()=>({nodeRef:i,rect:r,setRef:c}),[r,i,c])}var sf=[{sensor:zt,options:{}},{sensor:Ar,options:{}}],cf={current:{}},Kn={draggable:{measure:ms},droppable:{measure:ms,strategy:ln.WhileDragging,frequency:Jo.Optimized},dragOverlay:{measure:sr}},ir=class extends Map{get(t){var r;return t!=null&&(r=super.get(t))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:r}=t;return!r})}getNodeFor(t){var r,n;return(r=(n=this.get(t))==null?void 0:n.node.current)!=null?r:void 0}},lf={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new ir,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Hn},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Kn,measureDroppableContainers:Hn,windowRect:null,measuringScheduled:!1},js={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Hn,draggableNodes:new Map,over:null,measureDroppableContainers:Hn},fn=(0,C.createContext)(js),Ws=(0,C.createContext)(lf);function uf(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new ir}}}function df(e,t){switch(t.type){case _e.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case _e.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case _e.DragEnd:case _e.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case _e.RegisterDroppable:{let{element:r}=t,{id:n}=r,o=new ir(e.droppable.containers);return o.set(n,r),{...e,droppable:{...e.droppable,containers:o}}}case _e.SetDroppableDisabled:{let{id:r,key:n,disabled:o}=t,a=e.droppable.containers.get(r);if(!a||n!==a.key)return e;let s=new ir(e.droppable.containers);return s.set(r,{...a,disabled:o}),{...e,droppable:{...e.droppable,containers:s}}}case _e.UnregisterDroppable:{let{id:r,key:n}=t,o=e.droppable.containers.get(r);if(!o||n!==o.key)return e;let a=new ir(e.droppable.containers);return a.delete(r),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function ff(e){let{disabled:t}=e,{active:r,activatorEvent:n,draggableNodes:o}=(0,C.useContext)(fn),a=nn(n),s=nn(r?.id);return(0,C.useEffect)(()=>{if(!t&&!n&&a&&s!=null){if(!Tr(a)||document.activeElement===a.target)return;let i=o.get(s);if(!i)return;let{activatorNode:c,node:d}=i;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(let f of[c.current,d.current]){if(!f)continue;let l=ss(f);if(l){l.focus();break}}})}},[n,t,o,s,a]),null}function Us(e,t){let{transform:r,...n}=t;return e!=null&&e.length?e.reduce((o,a)=>a({transform:o,...n}),r):r}function mf(e){return(0,C.useMemo)(()=>({draggable:{...Kn.draggable,...e?.draggable},droppable:{...Kn.droppable,...e?.droppable},dragOverlay:{...Kn.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function pf(e){let{activeNode:t,measure:r,initialRect:n,config:o=!0}=e,a=(0,C.useRef)(!1),{x:s,y:i}=typeof o=="boolean"?{x:o,y:o}:o;at(()=>{if(!s&&!i||!t){a.current=!1;return}if(a.current||!n)return;let d=t?.node.current;if(!d||d.isConnected===!1)return;let f=r(d),l=Is(f,n);if(s||(l.x=0),i||(l.y=0),a.current=!0,Math.abs(l.x)>0||Math.abs(l.y)>0){let h=Es(d);h&&h.scrollBy({top:l.y,left:l.x})}},[t,s,i,n,r])}var Jn=(0,C.createContext)({...mt,scaleX:1,scaleY:1}),Bt;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Bt||(Bt={}));var Zn=(0,C.memo)(function(t){var r,n,o,a;let{id:s,accessibility:i,autoScroll:c=!0,children:d,sensors:f=sf,collisionDetection:l=Rd,measuring:h,modifiers:v,...S}=t,p=(0,C.useReducer)(df,void 0,uf),[m,y]=p,[b,x]=vd(),[I,w]=(0,C.useState)(Bt.Uninitialized),E=I===Bt.Initialized,{draggable:{active:D,nodes:A,translate:J},droppable:{containers:oe}}=m,$=D!=null?A.get(D):null,le=(0,C.useRef)({initial:null,translated:null}),ae=(0,C.useMemo)(()=>{var Me;return D!=null?{id:D,data:(Me=$?.data)!=null?Me:cf,rect:le}:null},[D,$]),ue=(0,C.useRef)(null),[ge,ie]=(0,C.useState)(null),[T,ee]=(0,C.useState)(null),O=Er(S,Object.values(S)),g=er("DndDescribedBy",s),u=(0,C.useMemo)(()=>oe.getEnabled(),[oe]),k=mf(h),{droppableRects:_,measureDroppableContainers:j,measuringScheduled:X}=Yd(u,{dragging:E,dependencies:[J.x,J.y],config:k.droppable}),W=$d(A,D),N=(0,C.useMemo)(()=>T?on(T):null,[T]),B=Ct(),Q=qd(W,k.draggable.measure);pf({activeNode:D!=null?A.get(D):null,config:B.layoutShiftCompensation,initialRect:Q,measure:k.draggable.measure});let L=bs(W,k.draggable.measure,Q),q=bs(W?W.parentElement:null),Z=(0,C.useRef)({activatorEvent:null,active:null,activeNode:W,collisionRect:null,collisions:null,droppableRects:_,draggableNodes:A,draggingNode:null,draggingNodeRect:null,droppableContainers:oe,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),me=oe.getNodeFor((r=Z.current.over)==null?void 0:r.id),Y=af({measure:k.dragOverlay.measure}),Ce=(n=Y.nodeRef.current)!=null?n:W,Ne=E?(o=Y.rect)!=null?o:L:null,ke=!!(Y.nodeRef.current&&Y.rect),We=Qd(ke?null:L),nt=Bs(Ce?Xe(Ce):null),De=ef(E?me??W:null),At=of(De),st=Us(v,{transform:{x:J.x-We.x,y:J.y-We.y,scaleX:1,scaleY:1},activatorEvent:T,active:ae,activeNodeRect:L,containerNodeRect:q,draggingNodeRect:Ne,over:Z.current.over,overlayNodeRect:Y.rect,scrollableAncestors:De,scrollableAncestorRects:At,windowRect:nt}),br=N?tr(N,J):null,$t=tf(De),yr=ws($t),Xt=ws($t,[L]),gt=tr(st,yr),vt=Ne?Dd(Ne,st):null,bt=ae&&vt?l({active:ae,collisionRect:vt,droppableRects:_,droppableContainers:u,pointerCoordinates:br}):null,Ot=Zo(bt,"id"),[ot,M]=(0,C.useState)(null),re=ke?st:tr(st,Xt),ce=Nd(re,(a=ot?.rect)!=null?a:null,L),Ge=(0,C.useRef)(null),Yt=(0,C.useCallback)((Me,qe)=>{let{sensor:ye,options:Ke}=qe;if(ue.current==null)return;let He=A.get(ue.current);if(!He)return;let Je=Me.nativeEvent,wt=new ye({active:ue.current,activeNode:He,event:Je,options:Ke,context:Z,onAbort(Ue){if(!A.get(Ue))return;let{onDragAbort:xt}=O.current,St={id:Ue};xt?.(St),b({type:"onDragAbort",event:St})},onPending(Ue,Lt,xt,St){if(!A.get(Ue))return;let{onDragPending:Xr}=O.current,Ft={id:Ue,constraint:Lt,initialCoordinates:xt,offset:St};Xr?.(Ft),b({type:"onDragPending",event:Ft})},onStart(Ue){let Lt=ue.current;if(Lt==null)return;let xt=A.get(Lt);if(!xt)return;let{onDragStart:St}=O.current,$r={activatorEvent:Je,active:{id:Lt,data:xt.data,rect:le}};(0,or.unstable_batchedUpdates)(()=>{St?.($r),w(Bt.Initializing),y({type:_e.DragStart,initialCoordinates:Ue,active:Lt}),b({type:"onDragStart",event:$r}),ie(Ge.current),ee(Je)})},onMove(Ue){y({type:_e.DragMove,coordinates:Ue})},onEnd:wr(_e.DragEnd),onCancel:wr(_e.DragCancel)});Ge.current=wt;function wr(Ue){return async function(){let{active:xt,collisions:St,over:$r,scrollAdjustedTranslate:Xr}=Z.current,Ft=null;if(xt&&Xr){let{cancelDrop:Yr}=O.current;Ft={activatorEvent:Je,active:xt,collisions:St,delta:Xr,over:$r},Ue===_e.DragEnd&&typeof Yr=="function"&&await Promise.resolve(Yr(Ft))&&(Ue=_e.DragCancel)}ue.current=null,(0,or.unstable_batchedUpdates)(()=>{y({type:Ue}),w(Bt.Uninitialized),M(null),ie(null),ee(null),Ge.current=null;let Yr=Ue===_e.DragEnd?"onDragEnd":"onDragCancel";if(Ft){let Ao=O.current[Yr];Ao?.(Ft),b({type:Yr,event:Ft})}})}}},[A]),Kr=(0,C.useCallback)((Me,qe)=>(ye,Ke)=>{let He=ye.nativeEvent,Je=A.get(Ke);if(ue.current!==null||!Je||He.dndKit||He.defaultPrevented)return;let wt={active:Je};Me(ye,qe.options,wt)===!0&&(He.dndKit={capturedBy:qe.sensor},ue.current=Ke,Yt(ye,qe))},[A,Yt]),Hr=Xd(f,Kr);rf(f),at(()=>{L&&I===Bt.Initializing&&w(Bt.Initialized)},[L,I]),(0,C.useEffect)(()=>{let{onDragMove:Me}=O.current,{active:qe,activatorEvent:ye,collisions:Ke,over:He}=Z.current;if(!qe||!ye)return;let Je={active:qe,activatorEvent:ye,collisions:Ke,delta:{x:gt.x,y:gt.y},over:He};(0,or.unstable_batchedUpdates)(()=>{Me?.(Je),b({type:"onDragMove",event:Je})})},[gt.x,gt.y]),(0,C.useEffect)(()=>{let{active:Me,activatorEvent:qe,collisions:ye,droppableContainers:Ke,scrollAdjustedTranslate:He}=Z.current;if(!Me||ue.current==null||!qe||!He)return;let{onDragOver:Je}=O.current,wt=Ke.get(Ot),wr=wt&&wt.rect.current?{id:wt.id,rect:wt.rect.current,data:wt.data,disabled:wt.disabled}:null,Ue={active:Me,activatorEvent:qe,collisions:ye,delta:{x:He.x,y:He.y},over:wr};(0,or.unstable_batchedUpdates)(()=>{M(wr),Je?.(Ue),b({type:"onDragOver",event:Ue})})},[Ot]),at(()=>{Z.current={activatorEvent:T,active:ae,activeNode:W,collisionRect:vt,collisions:bt,droppableRects:_,draggableNodes:A,draggingNode:Ce,draggingNodeRect:Ne,droppableContainers:oe,over:ot,scrollableAncestors:De,scrollAdjustedTranslate:gt},le.current={initial:Ne,translated:vt}},[ae,W,bt,vt,A,Ce,Ne,_,oe,ot,De,gt]),Gd({...B,delta:J,draggingRect:vt,pointerCoordinates:br,scrollableAncestors:De,scrollableAncestorRects:At});let yt=(0,C.useMemo)(()=>({active:ae,activeNode:W,activeNodeRect:L,activatorEvent:T,collisions:bt,containerNodeRect:q,dragOverlay:Y,draggableNodes:A,droppableContainers:oe,droppableRects:_,over:ot,measureDroppableContainers:j,scrollableAncestors:De,scrollableAncestorRects:At,measuringConfiguration:k,measuringScheduled:X,windowRect:nt}),[ae,W,L,T,bt,q,Y,A,oe,_,ot,j,De,At,k,X,nt]),_t=(0,C.useMemo)(()=>({activatorEvent:T,activators:Hr,active:ae,activeNodeRect:L,ariaDescribedById:{draggable:g},dispatch:y,draggableNodes:A,over:ot,measureDroppableContainers:j}),[T,Hr,ae,L,y,g,A,ot,j]);return C.default.createElement(Rs.Provider,{value:x},C.default.createElement(fn.Provider,{value:_t},C.default.createElement(Ws.Provider,{value:yt},C.default.createElement(Jn.Provider,{value:ce},d)),C.default.createElement(ff,{disabled:i?.restoreFocus===!1})),C.default.createElement(wd,{...i,hiddenTextDescribedById:g}));function Ct(){let Me=ge?.autoScrollEnabled===!1,qe=typeof c=="object"?c.enabled===!1:c===!1,ye=E&&!Me&&!qe;return typeof c=="object"?{...c,enabled:ye}:{enabled:ye}}}),hf=(0,C.createContext)(null),Cs="button",gf="Draggable";function Vs(e){let{id:t,data:r,disabled:n=!1,attributes:o}=e,a=er(gf),{activators:s,activatorEvent:i,active:c,activeNodeRect:d,ariaDescribedById:f,draggableNodes:l,over:h}=(0,C.useContext)(fn),{role:v=Cs,roleDescription:S="draggable",tabIndex:p=0}=o??{},m=c?.id===t,y=(0,C.useContext)(m?Jn:hf),[b,x]=rn(),[I,w]=rn(),E=nf(s,t),D=Er(r);at(()=>(l.set(t,{id:t,key:a,node:b,activatorNode:I,data:D}),()=>{let J=l.get(t);J&&J.key===a&&l.delete(t)}),[l,t]);let A=(0,C.useMemo)(()=>({role:v,tabIndex:p,"aria-disabled":n,"aria-pressed":m&&v===Cs?!0:void 0,"aria-roledescription":S,"aria-describedby":f.draggable}),[n,v,p,m,S,f.draggable]);return{active:c,activatorEvent:i,activeNodeRect:d,attributes:A,isDragging:m,listeners:n?void 0:E,node:b,over:h,setNodeRef:x,setActivatorNodeRef:w,transform:y}}function ea(){return(0,C.useContext)(Ws)}var vf="Droppable",bf={timeout:25};function Qn(e){let{data:t,disabled:r=!1,id:n,resizeObserverConfig:o}=e,a=er(vf),{active:s,dispatch:i,over:c,measureDroppableContainers:d}=(0,C.useContext)(fn),f=(0,C.useRef)({disabled:r}),l=(0,C.useRef)(!1),h=(0,C.useRef)(null),v=(0,C.useRef)(null),{disabled:S,updateMeasurementsFor:p,timeout:m}={...bf,...o},y=Er(p??n),b=(0,C.useCallback)(()=>{if(!l.current){l.current=!0;return}v.current!=null&&clearTimeout(v.current),v.current=setTimeout(()=>{d(Array.isArray(y.current)?y.current:[y.current]),v.current=null},m)},[m]),x=qn({callback:b,disabled:S||!s}),I=(0,C.useCallback)((A,J)=>{x&&(J&&(x.unobserve(J),l.current=!1),A&&x.observe(A))},[x]),[w,E]=rn(I),D=Er(t);return(0,C.useEffect)(()=>{!x||!w.current||(x.disconnect(),l.current=!1,x.observe(w.current))},[w,x]),(0,C.useEffect)(()=>(i({type:_e.RegisterDroppable,element:{id:n,key:a,disabled:r,node:w,rect:h,data:D}}),()=>i({type:_e.UnregisterDroppable,key:a,id:n})),[n]),(0,C.useEffect)(()=>{r!==f.current.disabled&&(i({type:_e.SetDroppableDisabled,id:n,key:a,disabled:r}),f.current.disabled=r)},[n,a,r,i]),{active:s,rect:h,isOver:c?.id===n,node:w,over:c,setNodeRef:E}}function yf(e){let{animation:t,children:r}=e,[n,o]=(0,C.useState)(null),[a,s]=(0,C.useState)(null),i=nn(r);return!r&&!n&&i&&o(i),at(()=>{if(!a)return;let c=n?.key,d=n?.props.id;if(c==null||d==null){o(null);return}Promise.resolve(t(d,a)).then(()=>{o(null)})},[t,n,a]),C.default.createElement(C.default.Fragment,null,r,n?(0,C.cloneElement)(n,{ref:s}):null)}var wf={x:0,y:0,scaleX:1,scaleY:1};function xf(e){let{children:t}=e;return C.default.createElement(fn.Provider,{value:js},C.default.createElement(Jn.Provider,{value:wf},t))}var Cf={position:"fixed",touchAction:"none"},Sf=e=>Tr(e)?"transform 250ms ease":void 0,Rf=(0,C.forwardRef)((e,t)=>{let{as:r,activatorEvent:n,adjustScale:o,children:a,className:s,rect:i,style:c,transform:d,transition:f=Sf}=e;if(!i)return null;let l=o?d:{...d,scaleX:1,scaleY:1},h={...Cf,width:i.width,height:i.height,top:i.top,left:i.left,transform:Ze.Transform.toString(l),transformOrigin:o&&n?xd(n,i):void 0,transition:typeof f=="function"?f(n):f,...c};return C.default.createElement(r,{className:s,style:h,ref:t},a)}),Nf=e=>t=>{let{active:r,dragOverlay:n}=t,o={},{styles:a,className:s}=e;if(a!=null&&a.active)for(let[i,c]of Object.entries(a.active))c!==void 0&&(o[i]=r.node.style.getPropertyValue(i),r.node.style.setProperty(i,c));if(a!=null&&a.dragOverlay)for(let[i,c]of Object.entries(a.dragOverlay))c!==void 0&&n.node.style.setProperty(i,c);return s!=null&&s.active&&r.node.classList.add(s.active),s!=null&&s.dragOverlay&&n.node.classList.add(s.dragOverlay),function(){for(let[c,d]of Object.entries(o))r.node.style.setProperty(c,d);s!=null&&s.active&&r.node.classList.remove(s.active)}},Mf=e=>{let{transform:{initial:t,final:r}}=e;return[{transform:Ze.Transform.toString(t)},{transform:Ze.Transform.toString(r)}]},Df={duration:250,easing:"ease",keyframes:Mf,sideEffects:Nf({styles:{active:{opacity:"0"}}})};function If(e){let{config:t,draggableNodes:r,droppableContainers:n,measuringConfiguration:o}=e;return tn((a,s)=>{if(t===null)return;let i=r.get(a);if(!i)return;let c=i.node.current;if(!c)return;let d=zs(s);if(!d)return;let{transform:f}=Xe(s).getComputedStyle(s),l=Ps(f);if(!l)return;let h=typeof t=="function"?t:Pf(t);return Ls(c,o.draggable.measure),h({active:{id:a,data:i.data,node:c,rect:o.draggable.measure(c)},draggableNodes:r,dragOverlay:{node:s,rect:o.dragOverlay.measure(d)},droppableContainers:n,measuringConfiguration:o,transform:l})})}function Pf(e){let{duration:t,easing:r,sideEffects:n,keyframes:o}={...Df,...e};return a=>{let{active:s,dragOverlay:i,transform:c,...d}=a;if(!t)return;let f={x:i.rect.left-s.rect.left,y:i.rect.top-s.rect.top},l={scaleX:c.scaleX!==1?s.rect.width*c.scaleX/i.rect.width:1,scaleY:c.scaleY!==1?s.rect.height*c.scaleY/i.rect.height:1},h={x:c.x-f.x,y:c.y-f.y,...l},v=o({...d,active:s,dragOverlay:i,transform:{initial:c,final:h}}),[S]=v,p=v[v.length-1];if(JSON.stringify(S)===JSON.stringify(p))return;let m=n?.({active:s,dragOverlay:i,...d}),y=i.node.animate(v,{duration:t,easing:r,fill:"forwards"});return new Promise(b=>{y.onfinish=()=>{m?.(),b()}})}}var Ss=0;function Ef(e){return(0,C.useMemo)(()=>{if(e!=null)return Ss++,Ss},[e])}var Gs=C.default.memo(e=>{let{adjustScale:t=!1,children:r,dropAnimation:n,style:o,transition:a,modifiers:s,wrapperElement:i="div",className:c,zIndex:d=999}=e,{activatorEvent:f,active:l,activeNodeRect:h,containerNodeRect:v,draggableNodes:S,droppableContainers:p,dragOverlay:m,over:y,measuringConfiguration:b,scrollableAncestors:x,scrollableAncestorRects:I,windowRect:w}=ea(),E=(0,C.useContext)(Jn),D=Ef(l?.id),A=Us(s,{activatorEvent:f,active:l,activeNodeRect:h,containerNodeRect:v,draggingNodeRect:m.rect,over:y,overlayNodeRect:m.rect,scrollableAncestors:x,scrollableAncestorRects:I,transform:E,windowRect:w}),J=Qo(h),oe=If({config:n,draggableNodes:S,droppableContainers:p,measuringConfiguration:b}),$=J?m.setRef:void 0;return C.default.createElement(xf,null,C.default.createElement(yf,{animation:oe},l&&D?C.default.createElement(Rf,{key:D,id:l.id,ref:$,as:i,activatorEvent:f,adjustScale:t,className:c,transition:a,rect:J,style:{zIndex:d,...o},transform:A},r):null))});var Pe=U(he());function oo(e,t,r){let n=e.slice();return n.splice(r<0?n.length+r:r,0,n.splice(t,1)[0]),n}function kf(e,t){return e.reduce((r,n,o)=>{let a=t.get(n);return a&&(r[o]=a),r},Array(e.length))}function eo(e){return e!==null&&e>=0}function Tf(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Af(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}var to={scaleX:1,scaleY:1},Ks=e=>{var t;let{rects:r,activeNodeRect:n,activeIndex:o,overIndex:a,index:s}=e,i=(t=r[o])!=null?t:n;if(!i)return null;let c=Of(r,s,o);if(s===o){let d=r[a];return d?{x:o<a?d.left+d.width-(i.left+i.width):d.left-i.left,y:0,...to}:null}return s>o&&s<=a?{x:-i.width-c,y:0,...to}:s<o&&s>=a?{x:i.width+c,y:0,...to}:{x:0,y:0,...to}};function Of(e,t,r){let n=e[t],o=e[t-1],a=e[t+1];return!n||!o&&!a?0:r<t?o?n.left-(o.left+o.width):a.left-(n.left+n.width):a?a.left-(n.left+n.width):n.left-(o.left+o.width)}var Hs=e=>{let{rects:t,activeIndex:r,overIndex:n,index:o}=e,a=oo(t,n,r),s=t[o],i=a[o];return!i||!s?null:{x:i.left-s.left,y:i.top-s.top,scaleX:i.width/s.width,scaleY:i.height/s.height}};var ro={scaleX:1,scaleY:1},$s=e=>{var t;let{activeIndex:r,activeNodeRect:n,index:o,rects:a,overIndex:s}=e,i=(t=a[r])!=null?t:n;if(!i)return null;if(o===r){let d=a[s];return d?{x:0,y:r<s?d.top+d.height-(i.top+i.height):d.top-i.top,...ro}:null}let c=_f(a,o,r);return o>r&&o<=s?{x:0,y:-i.height-c,...ro}:o<r&&o>=s?{x:0,y:i.height+c,...ro}:{x:0,y:0,...ro}};function _f(e,t,r){let n=e[t],o=e[t-1],a=e[t+1];return n?r<t?o?n.top-(o.top+o.height):a?a.top-(n.top+n.height):0:a?a.top-(n.top+n.height):o?n.top-(o.top+o.height):0:0}var Xs="Sortable",Ys=Pe.default.createContext({activeIndex:-1,containerId:Xs,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Hs,disabled:{draggable:!1,droppable:!1}});function ao(e){let{children:t,id:r,items:n,strategy:o=Hs,disabled:a=!1}=e,{active:s,dragOverlay:i,droppableRects:c,over:d,measureDroppableContainers:f}=ea(),l=er(Xs,r),h=i.rect!==null,v=(0,Pe.useMemo)(()=>n.map(E=>typeof E=="object"&&"id"in E?E.id:E),[n]),S=s!=null,p=s?v.indexOf(s.id):-1,m=d?v.indexOf(d.id):-1,y=(0,Pe.useRef)(v),b=!Tf(v,y.current),x=m!==-1&&p===-1||b,I=Af(a);at(()=>{b&&S&&f(v)},[b,v,S,f]),(0,Pe.useEffect)(()=>{y.current=v},[v]);let w=(0,Pe.useMemo)(()=>({activeIndex:p,containerId:l,disabled:I,disableTransforms:x,items:v,overIndex:m,useDragOverlay:h,sortedRects:kf(v,c),strategy:o}),[p,l,I.draggable,I.droppable,x,v,m,c,h,o]);return Pe.default.createElement(Ys.Provider,{value:w},t)}var Lf=e=>{let{id:t,items:r,activeIndex:n,overIndex:o}=e;return oo(r,n,o).indexOf(t)},Ff=e=>{let{containerId:t,isSorting:r,wasDragging:n,index:o,items:a,newIndex:s,previousItems:i,previousContainerId:c,transition:d}=e;return!d||!n||i!==a&&o===s?!1:r?!0:s!==o&&t===c},Bf={duration:200,easing:"ease"},qs="transform",zf=Ze.Transition.toString({property:qs,duration:0,easing:"linear"}),jf={roleDescription:"sortable"};function Wf(e){let{disabled:t,index:r,node:n,rect:o}=e,[a,s]=(0,Pe.useState)(null),i=(0,Pe.useRef)(r);return at(()=>{if(!t&&r!==i.current&&n.current){let c=o.current;if(c){let d=sr(n.current,{ignoreTransform:!0}),f={x:c.left-d.left,y:c.top-d.top,scaleX:c.width/d.width,scaleY:c.height/d.height};(f.x||f.y)&&s(f)}}r!==i.current&&(i.current=r)},[t,r,n,o]),(0,Pe.useEffect)(()=>{a&&s(null)},[a]),a}function Or(e){let{animateLayoutChanges:t=Ff,attributes:r,disabled:n,data:o,getNewIndex:a=Lf,id:s,strategy:i,resizeObserverConfig:c,transition:d=Bf}=e,{items:f,containerId:l,activeIndex:h,disabled:v,disableTransforms:S,sortedRects:p,overIndex:m,useDragOverlay:y,strategy:b}=(0,Pe.useContext)(Ys),x=Uf(n,v),I=f.indexOf(s),w=(0,Pe.useMemo)(()=>({sortable:{containerId:l,index:I,items:f},...o}),[l,o,I,f]),E=(0,Pe.useMemo)(()=>f.slice(f.indexOf(s)),[f,s]),{rect:D,node:A,isOver:J,setNodeRef:oe}=Qn({id:s,data:w,disabled:x.droppable,resizeObserverConfig:{updateMeasurementsFor:E,...c}}),{active:$,activatorEvent:le,activeNodeRect:ae,attributes:ue,setNodeRef:ge,listeners:ie,isDragging:T,over:ee,setActivatorNodeRef:O,transform:g}=Vs({id:s,data:w,attributes:{...jf,...r},disabled:x.draggable}),u=os(oe,ge),k=!!$,_=k&&!S&&eo(h)&&eo(m),j=!y&&T,X=j&&_?g:null,N=_?X??(i??b)({rects:p,activeNodeRect:ae,activeIndex:h,overIndex:m,index:I}):null,B=eo(h)&&eo(m)?a({id:s,items:f,activeIndex:h,overIndex:m}):I,Q=$?.id,L=(0,Pe.useRef)({activeId:Q,items:f,newIndex:B,containerId:l}),q=f!==L.current.items,Z=t({active:$,containerId:l,isDragging:T,isSorting:k,id:s,index:I,items:f,newIndex:L.current.newIndex,previousItems:L.current.items,previousContainerId:L.current.containerId,transition:d,wasDragging:L.current.activeId!=null}),me=Wf({disabled:!Z,index:I,node:A,rect:D});return(0,Pe.useEffect)(()=>{k&&L.current.newIndex!==B&&(L.current.newIndex=B),l!==L.current.containerId&&(L.current.containerId=l),f!==L.current.items&&(L.current.items=f)},[k,B,l,f]),(0,Pe.useEffect)(()=>{if(Q===L.current.activeId)return;if(Q!=null&&L.current.activeId==null){L.current.activeId=Q;return}let Ce=setTimeout(()=>{L.current.activeId=Q},50);return()=>clearTimeout(Ce)},[Q]),{active:$,activeIndex:h,attributes:ue,data:w,rect:D,index:I,newIndex:B,items:f,isOver:J,isSorting:k,isDragging:T,listeners:ie,node:A,overIndex:m,over:ee,setNodeRef:u,setActivatorNodeRef:O,setDroppableNodeRef:oe,setDraggableNodeRef:ge,transform:me??N,transition:Y()};function Y(){if(me||q&&L.current.newIndex===I)return zf;if(!(j&&!Tr(le)||!d)&&(k||Z))return Ze.Transition.toString({...d,property:qs})}}function Uf(e,t){var r,n;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e?.draggable)!=null?r:t.draggable,droppable:(n=e?.droppable)!=null?n:t.droppable}}function no(e){if(!e)return!1;let t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}var Vf=[fe.Down,fe.Right,fe.Up,fe.Left],Js=(e,t)=>{let{context:{active:r,collisionRect:n,droppableRects:o,droppableContainers:a,over:s,scrollableAncestors:i}}=t;if(Vf.includes(e.code)){if(e.preventDefault(),!r||!n)return;let c=[];a.getEnabled().forEach(l=>{if(!l||l!=null&&l.disabled)return;let h=o.get(l.id);if(h)switch(e.code){case fe.Down:n.top<h.top&&c.push(l);break;case fe.Up:n.top>h.top&&c.push(l);break;case fe.Left:n.left>h.left&&c.push(l);break;case fe.Right:n.left<h.left&&c.push(l);break}});let d=Yn({active:r,collisionRect:n,droppableRects:o,droppableContainers:c,pointerCoordinates:null}),f=Zo(d,"id");if(f===s?.id&&d.length>1&&(f=d[1].id),f!=null){let l=a.get(r.id),h=a.get(f),v=h?o.get(h.id):null,S=h?.node.current;if(S&&v&&l&&h){let m=dn(S).some((E,D)=>i[D]!==E),y=Zs(l,h),b=Gf(l,h),x=m||!y?{x:0,y:0}:{x:b?n.width-v.width:0,y:b?n.height-v.height:0},I={x:v.left,y:v.top};return x.x&&x.y?I:rr(I,x)}}}};function Zs(e,t){return!no(e)||!no(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function Gf(e,t){return!no(e)||!no(t)||!Zs(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}var z=U(ve(),1);function mn({task:e,isDragOverlay:t=!1,className:r,onClick:n,bulkMode:o=!1,isSelected:a=!1,onSelect:s}){let i=Qi(w=>w.setActiveContext),{attributes:c,listeners:d,setNodeRef:f,transform:l,transition:h,isDragging:v}=Or({id:e.id,data:{type:"task",task:e},disabled:t}),S={transform:Ze.Transform.toString(l),transition:h},p=()=>{i("task",e.id),n?.()},m=()=>{switch(e.priority){case"critical":return"border-l-krushr-priority-critical bg-red-50/30";case"high":return"border-l-krushr-priority-high bg-red-50/30";case"medium":return"border-l-krushr-priority-medium bg-orange-50/30";case"low":return"border-l-krushr-priority-low bg-green-50/30";default:return"border-l-gray-300 bg-white"}},y=()=>{switch(e.priority?.toLowerCase()){case"low":return 1;case"medium":return 2;case"high":return 3;case"critical":return 3;default:return 2}},b=()=>{let w=y();return(0,z.jsx)("div",{className:"flex items-center gap-0.5",title:`Priority: ${e.priority||"medium"}`,children:[1,2,3].map(E=>(0,z.jsx)("div",{className:G("w-1.5 h-1.5 rounded-full transition-all duration-200",E<=w?"bg-krushr-secondary":"bg-gray-300")},E))})},x=e.dueDate&&new Date(e.dueDate)<new Date,I=e.dueDate&&new Date(e.dueDate)>new Date&&new Date(e.dueDate)<new Date(Date.now()+24*60*60*1e3);return(0,z.jsx)(xr,{ref:f,style:S,onClick:p,onKeyDown:w=>{(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),p())},className:G("cursor-grab active:cursor-grabbing transition-all duration-200 hover:shadow-md border-l-4 group","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","min-h-[44px] touch-manipulation",m(),v&&"opacity-50 rotate-2 shadow-lg",t&&"rotate-2 shadow-xl",a&&"ring-2 ring-krushr-primary bg-krushr-primary-50",o&&"cursor-pointer",r),role:"button",tabIndex:0,"aria-label":`Task: ${e.title}${e.description?` - ${e.description.substring(0,50)}...`:""}`,...c,...d,children:(0,z.jsxs)(In,{className:"p-4",children:[(0,z.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[o&&(0,z.jsx)("div",{className:"mr-2",children:(0,z.jsx)("input",{type:"checkbox",checked:a,onChange:w=>{w.stopPropagation(),s?.()},className:"w-5 h-5 min-w-[20px] min-h-[20px] text-krushr-primary border-krushr-gray-300 rounded focus:ring-krushr-primary focus:ring-2","aria-label":`Select task: ${e.title}`,tabIndex:0})}),(0,z.jsx)("h4",{className:"font-medium text-gray-900 line-clamp-2 flex-1 font-brand",children:e.title}),(0,z.jsx)("button",{className:"w-8 h-8 bg-krushr-gray-light text-krushr-gray-dark rounded-md flex items-center justify-center hover:bg-krushr-gray transition-colors opacity-0 group-hover:opacity-100 ml-2","aria-label":`More options for ${e.title}`,tabIndex:0,children:(0,z.jsx)(Ei,{className:"w-4 h-4"})})]}),e.description&&(0,z.jsx)("div",{className:"text-sm text-gray-600 mb-3 line-clamp-2 font-manrope prose prose-sm max-w-none prose-p:my-0 prose-br:my-0",dangerouslySetInnerHTML:{__html:e.description.replace(/<p><\/p>/g,"").replace(/<p>/g,"").replace(/<\/p>/g,"<br>").replace(/<br>\s*$/,"")}}),e.attachments&&e.attachments.length>0&&(()=>{let w=e.attachments.filter(E=>E.mimeType?.startsWith("image/")&&E.thumbnailUrl);return w.length>0?(0,z.jsx)("div",{className:"mb-3",children:(0,z.jsxs)("div",{className:"flex flex-wrap gap-1",children:[w.slice(0,3).map(E=>(0,z.jsx)("img",{src:E.thumbnailUrl,alt:E.filename,className:"w-12 h-12 rounded object-cover border border-gray-200"},E.id)),w.length>3&&(0,z.jsx)("div",{className:"w-12 h-12 rounded border border-gray-200 bg-gray-100 flex items-center justify-center",children:(0,z.jsxs)("span",{className:"text-xs text-gray-600 font-medium font-manrope",children:["+",w.length-3]})})]})}):null})(),(0,z.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 font-manrope",children:[(0,z.jsx)("div",{className:"flex items-center space-x-2",children:e.dueDate&&(0,z.jsxs)("div",{className:G("flex items-center space-x-1",x&&"text-krushr-secondary",I&&"text-amber-600"),children:[x?(0,z.jsx)(kn,{className:"w-3 h-3"}):(0,z.jsx)(Pn,{className:"w-3 h-3"}),(0,z.jsx)("span",{className:"font-medium",children:Di(e.dueDate)})]})}),(0,z.jsxs)("div",{className:"flex items-center space-x-1.5",children:[(e._count?.comments||0)>0&&(0,z.jsxs)("div",{className:"flex items-center space-x-1 text-gray-500",children:[(0,z.jsx)(Bi,{className:"w-3 h-3"}),(0,z.jsx)("span",{children:e._count.comments})]}),(e._count?.attachments||0)>0&&(0,z.jsxs)("div",{className:"flex items-center space-x-1 text-gray-500",children:[(0,z.jsx)(_n,{className:"w-3 h-3"}),(0,z.jsx)("span",{children:e._count.attachments})]}),e.checklists&&e.checklists.length>0&&(()=>{let w=e.checklists.reduce((D,A)=>D+(A.items?.length||0),0),E=e.checklists.reduce((D,A)=>D+(A.items?.filter(J=>J.completed).length||0),0);return w>0?(0,z.jsxs)("div",{className:G("flex items-center space-x-1",E===w?"text-emerald-600":"text-gray-500"),children:[(0,z.jsx)(Wi,{className:"w-3 h-3"}),(0,z.jsxs)("span",{children:[E,"/",w]})]}):null})()]})]}),e.assignee&&(0,z.jsx)("div",{className:"flex items-center justify-between mt-2 pt-2 border-t border-gray-100",children:(0,z.jsxs)("div",{className:"flex items-center space-x-2 min-w-0 flex-1",children:[(0,z.jsxs)(qt,{className:"w-5 h-5 border border-white",children:[(0,z.jsx)(Wn,{src:e.assignee.avatar||void 0}),(0,z.jsx)(Jt,{className:"text-[10px] bg-gradient-to-br from-krushr-secondary to-krushr-secondary/80 text-white font-medium",children:e.assignee.name.split(" ").map(w=>w[0]).join("").toUpperCase()})]}),(0,z.jsx)("span",{className:"text-xs text-gray-600 truncate",children:e.assignee.name}),(0,z.jsx)("span",{className:"text-gray-300 text-xs",children:"\u2022"}),(0,z.jsxs)("div",{className:"flex items-center space-x-1 text-gray-400",children:[(0,z.jsx)(Rr,{className:"w-3 h-3"}),(0,z.jsxs)("span",{className:"text-xs",children:[e.estimatedHours||0,"h"]})]}),(0,z.jsx)("span",{className:"text-gray-300 text-xs",children:"\u2022"}),b(),e.tags&&e.tags.length>0&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("span",{className:"text-gray-300 text-xs",children:"\u2022"}),(0,z.jsxs)("div",{className:"flex items-center space-x-1",children:[e.tags.slice(0,2).map(w=>(0,z.jsx)(Oe,{variant:"secondary",className:"px-1.5 py-0.5 text-xs font-medium",children:typeof w=="string"?w:w.name},typeof w=="string"?w:w.id)),e.tags.length>2&&(0,z.jsxs)(Oe,{variant:"secondary",className:"px-1.5 py-0.5 text-xs font-medium",children:["+",e.tags.length-2]})]})]})]})}),!e.assignee&&(0,z.jsx)("div",{className:"flex items-center mt-2 pt-2 border-t border-gray-100",children:(0,z.jsxs)("div",{className:"flex items-center space-x-2 text-gray-400",children:[(0,z.jsx)(Jr,{className:"w-3 h-3"}),(0,z.jsx)("span",{className:"text-xs",children:"Unassigned"}),(0,z.jsx)("span",{className:"text-gray-300 text-xs",children:"\u2022"}),(0,z.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,z.jsx)(Rr,{className:"w-3 h-3"}),(0,z.jsxs)("span",{className:"text-xs",children:[e.estimatedHours||0,"h"]})]}),(0,z.jsx)("span",{className:"text-gray-300 text-xs",children:"\u2022"}),b(),e.tags&&e.tags.length>0&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("span",{className:"text-gray-300 text-xs",children:"\u2022"}),(0,z.jsxs)("div",{className:"flex items-center space-x-1",children:[e.tags.slice(0,2).map(w=>(0,z.jsx)(Oe,{variant:"secondary",className:"px-1.5 py-0.5 text-xs font-medium",children:typeof w=="string"?w:w.name},typeof w=="string"?w:w.id)),e.tags.length>2&&(0,z.jsxs)(Oe,{variant:"secondary",className:"px-1.5 py-0.5 text-xs font-medium",children:["+",e.tags.length-2]})]})]})]})})]})})}var Ae=U(ve(),1);function ta({column:e,tasks:t,taskCount:r,className:n,onTaskClick:o,onAddTask:a,bulkMode:s=!1,selectedTasks:i=new Set,onTaskSelect:c,onEditColumn:d,onDeleteColumn:f}){let{attributes:l,listeners:h,setNodeRef:v,transform:S,transition:p,isDragging:m}=Or({id:e.id,data:{type:"column",column:e}}),{setNodeRef:y,isOver:b}=Qn({id:e.id,data:{type:"column",accepts:["task"]}}),x={transform:Ze.Transform.toString(S),transition:p},I=()=>{if(e.color)return"";if(e.isCompletedColumn)return"bg-emerald-500";let w=["bg-gray-500","bg-krushr-secondary","bg-amber-500","bg-emerald-500"];return w[e.position%w.length]||"bg-krushr-blue"};return(0,Ae.jsx)("div",{ref:w=>{v(w),y(w)},style:x,className:G("flex flex-col w-80 h-full transition-all duration-200",m&&"opacity-50 scale-105",b&&"ring-2 ring-krushr-secondary ring-opacity-50",n),...l,children:(0,Ae.jsxs)(xr,{className:G("flex flex-col h-full bg-white transition-all duration-200",b&&"bg-krushr-secondary/5 border-krushr-secondary/20"),children:[(0,Ae.jsx)(Ii,{className:"flex-shrink-0 py-2 cursor-grab active:cursor-grabbing",...h,children:(0,Ae.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ae.jsxs)("div",{className:"flex items-center space-x-2 min-w-0 flex-1",children:[(0,Ae.jsx)("div",{className:G("w-3 h-3 rounded-full border flex-shrink-0",!e.color&&I()),style:e.color?{backgroundColor:e.color}:{},role:"presentation","aria-hidden":"true"}),(0,Ae.jsx)("h3",{className:"font-semibold text-gray-900 text-sm truncate font-brand",role:"heading","aria-level":"3",children:e.title}),(0,Ae.jsxs)(Oe,{variant:"secondary",className:G("text-xs min-h-[18px] px-1.5 flex-shrink-0 bg-krushr-coral-red text-white",e.wipLimit&&r>e.wipLimit&&"bg-red-100 text-red-700 border-red-200"),role:"status","aria-label":`${r} tasks${e.wipLimit?` out of ${e.wipLimit} limit`:""}`,children:[r,e.wipLimit?`/${e.wipLimit}`:""]}),e.wipLimit&&r>e.wipLimit&&(0,Ae.jsx)(Oe,{variant:"outline",className:"text-xs text-red-700 border-red-200 px-1.5 py-0 flex-shrink-0 font-manrope",children:"WIP!"}),e.isCompletedColumn&&(0,Ae.jsx)(Oe,{variant:"outline",className:"text-xs text-green-700 border-green-200 px-1.5 py-0 flex-shrink-0 font-manrope",children:"\u2713"})]}),(0,Ae.jsxs)("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[(0,Ae.jsx)(Ln,{className:"w-4 h-4 text-krushr-gray-500 hover:text-krushr-primary cursor-pointer transition-colors",onClick:d,title:"Column settings"}),(0,Ae.jsx)(Nt,{className:"w-4 h-4 text-krushr-gray-500 hover:text-krushr-primary cursor-pointer transition-colors",onClick:a,title:"Add task"})]})]})}),(0,Ae.jsx)(In,{className:"flex-1 p-3 pt-0 overflow-y-auto",children:(0,Ae.jsxs)("div",{className:"space-y-3",children:[t.map(w=>(0,Ae.jsx)(mn,{task:w,onClick:()=>o?.(w.id),bulkMode:s,isSelected:i.has(w.id),onSelect:()=>c?.(w.id)},w.id)),(0,Ae.jsxs)(be,{variant:"ghost",className:G("w-full h-12 min-h-[44px] border-2 border-dashed transition-all duration-200","border-gray-200 hover:border-krushr-secondary/30 hover:bg-krushr-secondary/5","focus:border-krushr-secondary/50 focus:bg-krushr-secondary/10 focus:ring-2 focus:ring-krushr-secondary","text-gray-500 hover:text-krushr-secondary focus:text-krushr-secondary","touch-manipulation",b&&"border-krushr-secondary/50 bg-krushr-secondary/10 text-krushr-secondary"),onClick:a,"aria-label":`Add new task to ${e.title} column`,tabIndex:0,children:[(0,Ae.jsx)(Nt,{className:"w-5 h-5 mr-2"}),"Add a task"]})]})})]})})}function _r(e,t){let r=Te(e),n=Te(t),o=r.getTime()-n.getTime();return o<0?-1:o>0?1:o}function Qs(e,t){let r=Te(e),n=Te(t),o=r.getFullYear()-n.getFullYear(),a=r.getMonth()-n.getMonth();return o*12+a}function ec(e){return t=>{let n=(e?Math[e]:Math.trunc)(t);return n===0?0:n}}function tc(e,t){return+Te(e)-+Te(t)}function rc(e){let t=Te(e);return+Yi(t)==+qi(t)}function nc(e,t){let r=Te(e),n=Te(t),o=_r(r,n),a=Math.abs(Qs(r,n)),s;if(a<1)s=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-o*a);let i=_r(r,n)===-o;rc(Te(e))&&a===1&&_r(e,n)===1&&(i=!1),s=o*(a-Number(i))}return s===0?0:s}function oc(e,t,r){let n=tc(e,t)/1e3;return ec(r?.roundingMethod)(n)}function ac(e,t,r){let n=$i(),o=r?.locale??n.locale??Ji,a=2520,s=_r(e,t);if(isNaN(s))throw new RangeError("Invalid time value");let i=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:s}),c,d;s>0?(c=Te(t),d=Te(e)):(c=Te(e),d=Te(t));let f=oc(d,c),l=(jo(d)-jo(c))/1e3,h=Math.round((f-l)/60),v;if(h<2)return r?.includeSeconds?f<5?o.formatDistance("lessThanXSeconds",5,i):f<10?o.formatDistance("lessThanXSeconds",10,i):f<20?o.formatDistance("lessThanXSeconds",20,i):f<40?o.formatDistance("halfAMinute",0,i):f<60?o.formatDistance("lessThanXMinutes",1,i):o.formatDistance("xMinutes",1,i):h===0?o.formatDistance("lessThanXMinutes",1,i):o.formatDistance("xMinutes",h,i);if(h<45)return o.formatDistance("xMinutes",h,i);if(h<90)return o.formatDistance("aboutXHours",1,i);if(h<zo){let S=Math.round(h/60);return o.formatDistance("aboutXHours",S,i)}else{if(h<a)return o.formatDistance("xDays",1,i);if(h<Qr){let S=Math.round(h/zo);return o.formatDistance("xDays",S,i)}else if(h<Qr*2)return v=Math.round(h/Qr),o.formatDistance("aboutXMonths",v,i)}if(v=nc(d,c),v<12){let S=Math.round(h/Qr);return o.formatDistance("xMonths",S,i)}else{let S=v%12,p=Math.trunc(v/12);return S<3?o.formatDistance("aboutXYears",p,i):S<9?o.formatDistance("overXYears",p,i):o.formatDistance("almostXYears",p+1,i)}}function io(e,t){return ac(e,Xi(e),t)}var vr=U(he(),1);var vn=U(he(),1);var Se=U(he(),1);var ut=U(he(),1);var uc=U(ve(),1),ra="focusScope.autoFocusOnMount",na="focusScope.autoFocusOnUnmount",ic={bubbles:!1,cancelable:!0},Kf="FocusScope",cr=ut.forwardRef((e,t)=>{let{loop:r=!1,trapped:n=!1,onMountAutoFocus:o,onUnmountAutoFocus:a,...s}=e,[i,c]=ut.useState(null),d=ft(o),f=ft(a),l=ut.useRef(null),h=we(t,p=>c(p)),v=ut.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;ut.useEffect(()=>{if(n){let b=function(E){if(v.paused||!i)return;let D=E.target;i.contains(D)?l.current=D:jt(l.current,{select:!0})},x=function(E){if(v.paused||!i)return;let D=E.relatedTarget;D!==null&&(i.contains(D)||jt(l.current,{select:!0}))},I=function(E){if(document.activeElement===document.body)for(let A of E)A.removedNodes.length>0&&jt(i)};var p=b,m=x,y=I;document.addEventListener("focusin",b),document.addEventListener("focusout",x);let w=new MutationObserver(I);return i&&w.observe(i,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",x),w.disconnect()}}},[n,i,v.paused]),ut.useEffect(()=>{if(i){cc.add(v);let p=document.activeElement;if(!i.contains(p)){let y=new CustomEvent(ra,ic);i.addEventListener(ra,d),i.dispatchEvent(y),y.defaultPrevented||(Hf(Jf(dc(i)),{select:!0}),document.activeElement===p&&jt(i))}return()=>{i.removeEventListener(ra,d),setTimeout(()=>{let y=new CustomEvent(na,ic);i.addEventListener(na,f),i.dispatchEvent(y),y.defaultPrevented||jt(p??document.body,{select:!0}),i.removeEventListener(na,f),cc.remove(v)},0)}}},[i,d,f,v]);let S=ut.useCallback(p=>{if(!r&&!n||v.paused)return;let m=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,y=document.activeElement;if(m&&y){let b=p.currentTarget,[x,I]=$f(b);x&&I?!p.shiftKey&&y===I?(p.preventDefault(),r&&jt(x,{select:!0})):p.shiftKey&&y===x&&(p.preventDefault(),r&&jt(I,{select:!0})):y===b&&p.preventDefault()}},[r,n,v.paused]);return(0,uc.jsx)(de.div,{tabIndex:-1,...s,ref:h,onKeyDown:S})});cr.displayName=Kf;function Hf(e,{select:t=!1}={}){let r=document.activeElement;for(let n of e)if(jt(n,{select:t}),document.activeElement!==r)return}function $f(e){let t=dc(e),r=sc(t,e),n=sc(t.reverse(),e);return[r,n]}function dc(e){let t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{let o=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||o?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function sc(e,t){for(let r of e)if(!Xf(r,{upTo:t}))return r}function Xf(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Yf(e){return e instanceof HTMLInputElement&&"select"in e}function jt(e,{select:t=!1}={}){if(e&&e.focus){let r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&Yf(e)&&t&&e.select()}}var cc=qf();function qf(){let e=[];return{add(t){let r=e[0];t!==r&&r?.pause(),e=lc(e,t),e.unshift(t)},remove(t){e=lc(e,t),e[0]?.resume()}}}function lc(e,t){let r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function Jf(e){return e.filter(t=>t.tagName!=="A")}var mc=U(he(),1),oa=0;function Lr(){mc.useEffect(()=>{let e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??fc()),document.body.insertAdjacentElement("beforeend",e[1]??fc()),oa++,()=>{oa===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),oa--}},[])}function fc(){let e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var tt=function(){return tt=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},tt.apply(this,arguments)};function so(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function Hg(e,t,r,n){function o(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function i(f){try{d(n.next(f))}catch(l){s(l)}}function c(f){try{d(n.throw(f))}catch(l){s(l)}}function d(f){f.done?a(f.value):o(f.value).then(i,c)}d((n=n.apply(e,t||[])).next())})}function pc(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,a;n<o;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}var mo=U(he());var Ye=U(he());var lr="right-scroll-bar-position",ur="width-before-scroll-bar",aa="with-scroll-bars-hidden",ia="--removed-body-scroll-bar-size";function co(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}var hc=U(he());function gc(e,t){var r=(0,hc.useState)(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var o=r.value;o!==n&&(r.value=n,r.callback(n,o))}}}})[0];return r.callback=t,r.facade}var lo=U(he());var Zf=typeof window<"u"?lo.useLayoutEffect:lo.useEffect,vc=new WeakMap;function sa(e,t){var r=gc(t||null,function(n){return e.forEach(function(o){return co(o,n)})});return Zf(function(){var n=vc.get(r);if(n){var o=new Set(n),a=new Set(e),s=r.current;o.forEach(function(i){a.has(i)||co(i,null)}),a.forEach(function(i){o.has(i)||co(i,s)})}vc.set(r,e)},[e]),r}function Qf(e){return e}function em(e,t){t===void 0&&(t=Qf);var r=[],n=!1,o={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(a){var s=t(a,n);return r.push(s),function(){r=r.filter(function(i){return i!==s})}},assignSyncMedium:function(a){for(n=!0;r.length;){var s=r;r=[],s.forEach(a)}r={push:function(i){return a(i)},filter:function(){return r}}},assignMedium:function(a){n=!0;var s=[];if(r.length){var i=r;r=[],i.forEach(a),s=r}var c=function(){var f=s;s=[],f.forEach(a)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(f){s.push(f),d()},filter:function(f){return s=s.filter(f),r}}}};return o}function ca(e){e===void 0&&(e={});var t=em(null);return t.options=tt({async:!0,ssr:!1},e),t}var bc=U(he()),yc=function(e){var t=e.sideCar,r=so(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return bc.createElement(n,tt({},r))};yc.isSideCarExport=!0;function la(e,t){return e.useMedium(t),yc}var uo=ca();var ua=function(){},pn=Ye.forwardRef(function(e,t){var r=Ye.useRef(null),n=Ye.useState({onScrollCapture:ua,onWheelCapture:ua,onTouchMoveCapture:ua}),o=n[0],a=n[1],s=e.forwardProps,i=e.children,c=e.className,d=e.removeScrollBar,f=e.enabled,l=e.shards,h=e.sideCar,v=e.noRelative,S=e.noIsolation,p=e.inert,m=e.allowPinchZoom,y=e.as,b=y===void 0?"div":y,x=e.gapMode,I=so(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=h,E=sa([r,t]),D=tt(tt({},I),o);return Ye.createElement(Ye.Fragment,null,f&&Ye.createElement(w,{sideCar:uo,removeScrollBar:d,shards:l,noRelative:v,noIsolation:S,inert:p,setCallbacks:a,allowPinchZoom:!!m,lockRef:r,gapMode:x}),s?Ye.cloneElement(Ye.Children.only(i),tt(tt({},D),{ref:E})):Ye.createElement(b,tt({},D,{className:c,ref:E}),i))});pn.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};pn.classNames={fullWidth:ur,zeroRight:lr};var Re=U(he());var Br=U(he());var Cc=U(he());var wc;var xc=function(){if(wc)return wc;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function tm(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=xc();return t&&e.setAttribute("nonce",t),e}function rm(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function nm(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var da=function(){var e=0,t=null;return{add:function(r){e==0&&(t=tm())&&(rm(t,r),nm(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}};var fa=function(){var e=da();return function(t,r){Cc.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}};var hn=function(){var e=fa(),t=function(r){var n=r.styles,o=r.dynamic;return e(n,o),null};return t};var om={left:0,top:0,right:0,gap:0},ma=function(e){return parseInt(e||"",10)||0},am=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[ma(r),ma(n),ma(o)]},pa=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return om;var t=am(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}};var im=hn(),Fr="data-scroll-locked",sm=function(e,t,r,n){var o=e.left,a=e.top,s=e.right,i=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(aa,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(i,"px ").concat(n,`;
  }
  body[`).concat(Fr,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(i,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(i,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(lr,` {
    right: `).concat(i,"px ").concat(n,`;
  }
  
  .`).concat(ur,` {
    margin-right: `).concat(i,"px ").concat(n,`;
  }
  
  .`).concat(lr," .").concat(lr,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(ur," .").concat(ur,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Fr,`] {
    `).concat(ia,": ").concat(i,`px;
  }
`)},Sc=function(){var e=parseInt(document.body.getAttribute(Fr)||"0",10);return isFinite(e)?e:0},cm=function(){Br.useEffect(function(){return document.body.setAttribute(Fr,(Sc()+1).toString()),function(){var e=Sc()-1;e<=0?document.body.removeAttribute(Fr):document.body.setAttribute(Fr,e.toString())}},[])},ha=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,o=n===void 0?"margin":n;cm();var a=Br.useMemo(function(){return pa(o)},[o]);return Br.createElement(im,{styles:sm(a,!t,o,r?"":"!important")})};var ga=!1;if(typeof window<"u")try{gn=Object.defineProperty({},"passive",{get:function(){return ga=!0,!0}}),window.addEventListener("test",gn,gn),window.removeEventListener("test",gn,gn)}catch{ga=!1}var gn,dr=ga?{passive:!1}:!1;var lm=function(e){return e.tagName==="TEXTAREA"},Rc=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!lm(e)&&r[t]==="visible")},um=function(e){return Rc(e,"overflowY")},dm=function(e){return Rc(e,"overflowX")},va=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var o=Nc(e,n);if(o){var a=Mc(e,n),s=a[1],i=a[2];if(s>i)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},fm=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},mm=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},Nc=function(e,t){return e==="v"?um(t):dm(t)},Mc=function(e,t){return e==="v"?fm(t):mm(t)},pm=function(e,t){return e==="h"&&t==="rtl"?-1:1},Dc=function(e,t,r,n,o){var a=pm(e,window.getComputedStyle(t).direction),s=a*n,i=r.target,c=t.contains(i),d=!1,f=s>0,l=0,h=0;do{if(!i)break;var v=Mc(e,i),S=v[0],p=v[1],m=v[2],y=p-m-a*S;(S||y)&&Nc(e,i)&&(l+=y,h+=S);var b=i.parentNode;i=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!c&&i!==document.body||c&&(t.contains(i)||t===i));return(f&&(o&&Math.abs(l)<1||!o&&s>l)||!f&&(o&&Math.abs(h)<1||!o&&-s>h))&&(d=!0),d};var fo=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Ic=function(e){return[e.deltaX,e.deltaY]},Pc=function(e){return e&&"current"in e?e.current:e},hm=function(e,t){return e[0]===t[0]&&e[1]===t[1]},gm=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},vm=0,zr=[];function Ec(e){var t=Re.useRef([]),r=Re.useRef([0,0]),n=Re.useRef(),o=Re.useState(vm++)[0],a=Re.useState(hn)[0],s=Re.useRef(e);Re.useEffect(function(){s.current=e},[e]),Re.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var p=pc([e.lockRef.current],(e.shards||[]).map(Pc),!0).filter(Boolean);return p.forEach(function(m){return m.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),p.forEach(function(m){return m.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var i=Re.useCallback(function(p,m){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!s.current.allowPinchZoom;var y=fo(p),b=r.current,x="deltaX"in p?p.deltaX:b[0]-y[0],I="deltaY"in p?p.deltaY:b[1]-y[1],w,E=p.target,D=Math.abs(x)>Math.abs(I)?"h":"v";if("touches"in p&&D==="h"&&E.type==="range")return!1;var A=va(D,E);if(!A)return!0;if(A?w=D:(w=D==="v"?"h":"v",A=va(D,E)),!A)return!1;if(!n.current&&"changedTouches"in p&&(x||I)&&(n.current=w),!w)return!0;var J=n.current||w;return Dc(J,m,p,J==="h"?x:I,!0)},[]),c=Re.useCallback(function(p){var m=p;if(!(!zr.length||zr[zr.length-1]!==a)){var y="deltaY"in m?Ic(m):fo(m),b=t.current.filter(function(w){return w.name===m.type&&(w.target===m.target||m.target===w.shadowParent)&&hm(w.delta,y)})[0];if(b&&b.should){m.cancelable&&m.preventDefault();return}if(!b){var x=(s.current.shards||[]).map(Pc).filter(Boolean).filter(function(w){return w.contains(m.target)}),I=x.length>0?i(m,x[0]):!s.current.noIsolation;I&&m.cancelable&&m.preventDefault()}}},[]),d=Re.useCallback(function(p,m,y,b){var x={name:p,delta:m,target:y,should:b,shadowParent:bm(y)};t.current.push(x),setTimeout(function(){t.current=t.current.filter(function(I){return I!==x})},1)},[]),f=Re.useCallback(function(p){r.current=fo(p),n.current=void 0},[]),l=Re.useCallback(function(p){d(p.type,Ic(p),p.target,i(p,e.lockRef.current))},[]),h=Re.useCallback(function(p){d(p.type,fo(p),p.target,i(p,e.lockRef.current))},[]);Re.useEffect(function(){return zr.push(a),e.setCallbacks({onScrollCapture:l,onWheelCapture:l,onTouchMoveCapture:h}),document.addEventListener("wheel",c,dr),document.addEventListener("touchmove",c,dr),document.addEventListener("touchstart",f,dr),function(){zr=zr.filter(function(p){return p!==a}),document.removeEventListener("wheel",c,dr),document.removeEventListener("touchmove",c,dr),document.removeEventListener("touchstart",f,dr)}},[]);var v=e.removeScrollBar,S=e.inert;return Re.createElement(Re.Fragment,null,S?Re.createElement(a,{styles:gm(o)}):null,v?Re.createElement(ha,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function bm(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}var kc=la(uo,Ec);var Tc=mo.forwardRef(function(e,t){return mo.createElement(pn,tt({},e,{ref:t,sideCar:kc}))});Tc.classNames=pn.classNames;var fr=Tc;var ym=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},jr=new WeakMap,po=new WeakMap,ho={},ba=0,Ac=function(e){return e&&(e.host||Ac(e.parentNode))},wm=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=Ac(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},xm=function(e,t,r,n){var o=wm(t,Array.isArray(e)?e:[e]);ho[r]||(ho[r]=new WeakMap);var a=ho[r],s=[],i=new Set,c=new Set(o),d=function(l){!l||i.has(l)||(i.add(l),d(l.parentNode))};o.forEach(d);var f=function(l){!l||c.has(l)||Array.prototype.forEach.call(l.children,function(h){if(i.has(h))f(h);else try{var v=h.getAttribute(n),S=v!==null&&v!=="false",p=(jr.get(h)||0)+1,m=(a.get(h)||0)+1;jr.set(h,p),a.set(h,m),s.push(h),p===1&&S&&po.set(h,!0),m===1&&h.setAttribute(r,"true"),S||h.setAttribute(n,"true")}catch(y){console.error("aria-hidden: cannot operate on ",h,y)}})};return f(t),i.clear(),ba++,function(){s.forEach(function(l){var h=jr.get(l)-1,v=a.get(l)-1;jr.set(l,h),a.set(l,v),h||(po.has(l)||l.removeAttribute(n),po.delete(l)),v||l.removeAttribute(r)}),ba--,ba||(jr=new WeakMap,jr=new WeakMap,po=new WeakMap,ho={})}},Wr=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),o=t||ym(e);return o?(n.push.apply(n,Array.from(o.querySelectorAll("[aria-live], script"))),xm(n,o,r,"aria-hidden")):function(){return null}};var xe=U(ve(),1),vo="Dialog",[Oc,gb]=et(vo),[Cm,pt]=Oc(vo),_c=e=>{let{__scopeDialog:t,children:r,open:n,defaultOpen:o,onOpenChange:a,modal:s=!0}=e,i=Se.useRef(null),c=Se.useRef(null),[d,f]=It({prop:n,defaultProp:o??!1,onChange:a,caller:vo});return(0,xe.jsx)(Cm,{scope:t,triggerRef:i,contentRef:c,contentId:$e(),titleId:$e(),descriptionId:$e(),open:d,onOpenChange:f,onOpenToggle:Se.useCallback(()=>f(l=>!l),[f]),modal:s,children:r})};_c.displayName=vo;var Lc="DialogTrigger",Fc=Se.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,o=pt(Lc,r),a=we(t,o.triggerRef);return(0,xe.jsx)(de.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":xa(o.open),...n,ref:a,onClick:K(e.onClick,o.onOpenToggle)})});Fc.displayName=Lc;var ya="DialogPortal",[Sm,Bc]=Oc(ya,{forceMount:void 0}),zc=e=>{let{__scopeDialog:t,forceMount:r,children:n,container:o}=e,a=pt(ya,t);return(0,xe.jsx)(Sm,{scope:t,forceMount:r,children:Se.Children.map(n,s=>(0,xe.jsx)(Pt,{present:r||a.open,children:(0,xe.jsx)(Mr,{asChild:!0,container:o,children:s})}))})};zc.displayName=ya;var go="DialogOverlay",jc=Se.forwardRef((e,t)=>{let r=Bc(go,e.__scopeDialog),{forceMount:n=r.forceMount,...o}=e,a=pt(go,e.__scopeDialog);return a.modal?(0,xe.jsx)(Pt,{present:n||a.open,children:(0,xe.jsx)(Nm,{...o,ref:t})}):null});jc.displayName=go;var Rm=Rt("DialogOverlay.RemoveScroll"),Nm=Se.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,o=pt(go,r);return(0,xe.jsx)(fr,{as:Rm,allowPinchZoom:!0,shards:[o.contentRef],children:(0,xe.jsx)(de.div,{"data-state":xa(o.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),mr="DialogContent",Wc=Se.forwardRef((e,t)=>{let r=Bc(mr,e.__scopeDialog),{forceMount:n=r.forceMount,...o}=e,a=pt(mr,e.__scopeDialog);return(0,xe.jsx)(Pt,{present:n||a.open,children:a.modal?(0,xe.jsx)(Mm,{...o,ref:t}):(0,xe.jsx)(Dm,{...o,ref:t})})});Wc.displayName=mr;var Mm=Se.forwardRef((e,t)=>{let r=pt(mr,e.__scopeDialog),n=Se.useRef(null),o=we(t,r.contentRef,n);return Se.useEffect(()=>{let a=n.current;if(a)return Wr(a)},[]),(0,xe.jsx)(Uc,{...e,ref:o,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:K(e.onCloseAutoFocus,a=>{a.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:K(e.onPointerDownOutside,a=>{let s=a.detail.originalEvent,i=s.button===0&&s.ctrlKey===!0;(s.button===2||i)&&a.preventDefault()}),onFocusOutside:K(e.onFocusOutside,a=>a.preventDefault())})}),Dm=Se.forwardRef((e,t)=>{let r=pt(mr,e.__scopeDialog),n=Se.useRef(!1),o=Se.useRef(!1);return(0,xe.jsx)(Uc,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{e.onCloseAutoFocus?.(a),a.defaultPrevented||(n.current||r.triggerRef.current?.focus(),a.preventDefault()),n.current=!1,o.current=!1},onInteractOutside:a=>{e.onInteractOutside?.(a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));let s=a.target;r.triggerRef.current?.contains(s)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}})}),Uc=Se.forwardRef((e,t)=>{let{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:o,onCloseAutoFocus:a,...s}=e,i=pt(mr,r),c=Se.useRef(null),d=we(t,c);return Lr(),(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(cr,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:o,onUnmountAutoFocus:a,children:(0,xe.jsx)(Nr,{role:"dialog",id:i.contentId,"aria-describedby":i.descriptionId,"aria-labelledby":i.titleId,"data-state":xa(i.open),...s,ref:d,onDismiss:()=>i.onOpenChange(!1)})}),(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(Im,{titleId:i.titleId}),(0,xe.jsx)(Em,{contentRef:c,descriptionId:i.descriptionId})]})]})}),wa="DialogTitle",Vc=Se.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,o=pt(wa,r);return(0,xe.jsx)(de.h2,{id:o.titleId,...n,ref:t})});Vc.displayName=wa;var Gc="DialogDescription",Kc=Se.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,o=pt(Gc,r);return(0,xe.jsx)(de.p,{id:o.descriptionId,...n,ref:t})});Kc.displayName=Gc;var Hc="DialogClose",$c=Se.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,o=pt(Hc,r);return(0,xe.jsx)(de.button,{type:"button",...n,ref:t,onClick:K(e.onClick,()=>o.onOpenChange(!1))})});$c.displayName=Hc;function xa(e){return e?"open":"closed"}var Xc="DialogTitleWarning",[vb,Yc]=Gi(Xc,{contentName:mr,titleName:wa,docsSlug:"dialog"}),Im=({titleId:e})=>{let t=Yc(Xc),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return Se.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},Pm="DialogDescriptionWarning",Em=({contentRef:e,descriptionId:t})=>{let n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Yc(Pm).contentName}}.`;return Se.useEffect(()=>{let o=e.current?.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},qc=_c,Jc=Fc,Zc=zc,Ca=jc,Sa=Wc,Ra=Vc,Na=Kc,Qc=$c;var it=U(ve(),1),el=qc,xb=Jc;var Tm=Zc,tl=vn.forwardRef(({className:e,...t},r)=>(0,it.jsx)(Ca,{className:G("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));tl.displayName=Ca.displayName;var Am=Mi("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Ma=vn.forwardRef(({side:e="right",className:t,children:r,hideOverlay:n=!1,...o},a)=>(0,it.jsxs)(Tm,{children:[!n&&(0,it.jsx)(tl,{}),(0,it.jsxs)(Sa,{ref:a,className:G(Am({side:e}),t),...o,children:[(0,it.jsxs)(Qc,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,it.jsx)(Fn,{className:"h-4 w-4"}),(0,it.jsx)("span",{className:"sr-only",children:"Close"})]}),r]})]}));Ma.displayName=Sa.displayName;var Da=({className:e,...t})=>(0,it.jsx)("div",{className:G("flex flex-col space-y-2 text-center sm:text-left",e),...t});Da.displayName="SheetHeader";var Om=({className:e,...t})=>(0,it.jsx)("div",{className:G("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Om.displayName="SheetFooter";var Ia=vn.forwardRef(({className:e,...t},r)=>(0,it.jsx)(Ra,{ref:r,className:G("text-lg font-semibold text-foreground",e),...t}));Ia.displayName=Ra.displayName;var _m=vn.forwardRef(({className:e,...t},r)=>(0,it.jsx)(Na,{ref:r,className:G("text-sm text-muted-foreground",e),...t}));_m.displayName=Na.displayName;var Gt=U(he(),1);var F=U(he(),1),Oa=U(Ni(),1);var Wt=U(he(),1);var bo=U(ve(),1),Lm=U(he(),1);var Fm=U(ve(),1);function Ur(e){let t=e+"CollectionProvider",[r,n]=et(t),[o,a]=r(t,{collectionRef:{current:null},itemMap:new Map}),s=p=>{let{scope:m,children:y}=p,b=Wt.default.useRef(null),x=Wt.default.useRef(new Map).current;return(0,bo.jsx)(o,{scope:m,itemMap:x,collectionRef:b,children:y})};s.displayName=t;let i=e+"CollectionSlot",c=Rt(i),d=Wt.default.forwardRef((p,m)=>{let{scope:y,children:b}=p,x=a(i,y),I=we(m,x.collectionRef);return(0,bo.jsx)(c,{ref:I,children:b})});d.displayName=i;let f=e+"CollectionItemSlot",l="data-radix-collection-item",h=Rt(f),v=Wt.default.forwardRef((p,m)=>{let{scope:y,children:b,...x}=p,I=Wt.default.useRef(null),w=we(m,I),E=a(f,y);return Wt.default.useEffect(()=>(E.itemMap.set(I,{ref:I,...x}),()=>void E.itemMap.delete(I))),(0,bo.jsx)(h,{[l]:"",ref:w,children:b})});v.displayName=f;function S(p){let m=a(e+"CollectionConsumer",p);return Wt.default.useCallback(()=>{let b=m.collectionRef.current;if(!b)return[];let x=Array.from(b.querySelectorAll(`[${l}]`));return Array.from(m.itemMap.values()).sort((E,D)=>x.indexOf(E.ref.current)-x.indexOf(D.ref.current))},[m.collectionRef,m.itemMap])}return[{Provider:s,Slot:d,ItemSlot:v},S,n]}var yo=U(he(),1);function rl(e){let t=yo.useRef({value:e,previous:e});return yo.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var te=U(ve(),1),zm=[" ","Enter","ArrowUp","ArrowDown"],jm=[" ","Enter"],pr="Select",[xo,Co,Wm]=Ur(pr),[Vr,Yb]=et(pr,[Wm,Ir]),So=Ir(),[Um,Ut]=Vr(pr),[Vm,Gm]=Vr(pr),nl=e=>{let{__scopeSelect:t,children:r,open:n,defaultOpen:o,onOpenChange:a,value:s,defaultValue:i,onValueChange:c,dir:d,name:f,autoComplete:l,disabled:h,required:v,form:S}=e,p=So(t),[m,y]=F.useState(null),[b,x]=F.useState(null),[I,w]=F.useState(!1),E=Dr(d),[D,A]=It({prop:n,defaultProp:o??!1,onChange:a,caller:pr}),[J,oe]=It({prop:s,defaultProp:i,onChange:c,caller:pr}),$=F.useRef(null),le=m?S||!!m.closest("form"):!0,[ae,ue]=F.useState(new Set),ge=Array.from(ae).map(ie=>ie.props.value).join(";");return(0,te.jsx)(Zr,{...p,children:(0,te.jsxs)(Um,{required:v,scope:t,trigger:m,onTriggerChange:y,valueNode:b,onValueNodeChange:x,valueNodeHasChildren:I,onValueNodeHasChildrenChange:w,contentId:$e(),value:J,onValueChange:oe,open:D,onOpenChange:A,dir:E,triggerPointerDownPosRef:$,disabled:h,children:[(0,te.jsx)(xo.Provider,{scope:t,children:(0,te.jsx)(Vm,{scope:e.__scopeSelect,onNativeOptionAdd:F.useCallback(ie=>{ue(T=>new Set(T).add(ie))},[]),onNativeOptionRemove:F.useCallback(ie=>{ue(T=>{let ee=new Set(T);return ee.delete(ie),ee})},[]),children:r})}),le?(0,te.jsxs)(Dl,{"aria-hidden":!0,required:v,tabIndex:-1,name:f,autoComplete:l,value:J,onChange:ie=>oe(ie.target.value),disabled:h,form:S,children:[J===void 0?(0,te.jsx)("option",{value:""}):null,Array.from(ae)]},ge):null]})})};nl.displayName=pr;var ol="SelectTrigger",al=F.forwardRef((e,t)=>{let{__scopeSelect:r,disabled:n=!1,...o}=e,a=So(r),s=Ut(ol,r),i=s.disabled||n,c=we(t,s.onTriggerChange),d=Co(r),f=F.useRef("touch"),[l,h,v]=Pl(p=>{let m=d().filter(x=>!x.disabled),y=m.find(x=>x.value===s.value),b=El(m,p,y);b!==void 0&&s.onValueChange(b.value)}),S=p=>{i||(s.onOpenChange(!0),v()),p&&(s.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return(0,te.jsx)(Bn,{asChild:!0,...a,children:(0,te.jsx)(de.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:i,"data-disabled":i?"":void 0,"data-placeholder":Il(s.value)?"":void 0,...o,ref:c,onClick:K(o.onClick,p=>{p.currentTarget.focus(),f.current!=="mouse"&&S(p)}),onPointerDown:K(o.onPointerDown,p=>{f.current=p.pointerType;let m=p.target;m.hasPointerCapture(p.pointerId)&&m.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(S(p),p.preventDefault())}),onKeyDown:K(o.onKeyDown,p=>{let m=l.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&h(p.key),!(m&&p.key===" ")&&zm.includes(p.key)&&(S(),p.preventDefault())})})})});al.displayName=ol;var il="SelectValue",sl=F.forwardRef((e,t)=>{let{__scopeSelect:r,className:n,style:o,children:a,placeholder:s="",...i}=e,c=Ut(il,r),{onValueNodeHasChildrenChange:d}=c,f=a!==void 0,l=we(t,c.onValueNodeChange);return Dt(()=>{d(f)},[d,f]),(0,te.jsx)(de.span,{...i,ref:l,style:{pointerEvents:"none"},children:Il(c.value)?(0,te.jsx)(te.Fragment,{children:s}):a})});sl.displayName=il;var Km="SelectIcon",cl=F.forwardRef((e,t)=>{let{__scopeSelect:r,children:n,...o}=e;return(0,te.jsx)(de.span,{"aria-hidden":!0,...o,ref:t,children:n||"\u25BC"})});cl.displayName=Km;var Hm="SelectPortal",ll=e=>(0,te.jsx)(Mr,{asChild:!0,...e});ll.displayName=Hm;var hr="SelectContent",ul=F.forwardRef((e,t)=>{let r=Ut(hr,e.__scopeSelect),[n,o]=F.useState();if(Dt(()=>{o(new DocumentFragment)},[]),!r.open){let a=n;return a?Oa.createPortal((0,te.jsx)(dl,{scope:e.__scopeSelect,children:(0,te.jsx)(xo.Slot,{scope:e.__scopeSelect,children:(0,te.jsx)("div",{children:e.children})})}),a):null}return(0,te.jsx)(fl,{...e,ref:t})});ul.displayName=hr;var ht=10,[dl,Vt]=Vr(hr),$m="SelectContentImpl",Xm=Rt("SelectContent.RemoveScroll"),fl=F.forwardRef((e,t)=>{let{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:a,onPointerDownOutside:s,side:i,sideOffset:c,align:d,alignOffset:f,arrowPadding:l,collisionBoundary:h,collisionPadding:v,sticky:S,hideWhenDetached:p,avoidCollisions:m,...y}=e,b=Ut(hr,r),[x,I]=F.useState(null),[w,E]=F.useState(null),D=we(t,N=>I(N)),[A,J]=F.useState(null),[oe,$]=F.useState(null),le=Co(r),[ae,ue]=F.useState(!1),ge=F.useRef(!1);F.useEffect(()=>{if(x)return Wr(x)},[x]),Lr();let ie=F.useCallback(N=>{let[B,...Q]=le().map(Z=>Z.ref.current),[L]=Q.slice(-1),q=document.activeElement;for(let Z of N)if(Z===q||(Z?.scrollIntoView({block:"nearest"}),Z===B&&w&&(w.scrollTop=0),Z===L&&w&&(w.scrollTop=w.scrollHeight),Z?.focus(),document.activeElement!==q))return},[le,w]),T=F.useCallback(()=>ie([A,x]),[ie,A,x]);F.useEffect(()=>{ae&&T()},[ae,T]);let{onOpenChange:ee,triggerPointerDownPosRef:O}=b;F.useEffect(()=>{if(x){let N={x:0,y:0},B=L=>{N={x:Math.abs(Math.round(L.pageX)-(O.current?.x??0)),y:Math.abs(Math.round(L.pageY)-(O.current?.y??0))}},Q=L=>{N.x<=10&&N.y<=10?L.preventDefault():x.contains(L.target)||ee(!1),document.removeEventListener("pointermove",B),O.current=null};return O.current!==null&&(document.addEventListener("pointermove",B),document.addEventListener("pointerup",Q,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",B),document.removeEventListener("pointerup",Q,{capture:!0})}}},[x,ee,O]),F.useEffect(()=>{let N=()=>ee(!1);return window.addEventListener("blur",N),window.addEventListener("resize",N),()=>{window.removeEventListener("blur",N),window.removeEventListener("resize",N)}},[ee]);let[g,u]=Pl(N=>{let B=le().filter(q=>!q.disabled),Q=B.find(q=>q.ref.current===document.activeElement),L=El(B,N,Q);L&&setTimeout(()=>L.ref.current.focus())}),k=F.useCallback((N,B,Q)=>{let L=!ge.current&&!Q;(b.value!==void 0&&b.value===B||L)&&(J(N),L&&(ge.current=!0))},[b.value]),_=F.useCallback(()=>x?.focus(),[x]),j=F.useCallback((N,B,Q)=>{let L=!ge.current&&!Q;(b.value!==void 0&&b.value===B||L)&&$(N)},[b.value]),X=n==="popper"?Pa:ml,W=X===Pa?{side:i,sideOffset:c,align:d,alignOffset:f,arrowPadding:l,collisionBoundary:h,collisionPadding:v,sticky:S,hideWhenDetached:p,avoidCollisions:m}:{};return(0,te.jsx)(dl,{scope:r,content:x,viewport:w,onViewportChange:E,itemRefCallback:k,selectedItem:A,onItemLeave:_,itemTextRefCallback:j,focusSelectedItem:T,selectedItemText:oe,position:n,isPositioned:ae,searchRef:g,children:(0,te.jsx)(fr,{as:Xm,allowPinchZoom:!0,children:(0,te.jsx)(cr,{asChild:!0,trapped:b.open,onMountAutoFocus:N=>{N.preventDefault()},onUnmountAutoFocus:K(o,N=>{b.trigger?.focus({preventScroll:!0}),N.preventDefault()}),children:(0,te.jsx)(Nr,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:N=>N.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:(0,te.jsx)(X,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:N=>N.preventDefault(),...y,...W,onPlaced:()=>ue(!0),ref:D,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:K(y.onKeyDown,N=>{let B=N.ctrlKey||N.altKey||N.metaKey;if(N.key==="Tab"&&N.preventDefault(),!B&&N.key.length===1&&u(N.key),["ArrowUp","ArrowDown","Home","End"].includes(N.key)){let L=le().filter(q=>!q.disabled).map(q=>q.ref.current);if(["ArrowUp","End"].includes(N.key)&&(L=L.slice().reverse()),["ArrowUp","ArrowDown"].includes(N.key)){let q=N.target,Z=L.indexOf(q);L=L.slice(Z+1)}setTimeout(()=>ie(L)),N.preventDefault()}})})})})})})});fl.displayName=$m;var Ym="SelectItemAlignedPosition",ml=F.forwardRef((e,t)=>{let{__scopeSelect:r,onPlaced:n,...o}=e,a=Ut(hr,r),s=Vt(hr,r),[i,c]=F.useState(null),[d,f]=F.useState(null),l=we(t,D=>f(D)),h=Co(r),v=F.useRef(!1),S=F.useRef(!0),{viewport:p,selectedItem:m,selectedItemText:y,focusSelectedItem:b}=s,x=F.useCallback(()=>{if(a.trigger&&a.valueNode&&i&&d&&p&&m&&y){let D=a.trigger.getBoundingClientRect(),A=d.getBoundingClientRect(),J=a.valueNode.getBoundingClientRect(),oe=y.getBoundingClientRect();if(a.dir!=="rtl"){let q=oe.left-A.left,Z=J.left-q,me=D.left-Z,Y=D.width+me,Ce=Math.max(Y,A.width),Ne=window.innerWidth-ht,ke=Bo(Z,[ht,Math.max(ht,Ne-Ce)]);i.style.minWidth=Y+"px",i.style.left=ke+"px"}else{let q=A.right-oe.right,Z=window.innerWidth-J.right-q,me=window.innerWidth-D.right-Z,Y=D.width+me,Ce=Math.max(Y,A.width),Ne=window.innerWidth-ht,ke=Bo(Z,[ht,Math.max(ht,Ne-Ce)]);i.style.minWidth=Y+"px",i.style.right=ke+"px"}let $=h(),le=window.innerHeight-ht*2,ae=p.scrollHeight,ue=window.getComputedStyle(d),ge=parseInt(ue.borderTopWidth,10),ie=parseInt(ue.paddingTop,10),T=parseInt(ue.borderBottomWidth,10),ee=parseInt(ue.paddingBottom,10),O=ge+ie+ae+ee+T,g=Math.min(m.offsetHeight*5,O),u=window.getComputedStyle(p),k=parseInt(u.paddingTop,10),_=parseInt(u.paddingBottom,10),j=D.top+D.height/2-ht,X=le-j,W=m.offsetHeight/2,N=m.offsetTop+W,B=ge+ie+N,Q=O-B;if(B<=j){let q=$.length>0&&m===$[$.length-1].ref.current;i.style.bottom="0px";let Z=d.clientHeight-p.offsetTop-p.offsetHeight,me=Math.max(X,W+(q?_:0)+Z+T),Y=B+me;i.style.height=Y+"px"}else{let q=$.length>0&&m===$[0].ref.current;i.style.top="0px";let me=Math.max(j,ge+p.offsetTop+(q?k:0)+W)+Q;i.style.height=me+"px",p.scrollTop=B-j+p.offsetTop}i.style.margin=`${ht}px 0`,i.style.minHeight=g+"px",i.style.maxHeight=le+"px",n?.(),requestAnimationFrame(()=>v.current=!0)}},[h,a.trigger,a.valueNode,i,d,p,m,y,a.dir,n]);Dt(()=>x(),[x]);let[I,w]=F.useState();Dt(()=>{d&&w(window.getComputedStyle(d).zIndex)},[d]);let E=F.useCallback(D=>{D&&S.current===!0&&(x(),b?.(),S.current=!1)},[x,b]);return(0,te.jsx)(Jm,{scope:r,contentWrapper:i,shouldExpandOnScrollRef:v,onScrollButtonChange:E,children:(0,te.jsx)("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:I},children:(0,te.jsx)(de.div,{...o,ref:l,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});ml.displayName=Ym;var qm="SelectPopperPosition",Pa=F.forwardRef((e,t)=>{let{__scopeSelect:r,align:n="start",collisionPadding:o=ht,...a}=e,s=So(r);return(0,te.jsx)(zn,{...s,...a,ref:t,align:n,collisionPadding:o,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Pa.displayName=qm;var[Jm,_a]=Vr(hr,{}),Ea="SelectViewport",pl=F.forwardRef((e,t)=>{let{__scopeSelect:r,nonce:n,...o}=e,a=Vt(Ea,r),s=_a(Ea,r),i=we(t,a.onViewportChange),c=F.useRef(0);return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),(0,te.jsx)(xo.Slot,{scope:r,children:(0,te.jsx)(de.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:i,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:K(o.onScroll,d=>{let f=d.currentTarget,{contentWrapper:l,shouldExpandOnScrollRef:h}=s;if(h?.current&&l){let v=Math.abs(c.current-f.scrollTop);if(v>0){let S=window.innerHeight-ht*2,p=parseFloat(l.style.minHeight),m=parseFloat(l.style.height),y=Math.max(p,m);if(y<S){let b=y+v,x=Math.min(S,b),I=b-x;l.style.height=x+"px",l.style.bottom==="0px"&&(f.scrollTop=I>0?I:0,l.style.justifyContent="flex-end")}}}c.current=f.scrollTop})})})]})});pl.displayName=Ea;var hl="SelectGroup",[Zm,Qm]=Vr(hl),ep=F.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e,o=$e();return(0,te.jsx)(Zm,{scope:r,id:o,children:(0,te.jsx)(de.div,{role:"group","aria-labelledby":o,...n,ref:t})})});ep.displayName=hl;var gl="SelectLabel",vl=F.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e,o=Qm(gl,r);return(0,te.jsx)(de.div,{id:o.id,...n,ref:t})});vl.displayName=gl;var wo="SelectItem",[tp,bl]=Vr(wo),yl=F.forwardRef((e,t)=>{let{__scopeSelect:r,value:n,disabled:o=!1,textValue:a,...s}=e,i=Ut(wo,r),c=Vt(wo,r),d=i.value===n,[f,l]=F.useState(a??""),[h,v]=F.useState(!1),S=we(t,b=>c.itemRefCallback?.(b,n,o)),p=$e(),m=F.useRef("touch"),y=()=>{o||(i.onValueChange(n),i.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,te.jsx)(tp,{scope:r,value:n,disabled:o,textId:p,isSelected:d,onItemTextChange:F.useCallback(b=>{l(x=>x||(b?.textContent??"").trim())},[]),children:(0,te.jsx)(xo.ItemSlot,{scope:r,value:n,disabled:o,textValue:f,children:(0,te.jsx)(de.div,{role:"option","aria-labelledby":p,"data-highlighted":h?"":void 0,"aria-selected":d&&h,"data-state":d?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...s,ref:S,onFocus:K(s.onFocus,()=>v(!0)),onBlur:K(s.onBlur,()=>v(!1)),onClick:K(s.onClick,()=>{m.current!=="mouse"&&y()}),onPointerUp:K(s.onPointerUp,()=>{m.current==="mouse"&&y()}),onPointerDown:K(s.onPointerDown,b=>{m.current=b.pointerType}),onPointerMove:K(s.onPointerMove,b=>{m.current=b.pointerType,o?c.onItemLeave?.():m.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:K(s.onPointerLeave,b=>{b.currentTarget===document.activeElement&&c.onItemLeave?.()}),onKeyDown:K(s.onKeyDown,b=>{c.searchRef?.current!==""&&b.key===" "||(jm.includes(b.key)&&y(),b.key===" "&&b.preventDefault())})})})})});yl.displayName=wo;var bn="SelectItemText",wl=F.forwardRef((e,t)=>{let{__scopeSelect:r,className:n,style:o,...a}=e,s=Ut(bn,r),i=Vt(bn,r),c=bl(bn,r),d=Gm(bn,r),[f,l]=F.useState(null),h=we(t,y=>l(y),c.onItemTextChange,y=>i.itemTextRefCallback?.(y,c.value,c.disabled)),v=f?.textContent,S=F.useMemo(()=>(0,te.jsx)("option",{value:c.value,disabled:c.disabled,children:v},c.value),[c.disabled,c.value,v]),{onNativeOptionAdd:p,onNativeOptionRemove:m}=d;return Dt(()=>(p(S),()=>m(S)),[p,m,S]),(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(de.span,{id:c.textId,...a,ref:h}),c.isSelected&&s.valueNode&&!s.valueNodeHasChildren?Oa.createPortal(a.children,s.valueNode):null]})});wl.displayName=bn;var xl="SelectItemIndicator",Cl=F.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e;return bl(xl,r).isSelected?(0,te.jsx)(de.span,{"aria-hidden":!0,...n,ref:t}):null});Cl.displayName=xl;var ka="SelectScrollUpButton",Sl=F.forwardRef((e,t)=>{let r=Vt(ka,e.__scopeSelect),n=_a(ka,e.__scopeSelect),[o,a]=F.useState(!1),s=we(t,n.onScrollButtonChange);return Dt(()=>{if(r.viewport&&r.isPositioned){let c=function(){let f=d.scrollTop>0;a(f)};var i=c;let d=r.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),o?(0,te.jsx)(Nl,{...e,ref:s,onAutoScroll:()=>{let{viewport:i,selectedItem:c}=r;i&&c&&(i.scrollTop=i.scrollTop-c.offsetHeight)}}):null});Sl.displayName=ka;var Ta="SelectScrollDownButton",Rl=F.forwardRef((e,t)=>{let r=Vt(Ta,e.__scopeSelect),n=_a(Ta,e.__scopeSelect),[o,a]=F.useState(!1),s=we(t,n.onScrollButtonChange);return Dt(()=>{if(r.viewport&&r.isPositioned){let c=function(){let f=d.scrollHeight-d.clientHeight,l=Math.ceil(d.scrollTop)<f;a(l)};var i=c;let d=r.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),o?(0,te.jsx)(Nl,{...e,ref:s,onAutoScroll:()=>{let{viewport:i,selectedItem:c}=r;i&&c&&(i.scrollTop=i.scrollTop+c.offsetHeight)}}):null});Rl.displayName=Ta;var Nl=F.forwardRef((e,t)=>{let{__scopeSelect:r,onAutoScroll:n,...o}=e,a=Vt("SelectScrollButton",r),s=F.useRef(null),i=Co(r),c=F.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return F.useEffect(()=>()=>c(),[c]),Dt(()=>{i().find(f=>f.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[i]),(0,te.jsx)(de.div,{"aria-hidden":!0,...o,ref:t,style:{flexShrink:0,...o.style},onPointerDown:K(o.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(n,50))}),onPointerMove:K(o.onPointerMove,()=>{a.onItemLeave?.(),s.current===null&&(s.current=window.setInterval(n,50))}),onPointerLeave:K(o.onPointerLeave,()=>{c()})})}),rp="SelectSeparator",Ml=F.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e;return(0,te.jsx)(de.div,{"aria-hidden":!0,...n,ref:t})});Ml.displayName=rp;var Aa="SelectArrow",np=F.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e,o=So(r),a=Ut(Aa,r),s=Vt(Aa,r);return a.open&&s.position==="popper"?(0,te.jsx)(jn,{...o,...n,ref:t}):null});np.displayName=Aa;var op="SelectBubbleInput",Dl=F.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{let o=F.useRef(null),a=we(n,o),s=rl(t);return F.useEffect(()=>{let i=o.current;if(!i)return;let c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(s!==t&&f){let l=new Event("change",{bubbles:!0});f.call(i,t),i.dispatchEvent(l)}},[s,t]),(0,te.jsx)(de.select,{...r,style:{...Hi,...r.style},ref:a,defaultValue:t})});Dl.displayName=op;function Il(e){return e===""||e===void 0}function Pl(e){let t=ft(e),r=F.useRef(""),n=F.useRef(0),o=F.useCallback(s=>{let i=r.current+s;t(i),function c(d){r.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(i)},[t]),a=F.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return F.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,o,a]}function El(e,t,r){let o=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=r?e.indexOf(r):-1,s=ap(e,Math.max(a,0));o.length===1&&(s=s.filter(d=>d!==r));let c=s.find(d=>d.textValue.toLowerCase().startsWith(o.toLowerCase()));return c!==r?c:void 0}function ap(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var kl=nl,La=al,Tl=sl,Al=cl,Ol=ll,Fa=ul,_l=pl;var Ba=vl,za=yl,Ll=wl,Fl=Cl,ja=Sl,Wa=Rl,Ua=Ml;var Ee=U(ve(),1),Bl=kl;var zl=Tl,Va=Gt.forwardRef(({className:e,children:t,...r},n)=>(0,Ee.jsxs)(La,{ref:n,className:G("flex h-10 w-full items-center justify-between rounded-md border border-gray-300 bg-background px-3 py-2 text-sm shadow-sm hover:shadow-md transition-shadow placeholder:text-muted-foreground focus:outline-none focus:shadow-md focus:border-krushr-primary disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,(0,Ee.jsx)(Al,{asChild:!0,children:(0,Ee.jsx)(qr,{className:"h-4 w-4 opacity-50"})})]}));Va.displayName=La.displayName;var jl=Gt.forwardRef(({className:e,...t},r)=>(0,Ee.jsx)(ja,{ref:r,className:G("flex cursor-default items-center justify-center py-1",e),...t,children:(0,Ee.jsx)(Pi,{className:"h-4 w-4"})}));jl.displayName=ja.displayName;var Wl=Gt.forwardRef(({className:e,...t},r)=>(0,Ee.jsx)(Wa,{ref:r,className:G("flex cursor-default items-center justify-center py-1",e),...t,children:(0,Ee.jsx)(qr,{className:"h-4 w-4"})}));Wl.displayName=Wa.displayName;var Ga=Gt.forwardRef(({className:e,children:t,position:r="popper",...n},o)=>(0,Ee.jsx)(Ol,{children:(0,Ee.jsxs)(Fa,{ref:o,className:G("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[(0,Ee.jsx)(jl,{}),(0,Ee.jsx)(_l,{className:G("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,Ee.jsx)(Wl,{})]})}));Ga.displayName=Fa.displayName;var sp=Gt.forwardRef(({className:e,...t},r)=>(0,Ee.jsx)(Ba,{ref:r,className:G("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));sp.displayName=Ba.displayName;var Gr=Gt.forwardRef(({className:e,children:t,...r},n)=>(0,Ee.jsxs)(za,{ref:n,className:G("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[(0,Ee.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,Ee.jsx)(Fl,{children:(0,Ee.jsx)(Cr,{className:"h-4 w-4"})})}),(0,Ee.jsx)(Ll,{children:t})]}));Gr.displayName=za.displayName;var cp=Gt.forwardRef(({className:e,...t},r)=>(0,Ee.jsx)(Ua,{ref:r,className:G("-mx-1 my-1 h-px bg-muted",e),...t}));cp.displayName=Ua.displayName;var Ka=U(he(),1);var se=U(ve(),1),lp=e=>!e||typeof e!="string"?Lo:e.startsWith("image/")?Ai:e.startsWith("video/")?Oi:e.includes("pdf")||e.includes("document")||e.includes("text")?An:e.includes("zip")||e.includes("rar")||e.includes("7z")?Ti:Lo,up=e=>!e||typeof e!="string"?"bg-gray-100 text-gray-700":e.startsWith("image/")?"bg-green-100 text-green-700":e.startsWith("video/")?"bg-purple-100 text-purple-700":e.startsWith("audio/")?"bg-pink-100 text-pink-700":e.includes("pdf")?"bg-red-100 text-red-700":e.includes("document")||e.includes("text")?"bg-blue-100 text-blue-700":e.includes("zip")||e.includes("rar")?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-700",Ul=e=>{if(e===0)return"0 Bytes";let t=1024,r=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,n)).toFixed(1))+" "+r[n]},dp=e=>{let t=new Date(e),n=Math.abs(new Date().getTime()-t.getTime()),o=Math.ceil(n/(1e3*60*60*24));return o===1?"Today":o===2?"Yesterday":o<=7?`${o} days ago`:t.toLocaleDateString()},Vl=({attachment:e,className:t})=>{let[r,n]=(0,Ka.useState)(!1);if(!e.thumbnailUrl||r){let o=lp(e.mimeType),a=up(e.mimeType);return(0,se.jsx)("div",{className:G("flex items-center justify-center rounded-lg p-2",a,t),children:(0,se.jsx)(o,{className:"h-8 w-8"})})}return(0,se.jsx)("img",{src:e.thumbnailUrl,alt:e.filename,className:G("rounded-lg object-cover",t),onError:()=>n(!0),onLoad:()=>console.log(`\u2705 Thumbnail loaded: ${e.thumbnailUrl}`)})},fp=({attachments:e,canDelete:t=!1,onRefresh:r,className:n,compact:o=!1})=>{let[a,s]=(0,Ka.useState)(null),i=pe.upload.deleteAttachment.useMutation({onSuccess:()=>{ct.success("Attachment deleted successfully"),s(null),r?.()},onError:l=>{ct.error(`Failed to delete: ${l.message}`),s(null)}});if(e.length===0)return null;let c=l=>{try{let h=document.createElement("a");h.href=l.downloadUrl,h.download=l.filename,h.target="_blank",document.body.appendChild(h),h.click(),document.body.removeChild(h),ct.success("Download started")}catch{ct.error("Download failed")}},d=l=>{l.mimeType.startsWith("image/")||l.mimeType==="application/pdf"?window.open(l.downloadUrl,"_blank","noopener,noreferrer"):ct.info("Preview not available for this file type")},f=l=>{a||(s(l.id),i.mutate({attachmentId:l.id}))};return o?(0,se.jsx)("div",{className:G("flex flex-wrap gap-2",n),children:e.map(l=>{let h=a===l.id;return(0,se.jsxs)("div",{className:G("flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-lg text-sm",h&&"opacity-50"),children:[(0,se.jsx)(Vl,{attachment:l,className:"h-8 w-8"}),(0,se.jsx)("span",{className:"font-medium truncate max-w-[150px]",children:l.filename}),(0,se.jsx)("span",{className:"text-gray-500",children:Ul(l.size)}),l.compressed&&(0,se.jsx)(Oe,{variant:"secondary",className:"text-xs",children:"Compressed"}),(0,se.jsxs)("div",{className:"flex items-center gap-1",children:[(l.mimeType.startsWith("image/")||l.mimeType==="application/pdf")&&(0,se.jsx)(be,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>d(l),title:"Preview",disabled:h,children:(0,se.jsx)(_o,{className:"h-3 w-3"})}),(0,se.jsx)(be,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>c(l),title:"Download",disabled:h,children:(0,se.jsx)(Oo,{className:"h-3 w-3"})}),t&&(0,se.jsx)(be,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",onClick:()=>f(l),title:"Delete",disabled:h,children:(0,se.jsx)(Mt,{className:"h-3 w-3"})})]})]},l.id)})}):(0,se.jsxs)("div",{className:G("space-y-3",n),children:[(0,se.jsx)("div",{className:"flex items-center justify-between",children:(0,se.jsxs)("h4",{className:"text-sm font-medium text-gray-900",children:["Attachments (",e.length,")"]})}),(0,se.jsx)("div",{className:"space-y-2",children:e.map(l=>{let h=a===l.id;return(0,se.jsx)(xr,{className:G("p-4",h&&"opacity-50"),children:(0,se.jsxs)("div",{className:"flex items-start gap-3",children:[(0,se.jsx)(Vl,{attachment:l,className:"w-16 h-16 flex-shrink-0"}),(0,se.jsx)("div",{className:"flex-1 min-w-0",children:(0,se.jsxs)("div",{className:"flex items-start justify-between",children:[(0,se.jsx)("div",{className:"min-w-0 flex-1",children:(0,se.jsxs)("p",{className:"text-sm font-medium text-gray-900 truncate",children:[l.filename,(0,se.jsxs)("span",{className:"text-xs text-gray-500 font-normal ml-2",children:["\u2022 ",Ul(l.size)," \u2022 ",dp(l.uploadedAt),l.compressed&&(0,se.jsxs)(se.Fragment,{children:[" ","\u2022 ",(0,se.jsx)(Oe,{variant:"secondary",className:"text-xs inline",children:"Compressed"})]})]})]})}),(0,se.jsxs)("div",{className:"flex items-center gap-1 ml-2",children:[(l.mimeType.startsWith("image/")||l.mimeType==="application/pdf")&&(0,se.jsx)(be,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>d(l),title:"Preview",disabled:h,children:(0,se.jsx)(_o,{className:"h-4 w-4"})}),(0,se.jsx)(be,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>c(l),title:"Download",disabled:h,children:(0,se.jsx)(Oo,{className:"h-4 w-4"})}),t&&(0,se.jsx)(be,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",onClick:()=>f(l),title:"Delete",disabled:h,children:(0,se.jsx)(Mt,{className:"h-4 w-4"})})]})]})})]})},l.id)})})]})},Gl=fp;var rt=U(he(),1);var Zl=U(he(),1);var Ha=U(he(),1);var Ro=U(ve(),1),$a="Progress",Xa=100,[mp,fy]=et($a),[pp,hp]=mp($a),$l=Ha.forwardRef((e,t)=>{let{__scopeProgress:r,value:n=null,max:o,getValueLabel:a=gp,...s}=e;(o||o===0)&&!Kl(o)&&console.error(vp(`${o}`,"Progress"));let i=Kl(o)?o:Xa;n!==null&&!Hl(n,i)&&console.error(bp(`${n}`,"Progress"));let c=Hl(n,i)?n:null,d=No(c)?a(c,i):void 0;return(0,Ro.jsx)(pp,{scope:r,value:c,max:i,children:(0,Ro.jsx)(de.div,{"aria-valuemax":i,"aria-valuemin":0,"aria-valuenow":No(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":ql(c,i),"data-value":c??void 0,"data-max":i,...s,ref:t})})});$l.displayName=$a;var Xl="ProgressIndicator",Yl=Ha.forwardRef((e,t)=>{let{__scopeProgress:r,...n}=e,o=hp(Xl,r);return(0,Ro.jsx)(de.div,{"data-state":ql(o.value,o.max),"data-value":o.value??void 0,"data-max":o.max,...n,ref:t})});Yl.displayName=Xl;function gp(e,t){return`${Math.round(e/t*100)}%`}function ql(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function No(e){return typeof e=="number"}function Kl(e){return No(e)&&!isNaN(e)&&e>0}function Hl(e,t){return No(e)&&!isNaN(e)&&e<=t&&e>=0}function vp(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Xa}\`.`}function bp(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Xa} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Ya=$l,Jl=Yl;var qa=U(ve(),1),Ja=Zl.forwardRef(({className:e,value:t,...r},n)=>(0,qa.jsx)(Ya,{ref:n,className:G("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",e),...r,children:(0,qa.jsx)(Jl,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Ja.displayName=Ya.displayName;var kt=U(he(),1);var Le=U(he(),1);var H=U(he(),1);var ze=U(he(),1);var Kt=U(ve(),1),Za="rovingFocusGroup.onEntryFocus",wp={bubbles:!1,cancelable:!0},yn="RovingFocusGroup",[Qa,Ql,xp]=Ur(yn),[Cp,ei]=et(yn,[xp]),[Sp,Rp]=Cp(yn),eu=ze.forwardRef((e,t)=>(0,Kt.jsx)(Qa.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,Kt.jsx)(Qa.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,Kt.jsx)(Np,{...e,ref:t})})}));eu.displayName=yn;var Np=ze.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,orientation:n,loop:o=!1,dir:a,currentTabStopId:s,defaultCurrentTabStopId:i,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:f=!1,...l}=e,h=ze.useRef(null),v=we(t,h),S=Dr(a),[p,m]=It({prop:s,defaultProp:i??null,onChange:c,caller:yn}),[y,b]=ze.useState(!1),x=ft(d),I=Ql(r),w=ze.useRef(!1),[E,D]=ze.useState(0);return ze.useEffect(()=>{let A=h.current;if(A)return A.addEventListener(Za,x),()=>A.removeEventListener(Za,x)},[x]),(0,Kt.jsx)(Sp,{scope:r,orientation:n,dir:S,loop:o,currentTabStopId:p,onItemFocus:ze.useCallback(A=>m(A),[m]),onItemShiftTab:ze.useCallback(()=>b(!0),[]),onFocusableItemAdd:ze.useCallback(()=>D(A=>A+1),[]),onFocusableItemRemove:ze.useCallback(()=>D(A=>A-1),[]),children:(0,Kt.jsx)(de.div,{tabIndex:y||E===0?-1:0,"data-orientation":n,...l,ref:v,style:{outline:"none",...e.style},onMouseDown:K(e.onMouseDown,()=>{w.current=!0}),onFocus:K(e.onFocus,A=>{let J=!w.current;if(A.target===A.currentTarget&&J&&!y){let oe=new CustomEvent(Za,wp);if(A.currentTarget.dispatchEvent(oe),!oe.defaultPrevented){let $=I().filter(ie=>ie.focusable),le=$.find(ie=>ie.active),ae=$.find(ie=>ie.id===p),ge=[le,ae,...$].filter(Boolean).map(ie=>ie.ref.current);nu(ge,f)}}w.current=!1}),onBlur:K(e.onBlur,()=>b(!1))})})}),tu="RovingFocusGroupItem",ru=ze.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,focusable:n=!0,active:o=!1,tabStopId:a,children:s,...i}=e,c=$e(),d=a||c,f=Rp(tu,r),l=f.currentTabStopId===d,h=Ql(r),{onFocusableItemAdd:v,onFocusableItemRemove:S,currentTabStopId:p}=f;return ze.useEffect(()=>{if(n)return v(),()=>S()},[n,v,S]),(0,Kt.jsx)(Qa.ItemSlot,{scope:r,id:d,focusable:n,active:o,children:(0,Kt.jsx)(de.span,{tabIndex:l?0:-1,"data-orientation":f.orientation,...i,ref:t,onMouseDown:K(e.onMouseDown,m=>{n?f.onItemFocus(d):m.preventDefault()}),onFocus:K(e.onFocus,()=>f.onItemFocus(d)),onKeyDown:K(e.onKeyDown,m=>{if(m.key==="Tab"&&m.shiftKey){f.onItemShiftTab();return}if(m.target!==m.currentTarget)return;let y=Ip(m,f.orientation,f.dir);if(y!==void 0){if(m.metaKey||m.ctrlKey||m.altKey||m.shiftKey)return;m.preventDefault();let x=h().filter(I=>I.focusable).map(I=>I.ref.current);if(y==="last")x.reverse();else if(y==="prev"||y==="next"){y==="prev"&&x.reverse();let I=x.indexOf(m.currentTarget);x=f.loop?Pp(x,I+1):x.slice(I+1)}setTimeout(()=>nu(x))}}),children:typeof s=="function"?s({isCurrentTabStop:l,hasTabStop:p!=null}):s})})});ru.displayName=tu;var Mp={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Dp(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Ip(e,t,r){let n=Dp(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return Mp[n]}function nu(e,t=!1){let r=document.activeElement;for(let n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function Pp(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var ou=eu,au=ru;var ne=U(ve(),1),ti=["Enter"," "],kp=["ArrowDown","PageUp","Home"],su=["ArrowUp","PageDown","End"],Tp=[...kp,...su],Ap={ltr:[...ti,"ArrowRight"],rtl:[...ti,"ArrowLeft"]},Op={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Sn="Menu",[xn,_p,Lp]=Ur(Sn),[gr,ri]=et(Sn,[Lp,Ir,ei]),Rn=Ir(),cu=ei(),[lu,Ht]=gr(Sn),[Fp,Nn]=gr(Sn),uu=e=>{let{__scopeMenu:t,open:r=!1,children:n,dir:o,onOpenChange:a,modal:s=!0}=e,i=Rn(t),[c,d]=H.useState(null),f=H.useRef(!1),l=ft(a),h=Dr(o);return H.useEffect(()=>{let v=()=>{f.current=!0,document.addEventListener("pointerdown",S,{capture:!0,once:!0}),document.addEventListener("pointermove",S,{capture:!0,once:!0})},S=()=>f.current=!1;return document.addEventListener("keydown",v,{capture:!0}),()=>{document.removeEventListener("keydown",v,{capture:!0}),document.removeEventListener("pointerdown",S,{capture:!0}),document.removeEventListener("pointermove",S,{capture:!0})}},[]),(0,ne.jsx)(Zr,{...i,children:(0,ne.jsx)(lu,{scope:t,open:r,onOpenChange:l,content:c,onContentChange:d,children:(0,ne.jsx)(Fp,{scope:t,onClose:H.useCallback(()=>l(!1),[l]),isUsingKeyboardRef:f,dir:h,modal:s,children:n})})})};uu.displayName=Sn;var Bp="MenuAnchor",ni=H.forwardRef((e,t)=>{let{__scopeMenu:r,...n}=e,o=Rn(r);return(0,ne.jsx)(Bn,{...o,...n,ref:t})});ni.displayName=Bp;var oi="MenuPortal",[zp,du]=gr(oi,{forceMount:void 0}),fu=e=>{let{__scopeMenu:t,forceMount:r,children:n,container:o}=e,a=Ht(oi,t);return(0,ne.jsx)(zp,{scope:t,forceMount:r,children:(0,ne.jsx)(Pt,{present:r||a.open,children:(0,ne.jsx)(Mr,{asChild:!0,container:o,children:n})})})};fu.displayName=oi;var dt="MenuContent",[jp,ai]=gr(dt),mu=H.forwardRef((e,t)=>{let r=du(dt,e.__scopeMenu),{forceMount:n=r.forceMount,...o}=e,a=Ht(dt,e.__scopeMenu),s=Nn(dt,e.__scopeMenu);return(0,ne.jsx)(xn.Provider,{scope:e.__scopeMenu,children:(0,ne.jsx)(Pt,{present:n||a.open,children:(0,ne.jsx)(xn.Slot,{scope:e.__scopeMenu,children:s.modal?(0,ne.jsx)(Wp,{...o,ref:t}):(0,ne.jsx)(Up,{...o,ref:t})})})})}),Wp=H.forwardRef((e,t)=>{let r=Ht(dt,e.__scopeMenu),n=H.useRef(null),o=we(t,n);return H.useEffect(()=>{let a=n.current;if(a)return Wr(a)},[]),(0,ne.jsx)(ii,{...e,ref:o,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:K(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),Up=H.forwardRef((e,t)=>{let r=Ht(dt,e.__scopeMenu);return(0,ne.jsx)(ii,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),Vp=Rt("MenuContent.ScrollLock"),ii=H.forwardRef((e,t)=>{let{__scopeMenu:r,loop:n=!1,trapFocus:o,onOpenAutoFocus:a,onCloseAutoFocus:s,disableOutsidePointerEvents:i,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:f,onFocusOutside:l,onInteractOutside:h,onDismiss:v,disableOutsideScroll:S,...p}=e,m=Ht(dt,r),y=Nn(dt,r),b=Rn(r),x=cu(r),I=_p(r),[w,E]=H.useState(null),D=H.useRef(null),A=we(t,D,m.onContentChange),J=H.useRef(0),oe=H.useRef(""),$=H.useRef(0),le=H.useRef(null),ae=H.useRef("right"),ue=H.useRef(0),ge=S?fr:H.Fragment,ie=S?{as:Vp,allowPinchZoom:!0}:void 0,T=O=>{let g=oe.current+O,u=I().filter(N=>!N.disabled),k=document.activeElement,_=u.find(N=>N.ref.current===k)?.textValue,j=u.map(N=>N.textValue),X=rh(j,g,_),W=u.find(N=>N.textValue===X)?.ref.current;(function N(B){oe.current=B,window.clearTimeout(J.current),B!==""&&(J.current=window.setTimeout(()=>N(""),1e3))})(g),W&&setTimeout(()=>W.focus())};H.useEffect(()=>()=>window.clearTimeout(J.current),[]),Lr();let ee=H.useCallback(O=>ae.current===le.current?.side&&oh(O,le.current?.area),[]);return(0,ne.jsx)(jp,{scope:r,searchRef:oe,onItemEnter:H.useCallback(O=>{ee(O)&&O.preventDefault()},[ee]),onItemLeave:H.useCallback(O=>{ee(O)||(D.current?.focus(),E(null))},[ee]),onTriggerLeave:H.useCallback(O=>{ee(O)&&O.preventDefault()},[ee]),pointerGraceTimerRef:$,onPointerGraceIntentChange:H.useCallback(O=>{le.current=O},[]),children:(0,ne.jsx)(ge,{...ie,children:(0,ne.jsx)(cr,{asChild:!0,trapped:o,onMountAutoFocus:K(a,O=>{O.preventDefault(),D.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:(0,ne.jsx)(Nr,{asChild:!0,disableOutsidePointerEvents:i,onEscapeKeyDown:d,onPointerDownOutside:f,onFocusOutside:l,onInteractOutside:h,onDismiss:v,children:(0,ne.jsx)(ou,{asChild:!0,...x,dir:y.dir,orientation:"vertical",loop:n,currentTabStopId:w,onCurrentTabStopIdChange:E,onEntryFocus:K(c,O=>{y.isUsingKeyboardRef.current||O.preventDefault()}),preventScrollOnEntryFocus:!0,children:(0,ne.jsx)(zn,{role:"menu","aria-orientation":"vertical","data-state":Pu(m.open),"data-radix-menu-content":"",dir:y.dir,...b,...p,ref:A,style:{outline:"none",...p.style},onKeyDown:K(p.onKeyDown,O=>{let u=O.target.closest("[data-radix-menu-content]")===O.currentTarget,k=O.ctrlKey||O.altKey||O.metaKey,_=O.key.length===1;u&&(O.key==="Tab"&&O.preventDefault(),!k&&_&&T(O.key));let j=D.current;if(O.target!==j||!Tp.includes(O.key))return;O.preventDefault();let W=I().filter(N=>!N.disabled).map(N=>N.ref.current);su.includes(O.key)&&W.reverse(),eh(W)}),onBlur:K(e.onBlur,O=>{O.currentTarget.contains(O.target)||(window.clearTimeout(J.current),oe.current="")}),onPointerMove:K(e.onPointerMove,Cn(O=>{let g=O.target,u=ue.current!==O.clientX;if(O.currentTarget.contains(g)&&u){let k=O.clientX>ue.current?"right":"left";ae.current=k,ue.current=O.clientX}}))})})})})})})});mu.displayName=dt;var Gp="MenuGroup",si=H.forwardRef((e,t)=>{let{__scopeMenu:r,...n}=e;return(0,ne.jsx)(de.div,{role:"group",...n,ref:t})});si.displayName=Gp;var Kp="MenuLabel",pu=H.forwardRef((e,t)=>{let{__scopeMenu:r,...n}=e;return(0,ne.jsx)(de.div,{...n,ref:t})});pu.displayName=Kp;var Mo="MenuItem",iu="menu.itemSelect",Io=H.forwardRef((e,t)=>{let{disabled:r=!1,onSelect:n,...o}=e,a=H.useRef(null),s=Nn(Mo,e.__scopeMenu),i=ai(Mo,e.__scopeMenu),c=we(t,a),d=H.useRef(!1),f=()=>{let l=a.current;if(!r&&l){let h=new CustomEvent(iu,{bubbles:!0,cancelable:!0});l.addEventListener(iu,v=>n?.(v),{once:!0}),Ki(l,h),h.defaultPrevented?d.current=!1:s.onClose()}};return(0,ne.jsx)(hu,{...o,ref:c,disabled:r,onClick:K(e.onClick,f),onPointerDown:l=>{e.onPointerDown?.(l),d.current=!0},onPointerUp:K(e.onPointerUp,l=>{d.current||l.currentTarget?.click()}),onKeyDown:K(e.onKeyDown,l=>{let h=i.searchRef.current!=="";r||h&&l.key===" "||ti.includes(l.key)&&(l.currentTarget.click(),l.preventDefault())})})});Io.displayName=Mo;var hu=H.forwardRef((e,t)=>{let{__scopeMenu:r,disabled:n=!1,textValue:o,...a}=e,s=ai(Mo,r),i=cu(r),c=H.useRef(null),d=we(t,c),[f,l]=H.useState(!1),[h,v]=H.useState("");return H.useEffect(()=>{let S=c.current;S&&v((S.textContent??"").trim())},[a.children]),(0,ne.jsx)(xn.ItemSlot,{scope:r,disabled:n,textValue:o??h,children:(0,ne.jsx)(au,{asChild:!0,...i,focusable:!n,children:(0,ne.jsx)(de.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...a,ref:d,onPointerMove:K(e.onPointerMove,Cn(S=>{n?s.onItemLeave(S):(s.onItemEnter(S),S.defaultPrevented||S.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:K(e.onPointerLeave,Cn(S=>s.onItemLeave(S))),onFocus:K(e.onFocus,()=>l(!0)),onBlur:K(e.onBlur,()=>l(!1))})})})}),Hp="MenuCheckboxItem",gu=H.forwardRef((e,t)=>{let{checked:r=!1,onCheckedChange:n,...o}=e;return(0,ne.jsx)(xu,{scope:e.__scopeMenu,checked:r,children:(0,ne.jsx)(Io,{role:"menuitemcheckbox","aria-checked":Do(r)?"mixed":r,...o,ref:t,"data-state":ui(r),onSelect:K(o.onSelect,()=>n?.(Do(r)?!0:!r),{checkForDefaultPrevented:!1})})})});gu.displayName=Hp;var vu="MenuRadioGroup",[$p,Xp]=gr(vu,{value:void 0,onValueChange:()=>{}}),bu=H.forwardRef((e,t)=>{let{value:r,onValueChange:n,...o}=e,a=ft(n);return(0,ne.jsx)($p,{scope:e.__scopeMenu,value:r,onValueChange:a,children:(0,ne.jsx)(si,{...o,ref:t})})});bu.displayName=vu;var yu="MenuRadioItem",wu=H.forwardRef((e,t)=>{let{value:r,...n}=e,o=Xp(yu,e.__scopeMenu),a=r===o.value;return(0,ne.jsx)(xu,{scope:e.__scopeMenu,checked:a,children:(0,ne.jsx)(Io,{role:"menuitemradio","aria-checked":a,...n,ref:t,"data-state":ui(a),onSelect:K(n.onSelect,()=>o.onValueChange?.(r),{checkForDefaultPrevented:!1})})})});wu.displayName=yu;var ci="MenuItemIndicator",[xu,Yp]=gr(ci,{checked:!1}),Cu=H.forwardRef((e,t)=>{let{__scopeMenu:r,forceMount:n,...o}=e,a=Yp(ci,r);return(0,ne.jsx)(Pt,{present:n||Do(a.checked)||a.checked===!0,children:(0,ne.jsx)(de.span,{...o,ref:t,"data-state":ui(a.checked)})})});Cu.displayName=ci;var qp="MenuSeparator",Su=H.forwardRef((e,t)=>{let{__scopeMenu:r,...n}=e;return(0,ne.jsx)(de.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});Su.displayName=qp;var Jp="MenuArrow",Ru=H.forwardRef((e,t)=>{let{__scopeMenu:r,...n}=e,o=Rn(r);return(0,ne.jsx)(jn,{...o,...n,ref:t})});Ru.displayName=Jp;var li="MenuSub",[Zp,Nu]=gr(li),Qp=e=>{let{__scopeMenu:t,children:r,open:n=!1,onOpenChange:o}=e,a=Ht(li,t),s=Rn(t),[i,c]=H.useState(null),[d,f]=H.useState(null),l=ft(o);return H.useEffect(()=>(a.open===!1&&l(!1),()=>l(!1)),[a.open,l]),(0,ne.jsx)(Zr,{...s,children:(0,ne.jsx)(lu,{scope:t,open:n,onOpenChange:l,content:d,onContentChange:f,children:(0,ne.jsx)(Zp,{scope:t,contentId:$e(),triggerId:$e(),trigger:i,onTriggerChange:c,children:r})})})};Qp.displayName=li;var wn="MenuSubTrigger",Mu=H.forwardRef((e,t)=>{let r=Ht(wn,e.__scopeMenu),n=Nn(wn,e.__scopeMenu),o=Nu(wn,e.__scopeMenu),a=ai(wn,e.__scopeMenu),s=H.useRef(null),{pointerGraceTimerRef:i,onPointerGraceIntentChange:c}=a,d={__scopeMenu:e.__scopeMenu},f=H.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return H.useEffect(()=>f,[f]),H.useEffect(()=>{let l=i.current;return()=>{window.clearTimeout(l),c(null)}},[i,c]),(0,ne.jsx)(ni,{asChild:!0,...d,children:(0,ne.jsx)(hu,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":o.contentId,"data-state":Pu(r.open),...e,ref:Dn(t,o.onTriggerChange),onClick:l=>{e.onClick?.(l),!(e.disabled||l.defaultPrevented)&&(l.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:K(e.onPointerMove,Cn(l=>{a.onItemEnter(l),!l.defaultPrevented&&!e.disabled&&!r.open&&!s.current&&(a.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{r.onOpenChange(!0),f()},100))})),onPointerLeave:K(e.onPointerLeave,Cn(l=>{f();let h=r.content?.getBoundingClientRect();if(h){let v=r.content?.dataset.side,S=v==="right",p=S?-5:5,m=h[S?"left":"right"],y=h[S?"right":"left"];a.onPointerGraceIntentChange({area:[{x:l.clientX+p,y:l.clientY},{x:m,y:h.top},{x:y,y:h.top},{x:y,y:h.bottom},{x:m,y:h.bottom}],side:v}),window.clearTimeout(i.current),i.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(l),l.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:K(e.onKeyDown,l=>{let h=a.searchRef.current!=="";e.disabled||h&&l.key===" "||Ap[n.dir].includes(l.key)&&(r.onOpenChange(!0),r.content?.focus(),l.preventDefault())})})})});Mu.displayName=wn;var Du="MenuSubContent",Iu=H.forwardRef((e,t)=>{let r=du(dt,e.__scopeMenu),{forceMount:n=r.forceMount,...o}=e,a=Ht(dt,e.__scopeMenu),s=Nn(dt,e.__scopeMenu),i=Nu(Du,e.__scopeMenu),c=H.useRef(null),d=we(t,c);return(0,ne.jsx)(xn.Provider,{scope:e.__scopeMenu,children:(0,ne.jsx)(Pt,{present:n||a.open,children:(0,ne.jsx)(xn.Slot,{scope:e.__scopeMenu,children:(0,ne.jsx)(ii,{id:i.contentId,"aria-labelledby":i.triggerId,...o,ref:d,align:"start",side:s.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{s.isUsingKeyboardRef.current&&c.current?.focus(),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:K(e.onFocusOutside,f=>{f.target!==i.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:K(e.onEscapeKeyDown,f=>{s.onClose(),f.preventDefault()}),onKeyDown:K(e.onKeyDown,f=>{let l=f.currentTarget.contains(f.target),h=Op[s.dir].includes(f.key);l&&h&&(a.onOpenChange(!1),i.trigger?.focus(),f.preventDefault())})})})})})});Iu.displayName=Du;function Pu(e){return e?"open":"closed"}function Do(e){return e==="indeterminate"}function ui(e){return Do(e)?"indeterminate":e?"checked":"unchecked"}function eh(e){let t=document.activeElement;for(let r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function th(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function rh(e,t,r){let o=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=r?e.indexOf(r):-1,s=th(e,Math.max(a,0));o.length===1&&(s=s.filter(d=>d!==r));let c=s.find(d=>d.toLowerCase().startsWith(o.toLowerCase()));return c!==r?c:void 0}function nh(e,t){let{x:r,y:n}=e,o=!1;for(let a=0,s=t.length-1;a<t.length;s=a++){let i=t[a],c=t[s],d=i.x,f=i.y,l=c.x,h=c.y;f>n!=h>n&&r<(l-d)*(n-f)/(h-f)+d&&(o=!o)}return o}function oh(e,t){if(!t)return!1;let r={x:e.clientX,y:e.clientY};return nh(r,t)}function Cn(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Eu=uu,ku=ni,Tu=fu,Au=mu,Ou=si,_u=pu,Lu=Io,Fu=gu,Bu=bu,zu=wu,ju=Cu,Wu=Su,Uu=Ru;var Vu=Mu,Gu=Iu;var je=U(ve(),1),Po="DropdownMenu",[ih,qy]=et(Po,[ri]),Qe=ri(),[sh,Ku]=ih(Po),Hu=e=>{let{__scopeDropdownMenu:t,children:r,dir:n,open:o,defaultOpen:a,onOpenChange:s,modal:i=!0}=e,c=Qe(t),d=Le.useRef(null),[f,l]=It({prop:o,defaultProp:a??!1,onChange:s,caller:Po});return(0,je.jsx)(sh,{scope:t,triggerId:$e(),triggerRef:d,contentId:$e(),open:f,onOpenChange:l,onOpenToggle:Le.useCallback(()=>l(h=>!h),[l]),modal:i,children:(0,je.jsx)(Eu,{...c,open:f,onOpenChange:l,dir:n,modal:i,children:r})})};Hu.displayName=Po;var $u="DropdownMenuTrigger",Xu=Le.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,disabled:n=!1,...o}=e,a=Ku($u,r),s=Qe(r);return(0,je.jsx)(ku,{asChild:!0,...s,children:(0,je.jsx)(de.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...o,ref:Dn(t,a.triggerRef),onPointerDown:K(e.onPointerDown,i=>{!n&&i.button===0&&i.ctrlKey===!1&&(a.onOpenToggle(),a.open||i.preventDefault())}),onKeyDown:K(e.onKeyDown,i=>{n||(["Enter"," "].includes(i.key)&&a.onOpenToggle(),i.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(i.key)&&i.preventDefault())})})})});Xu.displayName=$u;var ch="DropdownMenuPortal",Yu=e=>{let{__scopeDropdownMenu:t,...r}=e,n=Qe(t);return(0,je.jsx)(Tu,{...n,...r})};Yu.displayName=ch;var qu="DropdownMenuContent",Ju=Le.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,o=Ku(qu,r),a=Qe(r),s=Le.useRef(!1);return(0,je.jsx)(Au,{id:o.contentId,"aria-labelledby":o.triggerId,...a,...n,ref:t,onCloseAutoFocus:K(e.onCloseAutoFocus,i=>{s.current||o.triggerRef.current?.focus(),s.current=!1,i.preventDefault()}),onInteractOutside:K(e.onInteractOutside,i=>{let c=i.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,f=c.button===2||d;(!o.modal||f)&&(s.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Ju.displayName=qu;var lh="DropdownMenuGroup",uh=Le.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,o=Qe(r);return(0,je.jsx)(Ou,{...o,...n,ref:t})});uh.displayName=lh;var dh="DropdownMenuLabel",Zu=Le.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,o=Qe(r);return(0,je.jsx)(_u,{...o,...n,ref:t})});Zu.displayName=dh;var fh="DropdownMenuItem",Qu=Le.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,o=Qe(r);return(0,je.jsx)(Lu,{...o,...n,ref:t})});Qu.displayName=fh;var mh="DropdownMenuCheckboxItem",ed=Le.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,o=Qe(r);return(0,je.jsx)(Fu,{...o,...n,ref:t})});ed.displayName=mh;var ph="DropdownMenuRadioGroup",hh=Le.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,o=Qe(r);return(0,je.jsx)(Bu,{...o,...n,ref:t})});hh.displayName=ph;var gh="DropdownMenuRadioItem",td=Le.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,o=Qe(r);return(0,je.jsx)(zu,{...o,...n,ref:t})});td.displayName=gh;var vh="DropdownMenuItemIndicator",rd=Le.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,o=Qe(r);return(0,je.jsx)(ju,{...o,...n,ref:t})});rd.displayName=vh;var bh="DropdownMenuSeparator",nd=Le.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,o=Qe(r);return(0,je.jsx)(Wu,{...o,...n,ref:t})});nd.displayName=bh;var yh="DropdownMenuArrow",wh=Le.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,o=Qe(r);return(0,je.jsx)(Uu,{...o,...n,ref:t})});wh.displayName=yh;var xh="DropdownMenuSubTrigger",od=Le.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,o=Qe(r);return(0,je.jsx)(Vu,{...o,...n,ref:t})});od.displayName=xh;var Ch="DropdownMenuSubContent",ad=Le.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,o=Qe(r);return(0,je.jsx)(Gu,{...o,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ad.displayName=Ch;var id=Hu,sd=Xu,cd=Yu,di=Ju;var fi=Zu,mi=Qu,pi=ed;var hi=td,gi=rd,vi=nd;var bi=od,yi=ad;var Fe=U(ve(),1),ld=id,ud=sd;var Rh=kt.forwardRef(({className:e,inset:t,children:r,...n},o)=>(0,Fe.jsxs)(bi,{ref:o,className:G("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[r,(0,Fe.jsx)(En,{className:"ml-auto h-4 w-4"})]}));Rh.displayName=bi.displayName;var Nh=kt.forwardRef(({className:e,...t},r)=>(0,Fe.jsx)(yi,{ref:r,className:G("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));Nh.displayName=yi.displayName;var wi=kt.forwardRef(({className:e,sideOffset:t=4,...r},n)=>(0,Fe.jsx)(cd,{children:(0,Fe.jsx)(di,{ref:n,sideOffset:t,className:G("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));wi.displayName=di.displayName;var Eo=kt.forwardRef(({className:e,inset:t,...r},n)=>(0,Fe.jsx)(mi,{ref:n,className:G("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r}));Eo.displayName=mi.displayName;var Mh=kt.forwardRef(({className:e,children:t,checked:r,...n},o)=>(0,Fe.jsxs)(pi,{ref:o,className:G("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[(0,Fe.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,Fe.jsx)(gi,{children:(0,Fe.jsx)(Cr,{className:"h-4 w-4"})})}),t]}));Mh.displayName=pi.displayName;var Dh=kt.forwardRef(({className:e,children:t,...r},n)=>(0,Fe.jsxs)(hi,{ref:n,className:G("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[(0,Fe.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,Fe.jsx)(gi,{children:(0,Fe.jsx)(Sr,{className:"h-2 w-2 fill-current"})})}),t]}));Dh.displayName=hi.displayName;var Ih=kt.forwardRef(({className:e,inset:t,...r},n)=>(0,Fe.jsx)(fi,{ref:n,className:G("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));Ih.displayName=fi.displayName;var xi=kt.forwardRef(({className:e,...t},r)=>(0,Fe.jsx)(vi,{ref:r,className:G("-mx-1 my-1 h-px bg-muted",e),...t}));xi.displayName=vi.displayName;var Ph=({className:e,...t})=>(0,Fe.jsx)("span",{className:G("ml-auto text-xs tracking-widest opacity-60",e),...t});Ph.displayName="DropdownMenuShortcut";var Tt=U(he(),1);var Ci={};(function e(t,r,n,o){var a=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),s=typeof Path2D=="function"&&typeof DOMMatrix=="function",i=function(){if(!t.OffscreenCanvas)return!1;var g=new OffscreenCanvas(1,1),u=g.getContext("2d");u.fillRect(0,0,1,1);var k=g.transferToImageBitmap();try{u.createPattern(k,"no-repeat")}catch{return!1}return!0}();function c(){}function d(g){var u=r.exports.Promise,k=u!==void 0?u:t.Promise;return typeof k=="function"?new k(g):(g(c,c),null)}var f=function(g,u){return{transform:function(k){if(g)return k;if(u.has(k))return u.get(k);var _=new OffscreenCanvas(k.width,k.height),j=_.getContext("2d");return j.drawImage(k,0,0),u.set(k,_),_},clear:function(){u.clear()}}}(i,new Map),l=function(){var g=Math.floor(16.666666666666668),u,k,_={},j=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(u=function(X){var W=Math.random();return _[W]=requestAnimationFrame(function N(B){j===B||j+g-1<B?(j=B,delete _[W],X()):_[W]=requestAnimationFrame(N)}),W},k=function(X){_[X]&&cancelAnimationFrame(_[X])}):(u=function(X){return setTimeout(X,g)},k=function(X){return clearTimeout(X)}),{frame:u,cancel:k}}(),h=function(){var g,u,k={};function _(j){function X(W,N){j.postMessage({options:W||{},callback:N})}j.init=function(N){var B=N.transferControlToOffscreen();j.postMessage({canvas:B},[B])},j.fire=function(N,B,Q){if(u)return X(N,null),u;var L=Math.random().toString(36).slice(2);return u=d(function(q){function Z(me){me.data.callback===L&&(delete k[L],j.removeEventListener("message",Z),u=null,f.clear(),Q(),q())}j.addEventListener("message",Z),X(N,L),k[L]=Z.bind(null,{data:{callback:L}})}),u},j.reset=function(){j.postMessage({reset:!0});for(var N in k)k[N](),delete k[N]}}return function(){if(g)return g;if(!n&&a){var j=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{g=new Worker(URL.createObjectURL(new Blob([j])))}catch(X){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("\u{1F38A} Could not load worker",X),null}_(g)}return g}}(),v={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function S(g,u){return u?u(g):g}function p(g){return g!=null}function m(g,u,k){return S(g&&p(g[u])?g[u]:v[u],k)}function y(g){return g<0?0:Math.floor(g)}function b(g,u){return Math.floor(Math.random()*(u-g))+g}function x(g){return parseInt(g,16)}function I(g){return g.map(w)}function w(g){var u=String(g).replace(/[^0-9a-f]/gi,"");return u.length<6&&(u=u[0]+u[0]+u[1]+u[1]+u[2]+u[2]),{r:x(u.substring(0,2)),g:x(u.substring(2,4)),b:x(u.substring(4,6))}}function E(g){var u=m(g,"origin",Object);return u.x=m(u,"x",Number),u.y=m(u,"y",Number),u}function D(g){g.width=document.documentElement.clientWidth,g.height=document.documentElement.clientHeight}function A(g){var u=g.getBoundingClientRect();g.width=u.width,g.height=u.height}function J(g){var u=document.createElement("canvas");return u.style.position="fixed",u.style.top="0px",u.style.left="0px",u.style.pointerEvents="none",u.style.zIndex=g,u}function oe(g,u,k,_,j,X,W,N,B){g.save(),g.translate(u,k),g.rotate(X),g.scale(_,j),g.arc(0,0,1,W,N,B),g.restore()}function $(g){var u=g.angle*(Math.PI/180),k=g.spread*(Math.PI/180);return{x:g.x,y:g.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:g.startVelocity*.5+Math.random()*g.startVelocity,angle2D:-u+(.5*k-Math.random()*k),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:g.color,shape:g.shape,tick:0,totalTicks:g.ticks,decay:g.decay,drift:g.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:g.gravity*3,ovalScalar:.6,scalar:g.scalar,flat:g.flat}}function le(g,u){u.x+=Math.cos(u.angle2D)*u.velocity+u.drift,u.y+=Math.sin(u.angle2D)*u.velocity+u.gravity,u.velocity*=u.decay,u.flat?(u.wobble=0,u.wobbleX=u.x+10*u.scalar,u.wobbleY=u.y+10*u.scalar,u.tiltSin=0,u.tiltCos=0,u.random=1):(u.wobble+=u.wobbleSpeed,u.wobbleX=u.x+10*u.scalar*Math.cos(u.wobble),u.wobbleY=u.y+10*u.scalar*Math.sin(u.wobble),u.tiltAngle+=.1,u.tiltSin=Math.sin(u.tiltAngle),u.tiltCos=Math.cos(u.tiltAngle),u.random=Math.random()+2);var k=u.tick++/u.totalTicks,_=u.x+u.random*u.tiltCos,j=u.y+u.random*u.tiltSin,X=u.wobbleX+u.random*u.tiltCos,W=u.wobbleY+u.random*u.tiltSin;if(g.fillStyle="rgba("+u.color.r+", "+u.color.g+", "+u.color.b+", "+(1-k)+")",g.beginPath(),s&&u.shape.type==="path"&&typeof u.shape.path=="string"&&Array.isArray(u.shape.matrix))g.fill(T(u.shape.path,u.shape.matrix,u.x,u.y,Math.abs(X-_)*.1,Math.abs(W-j)*.1,Math.PI/10*u.wobble));else if(u.shape.type==="bitmap"){var N=Math.PI/10*u.wobble,B=Math.abs(X-_)*.1,Q=Math.abs(W-j)*.1,L=u.shape.bitmap.width*u.scalar,q=u.shape.bitmap.height*u.scalar,Z=new DOMMatrix([Math.cos(N)*B,Math.sin(N)*B,-Math.sin(N)*Q,Math.cos(N)*Q,u.x,u.y]);Z.multiplySelf(new DOMMatrix(u.shape.matrix));var me=g.createPattern(f.transform(u.shape.bitmap),"no-repeat");me.setTransform(Z),g.globalAlpha=1-k,g.fillStyle=me,g.fillRect(u.x-L/2,u.y-q/2,L,q),g.globalAlpha=1}else if(u.shape==="circle")g.ellipse?g.ellipse(u.x,u.y,Math.abs(X-_)*u.ovalScalar,Math.abs(W-j)*u.ovalScalar,Math.PI/10*u.wobble,0,2*Math.PI):oe(g,u.x,u.y,Math.abs(X-_)*u.ovalScalar,Math.abs(W-j)*u.ovalScalar,Math.PI/10*u.wobble,0,2*Math.PI);else if(u.shape==="star")for(var Y=Math.PI/2*3,Ce=4*u.scalar,Ne=8*u.scalar,ke=u.x,We=u.y,nt=5,De=Math.PI/nt;nt--;)ke=u.x+Math.cos(Y)*Ne,We=u.y+Math.sin(Y)*Ne,g.lineTo(ke,We),Y+=De,ke=u.x+Math.cos(Y)*Ce,We=u.y+Math.sin(Y)*Ce,g.lineTo(ke,We),Y+=De;else g.moveTo(Math.floor(u.x),Math.floor(u.y)),g.lineTo(Math.floor(u.wobbleX),Math.floor(j)),g.lineTo(Math.floor(X),Math.floor(W)),g.lineTo(Math.floor(_),Math.floor(u.wobbleY));return g.closePath(),g.fill(),u.tick<u.totalTicks}function ae(g,u,k,_,j){var X=u.slice(),W=g.getContext("2d"),N,B,Q=d(function(L){function q(){N=B=null,W.clearRect(0,0,_.width,_.height),f.clear(),j(),L()}function Z(){n&&!(_.width===o.width&&_.height===o.height)&&(_.width=g.width=o.width,_.height=g.height=o.height),!_.width&&!_.height&&(k(g),_.width=g.width,_.height=g.height),W.clearRect(0,0,_.width,_.height),X=X.filter(function(me){return le(W,me)}),X.length?N=l.frame(Z):q()}N=l.frame(Z),B=q});return{addFettis:function(L){return X=X.concat(L),Q},canvas:g,promise:Q,reset:function(){N&&l.cancel(N),B&&B()}}}function ue(g,u){var k=!g,_=!!m(u||{},"resize"),j=!1,X=m(u,"disableForReducedMotion",Boolean),W=a&&!!m(u||{},"useWorker"),N=W?h():null,B=k?D:A,Q=g&&N?!!g.__confetti_initialized:!1,L=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,q;function Z(Y,Ce,Ne){for(var ke=m(Y,"particleCount",y),We=m(Y,"angle",Number),nt=m(Y,"spread",Number),De=m(Y,"startVelocity",Number),At=m(Y,"decay",Number),st=m(Y,"gravity",Number),br=m(Y,"drift",Number),$t=m(Y,"colors",I),yr=m(Y,"ticks",Number),Xt=m(Y,"shapes"),gt=m(Y,"scalar"),vt=!!m(Y,"flat"),bt=E(Y),Ot=ke,ot=[],M=g.width*bt.x,re=g.height*bt.y;Ot--;)ot.push($({x:M,y:re,angle:We,spread:nt,startVelocity:De,color:$t[Ot%$t.length],shape:Xt[b(0,Xt.length)],ticks:yr,decay:At,gravity:st,drift:br,scalar:gt,flat:vt}));return q?q.addFettis(ot):(q=ae(g,ot,B,Ce,Ne),q.promise)}function me(Y){var Ce=X||m(Y,"disableForReducedMotion",Boolean),Ne=m(Y,"zIndex",Number);if(Ce&&L)return d(function(De){De()});k&&q?g=q.canvas:k&&!g&&(g=J(Ne),document.body.appendChild(g)),_&&!Q&&B(g);var ke={width:g.width,height:g.height};N&&!Q&&N.init(g),Q=!0,N&&(g.__confetti_initialized=!0);function We(){if(N){var De={getBoundingClientRect:function(){if(!k)return g.getBoundingClientRect()}};B(De),N.postMessage({resize:{width:De.width,height:De.height}});return}ke.width=ke.height=null}function nt(){q=null,_&&(j=!1,t.removeEventListener("resize",We)),k&&g&&(document.body.contains(g)&&document.body.removeChild(g),g=null,Q=!1)}return _&&!j&&(j=!0,t.addEventListener("resize",We,!1)),N?N.fire(Y,ke,nt):Z(Y,ke,nt)}return me.reset=function(){N&&N.reset(),q&&q.reset()},me}var ge;function ie(){return ge||(ge=ue(null,{useWorker:!0,resize:!0})),ge}function T(g,u,k,_,j,X,W){var N=new Path2D(g),B=new Path2D;B.addPath(N,new DOMMatrix(u));var Q=new Path2D;return Q.addPath(B,new DOMMatrix([Math.cos(W)*j,Math.sin(W)*j,-Math.sin(W)*X,Math.cos(W)*X,k,_])),Q}function ee(g){if(!s)throw new Error("path confetti are not supported in this browser");var u,k;typeof g=="string"?u=g:(u=g.path,k=g.matrix);var _=new Path2D(u),j=document.createElement("canvas"),X=j.getContext("2d");if(!k){for(var W=1e3,N=W,B=W,Q=0,L=0,q,Z,me=0;me<W;me+=2)for(var Y=0;Y<W;Y+=2)X.isPointInPath(_,me,Y,"nonzero")&&(N=Math.min(N,me),B=Math.min(B,Y),Q=Math.max(Q,me),L=Math.max(L,Y));q=Q-N,Z=L-B;var Ce=10,Ne=Math.min(Ce/q,Ce/Z);k=[Ne,0,0,Ne,-Math.round(q/2+N)*Ne,-Math.round(Z/2+B)*Ne]}return{type:"path",path:u,matrix:k}}function O(g){var u,k=1,_="#000000",j='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof g=="string"?u=g:(u=g.text,k="scalar"in g?g.scalar:k,j="fontFamily"in g?g.fontFamily:j,_="color"in g?g.color:_);var X=10*k,W=""+X+"px "+j,N=new OffscreenCanvas(X,X),B=N.getContext("2d");B.font=W;var Q=B.measureText(u),L=Math.ceil(Q.actualBoundingBoxRight+Q.actualBoundingBoxLeft),q=Math.ceil(Q.actualBoundingBoxAscent+Q.actualBoundingBoxDescent),Z=2,me=Q.actualBoundingBoxLeft+Z,Y=Q.actualBoundingBoxAscent+Z;L+=Z+Z,q+=Z+Z,N=new OffscreenCanvas(L,q),B=N.getContext("2d"),B.font=W,B.fillStyle=_,B.fillText(u,me,Y);var Ce=1/k;return{type:"bitmap",bitmap:N.transferToImageBitmap(),matrix:[Ce,0,0,Ce,-L*Ce/2,-q*Ce/2]}}r.exports=function(){return ie().apply(this,arguments)},r.exports.reset=function(){ie().reset()},r.exports.create=ue,r.exports.shapeFromPath=ee,r.exports.shapeFromText=O})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Ci,!1);var Mn=Ci.exports,nw=Ci.exports.create;var dd=["#143197","#EB5857","#1FBB65","#FFB366","#57C7EB","#8b5cf6","#f59e0b"],fd="krushr-celebrations-enabled",ko=()=>localStorage.getItem(fd)!=="false",Eh=e=>{localStorage.setItem(fd,String(e))};function To(){let e=(0,Tt.useRef)(!1),t=(0,Tt.useRef)(0),r=(0,Tt.useRef)(null);(0,Tt.useEffect)(()=>{let a=()=>{let s=new(window.AudioContext||window.webkitAudioContext),i=s.createOscillator(),c=s.createGain();i.connect(c),c.connect(s.destination),i.frequency.value=800,i.type="sine",c.gain.setValueAtTime(0,s.currentTime),c.gain.linearRampToValueAtTime(.3,s.currentTime+.01),c.gain.exponentialRampToValueAtTime(.01,s.currentTime+.3),i.start(s.currentTime),i.stop(s.currentTime+.3)};return r.current={play:()=>{try{ko()&&a()}catch(s){console.debug("Audio playback failed:",s)}}},()=>{r.current=null}},[]);let n=(0,Tt.useCallback)((a={})=>{if(!ko())return;let s=Date.now();if(s-t.current<500||(t.current=s,a.disableForBulk))return;let{duration:i=3e3,particleCount:c=100,spread:d=70,origin:f={x:.5,y:.5},colors:l=dd}=a;r.current?.play();let h=Date.now()+i,v=()=>{Mn({particleCount:2,angle:60,spread:55,origin:{x:0,y:.8},colors:l}),Mn({particleCount:2,angle:120,spread:55,origin:{x:1,y:.8},colors:l}),Date.now()<h&&requestAnimationFrame(v)};Mn({particleCount:c,spread:d,origin:f,colors:l,startVelocity:30,gravity:1.2,scalar:1.2,drift:0}),v(),e.current||(e.current=!0,setTimeout(()=>{ct.success("\u{1F389} Task completed!",{description:"You can disable celebrations in settings",duration:5e3})},1e3))},[]),o=(0,Tt.useCallback)((a={})=>{if(!ko())return;let{origin:s={x:.5,y:.6},colors:i=dd}=a;Mn({particleCount:30,spread:40,origin:s,colors:i,startVelocity:20,gravity:1.5,scalar:.8,drift:0})},[]);return{triggerConfetti:n,triggerSubtleConfetti:o,isCelebrationEnabled:ko,setCelebrationEnabled:Eh}}var V=U(ve(),1);function kh({item:e,onToggle:t,onUpdate:r,onDelete:n,isDragging:o}){let[a,s]=(0,rt.useState)(!1),[i,c]=(0,rt.useState)(e.text),d=(0,rt.useRef)(null),{attributes:f,listeners:l,setNodeRef:h,transform:v,transition:S}=Or({id:e.id}),p={transform:Ze.Transform.toString(v),transition:S};(0,rt.useEffect)(()=>{a&&d.current&&(d.current.focus(),d.current.select())},[a]);let m=()=>{i.trim()&&i!==e.text?r(e.id,i.trim()):c(e.text),s(!1)},y=b=>{b.key==="Enter"?(b.preventDefault(),m()):b.key==="Escape"&&(c(e.text),s(!1))};return(0,V.jsxs)("div",{ref:h,style:p,className:G("group flex items-center gap-2 p-2 rounded-md transition-all","hover:bg-krushr-gray-bg",o&&"opacity-50",e.completed&&"opacity-60"),children:[(0,V.jsx)("div",{...f,...l,className:"opacity-0 group-hover:opacity-100 cursor-grab active:cursor-grabbing p-1 -ml-1",children:(0,V.jsx)(On,{className:"w-3 h-3 text-krushr-gray"})}),(0,V.jsx)("button",{onClick:()=>t(e.id),className:G("flex-shrink-0 w-5 h-5 rounded border-2 transition-all","flex items-center justify-center",e.completed?"bg-krushr-success border-krushr-success":"border-krushr-gray-border hover:border-krushr-primary"),children:e.completed&&(0,V.jsx)(Cr,{className:"w-3 h-3 text-white"})}),a?(0,V.jsx)("input",{ref:d,type:"text",value:i,onChange:b=>c(b.target.value),onBlur:m,onKeyDown:y,className:G("flex-1 px-2 py-1 text-sm bg-white border border-krushr-primary","rounded focus:outline-none focus:ring-2 focus:ring-krushr-primary")}):(0,V.jsx)("div",{onClick:()=>s(!0),className:G("flex-1 text-sm cursor-text px-2 py-1 rounded","hover:bg-white hover:shadow-sm transition-all",e.completed&&"line-through text-krushr-gray"),children:e.text}),(0,V.jsxs)("div",{className:"opacity-0 group-hover:opacity-100 flex items-center gap-1",children:[(0,V.jsx)(be,{variant:"ghost",size:"sm",onClick:()=>s(!0),className:"h-6 w-6 p-0",children:(0,V.jsx)(Fo,{className:"w-3 h-3"})}),(0,V.jsx)(be,{variant:"ghost",size:"sm",onClick:()=>n(e.id),className:"h-6 w-6 p-0 hover:text-krushr-secondary",children:(0,V.jsx)(Fn,{className:"w-3 h-3"})})]})]})}function Si({taskId:e,workspaceId:t,onUpdate:r,className:n}){let{triggerSubtleConfetti:o}=To(),[a,s]=(0,rt.useState)(""),[i,c]=(0,rt.useState)({}),[d,f]=(0,rt.useState)(new Set),[l,h]=(0,rt.useState)(!1),v=(0,rt.useRef)(null),S=pe.useContext(),{data:p,refetch:m}=pe.task.get.useQuery({id:e},{enabled:!!e,select:T=>({checklists:T?.checklists||[]})}),y=p?.checklists||[],b=pe.checklist.create.useMutation({onSuccess:()=>{s(""),h(!1),m(),r?.(),ct.success("Checklist created")},onError:T=>{ct.error(T.message)}}),x=pe.checklist.update.useMutation({onSuccess:()=>{m(),r?.()}}),I=pe.checklist.delete.useMutation({onSuccess:()=>{m(),r?.(),ct.success("Checklist deleted")}}),w=pe.checklist.addItem.useMutation({onSuccess:(T,ee)=>{c(O=>({...O,[ee.checklistId]:""})),m(),r?.()}}),E=pe.checklist.updateItem.useMutation({onSuccess:()=>{m(),r?.()}}),D=pe.checklist.deleteItem.useMutation({onSuccess:()=>{m(),r?.()}}),A=Xn(un(zt),un(Ar,{coordinateGetter:Js})),J=()=>{a.trim()&&b.mutate({taskId:e,title:a.trim()})},oe=T=>{let ee=i[T]?.trim();ee&&w.mutate({checklistId:T,text:ee})},$=(T,ee)=>{E.mutate({id:T,completed:!ee})},le=(T,ee)=>{E.mutate({id:T,text:ee})},ae=T=>{D.mutate({id:T})},ue=(T,ee)=>{let{active:O,over:g}=T;if(O.id!==g?.id){let u=ee.findIndex(_=>_.id===O.id),k=ee.findIndex(_=>_.id===g?.id);u!==-1&&k!==-1&&oo(ee,u,k).forEach((j,X)=>{j.position!==X&&E.mutate({id:j.id,position:X})})}},ge=T=>{f(ee=>{let O=new Set(ee);return O.has(T)?O.delete(T):O.add(T),O})},ie=T=>{if(T.length===0)return 0;let ee=T.filter(O=>O.completed).length;return Math.round(ee/T.length*100)};return(0,rt.useEffect)(()=>{l&&v.current&&v.current.focus()},[l]),(0,rt.useEffect)(()=>{y.length===1&&d.size===0&&f(new Set([y[0].id]))},[y]),(0,V.jsxs)("div",{className:G("space-y-4",n),children:[(0,V.jsxs)("div",{className:"flex items-center justify-between",children:[(0,V.jsxs)("div",{className:"flex items-center gap-2",children:[(0,V.jsx)(Tn,{className:"w-5 h-5 text-krushr-gray-dark"}),(0,V.jsx)("h3",{className:"text-base font-medium text-krushr-gray-dark",children:"Checklists"}),y.length>0&&(0,V.jsxs)(Oe,{variant:"secondary",className:"text-xs",children:[y.reduce((T,ee)=>T+ee.items.filter(O=>O.completed).length,0),"/",y.reduce((T,ee)=>T+ee.items.length,0)]})]}),(0,V.jsxs)(be,{variant:"ghost",size:"sm",onClick:()=>h(!0),className:"text-krushr-primary hover:text-krushr-primary hover:bg-krushr-primary/10",children:[(0,V.jsx)(Nt,{className:"w-4 h-4 mr-1"}),"Add Checklist"]})]}),l&&(0,V.jsxs)("div",{className:"p-3 bg-krushr-gray-bg-light rounded-lg border border-krushr-gray-border",children:[(0,V.jsx)(Et,{ref:v,label:"Checklist title",value:a,onChange:T=>s(T.target.value),onKeyDown:T=>{T.key==="Enter"?(T.preventDefault(),J()):T.key==="Escape"&&(h(!1),s(""))},className:"mb-3"}),(0,V.jsxs)("div",{className:"flex gap-2",children:[(0,V.jsx)(be,{size:"sm",onClick:J,disabled:!a.trim()||b.isLoading,className:"bg-krushr-primary hover:bg-krushr-primary/90",children:b.isLoading?(0,V.jsx)(Fi,{className:"w-4 h-4 animate-spin"}):"Create"}),(0,V.jsx)(be,{size:"sm",variant:"ghost",onClick:()=>{h(!1),s("")},children:"Cancel"})]})]}),(0,V.jsx)("div",{className:"space-y-3",children:y.map(T=>{let ee=d.has(T.id),O=ie(T.items);return(0,V.jsxs)("div",{className:G("bg-white rounded-lg border transition-all",ee?"border-krushr-gray-border shadow-sm":"border-krushr-gray-border"),children:[(0,V.jsxs)("div",{className:"px-4 py-3 flex items-center gap-3",children:[(0,V.jsx)("button",{onClick:()=>ge(T.id),className:"flex-shrink-0 p-0.5 hover:bg-krushr-gray-bg rounded transition-colors",children:ee?(0,V.jsx)(qr,{className:"w-4 h-4 text-krushr-gray"}):(0,V.jsx)(En,{className:"w-4 h-4 text-krushr-gray"})}),(0,V.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,V.jsx)("h4",{className:"font-medium text-sm text-krushr-gray-dark truncate",children:T.title}),(0,V.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[(0,V.jsx)(Ja,{value:O,className:"h-1.5 flex-1 max-w-[120px]"}),(0,V.jsxs)("span",{className:"text-xs text-krushr-gray",children:[T.items.filter(g=>g.completed).length,"/",T.items.length," completed"]})]})]}),(0,V.jsxs)(ld,{children:[(0,V.jsx)(ud,{asChild:!0,children:(0,V.jsx)(be,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:(0,V.jsx)(ki,{className:"w-4 h-4"})})}),(0,V.jsxs)(wi,{align:"end",children:[(0,V.jsxs)(Eo,{onClick:()=>{let g=prompt("Rename checklist:",T.title);g&&g!==T.title&&x.mutate({id:T.id,title:g})},children:[(0,V.jsx)(Fo,{className:"w-4 h-4 mr-2"}),"Rename"]}),(0,V.jsx)(xi,{}),(0,V.jsxs)(Eo,{onClick:()=>{confirm("Delete this checklist? This action cannot be undone.")&&I.mutate({id:T.id})},className:"text-krushr-secondary",children:[(0,V.jsx)(Mt,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]}),ee&&(0,V.jsxs)("div",{className:"px-4 pb-3",children:[(0,V.jsx)(Zn,{sensors:A,collisionDetection:Ds,onDragEnd:g=>ue(g,T.items),children:(0,V.jsx)(ao,{items:T.items.map(g=>g.id),strategy:$s,children:(0,V.jsx)("div",{className:"space-y-1",children:T.items.map(g=>(0,V.jsx)(kh,{item:g,onToggle:u=>$(u,g.completed),onUpdate:le,onDelete:ae},g.id))})})}),(0,V.jsxs)("div",{className:"mt-3 flex gap-2",children:[(0,V.jsx)(Et,{label:"Add item",value:i[T.id]||"",onChange:g=>c(u=>({...u,[T.id]:g.target.value})),onKeyDown:g=>{g.key==="Enter"&&(g.preventDefault(),oe(T.id))},className:"flex-1"}),(0,V.jsx)(be,{size:"sm",variant:"ghost",onClick:()=>oe(T.id),disabled:!i[T.id]?.trim()||w.isLoading,className:"text-krushr-primary hover:text-krushr-primary",children:(0,V.jsx)(Nt,{className:"w-4 h-4"})})]})]})]},T.id)})}),y.length===0&&!l&&(0,V.jsxs)("div",{className:"text-center py-8 text-krushr-gray",children:[(0,V.jsx)(Sr,{className:"w-12 h-12 mx-auto mb-3 text-krushr-gray-light"}),(0,V.jsx)("p",{className:"text-sm",children:"No checklists yet"}),(0,V.jsx)("p",{className:"text-xs mt-1",children:"Create a checklist to track subtasks"})]})]})}var R=U(ve(),1);function Ri({taskId:e,open:t,onClose:r,onUpdate:n}){let[o,a]=(0,vr.useState)(""),[s,i]=(0,vr.useState)(!1),[c,d]=(0,vr.useState)(!1),[f,l]=(0,vr.useState)(""),[h,v]=(0,vr.useState)(""),[S,p]=(0,vr.useState)(!1),{data:m,refetch:y}=pe.task.get.useQuery({id:e},{enabled:!!e,onSuccess:u=>{u&&(l(u.title||""),v(u.description||""))}}),{data:b=[],refetch:x}=pe.comment.list.useQuery({taskId:e},{enabled:!!e}),{data:I=[]}=pe.upload.getTaskAttachments.useQuery({taskId:e},{enabled:!!e}),{data:w=[]}=pe.activity.list.useQuery({taskId:e},{enabled:!!e}),E=pe.comment.create.useMutation({onSuccess:()=>{a(""),x(),y()},onError:u=>{console.error("Failed to add comment:",u)}}),D=pe.task.update.useMutation({onSuccess:()=>{y(),n?.(),i(!1),d(!1)}}),A=pe.task.delete.useMutation({onSuccess:()=>{r(),n?.()}}),J=pe.checklist.addItem.useMutation({onSuccess:()=>{y(),setNewChecklistItem("")}}),oe=pe.checklist.updateItem.useMutation({onSuccess:()=>{y()}}),$=pe.checklist.deleteItem.useMutation({onSuccess:()=>{y()}}),{refetch:le}=pe.upload.getTaskAttachments.useQuery({taskId:e},{enabled:!!e});if(!m)return null;let ae=()=>{o.trim()&&E.mutate({taskId:e,content:o})},ue=u=>{D.mutate({id:e,status:u})},ge=u=>{D.mutate({id:e,priority:u})},ie=()=>{f.trim()&&f!==m?.title?D.mutate({id:e,title:f.trim()}):(i(!1),l(m?.title||""))},T=()=>{h!==m?.description?D.mutate({id:e,description:h}):(d(!1),v(m?.description||""))},ee=u=>({low:"text-green-500 bg-green-50 border-green-200",medium:"text-orange-500 bg-orange-50 border-orange-200",high:"text-red-500 bg-red-50 border-red-200"})[u],O=u=>{switch(u){case"DONE":return(0,R.jsx)(Tn,{className:"w-4 h-4 text-green-500"});case"IN_PROGRESS":return(0,R.jsx)(kn,{className:"w-4 h-4 text-blue-500"});default:return(0,R.jsx)(Sr,{className:"w-4 h-4 text-gray-400"})}},g=u=>u.startsWith("image/")?(0,R.jsx)(Li,{className:"w-4 h-4"}):(0,R.jsx)(An,{className:"w-4 h-4"});return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(el,{open:t,onOpenChange:r,children:(0,R.jsxs)(Ma,{className:"w-full sm:max-w-2xl overflow-y-auto shadow-krushr-modal",hideOverlay:!0,children:[(0,R.jsx)(Da,{className:"space-y-0 pb-6 border-b border-krushr-panel-border",children:(0,R.jsxs)("div",{className:"flex items-center justify-between",children:[s?(0,R.jsx)(Et,{label:"Task title",value:f,onChange:u=>l(u.target.value),onBlur:ie,onKeyDown:u=>{u.key==="Enter"&&(u.preventDefault(),ie()),u.key==="Escape"&&(i(!1),l(m?.title||""))},className:"text-xl font-semibold border-none shadow-none px-0 focus-visible:ring-0",autoFocus:!0}):(0,R.jsx)(Ia,{className:"text-xl font-semibold text-krushr-gray-dark cursor-pointer hover:bg-krushr-gray-50 px-2 py-1 rounded-md transition-colors font-brand",onClick:()=>{l(m?.title||""),i(!0)},children:m.title}),(0,R.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,R.jsx)(be,{variant:"outline",size:"sm",onClick:()=>p(!0),className:"text-krushr-primary border-krushr-primary hover:bg-krushr-primary hover:text-white",children:"Edit Task"}),(0,R.jsx)(be,{variant:"ghost",size:"sm",onClick:()=>{confirm("Are you sure you want to delete this task?")&&A.mutate({id:e})},children:(0,R.jsx)(Mt,{className:"w-4 h-4"})})]})]})}),(0,R.jsxs)("div",{className:"mt-6 space-y-6 font-brand",children:[(0,R.jsxs)("div",{className:"flex items-center justify-between bg-krushr-gray-50 p-4 rounded-lg border border-krushr-panel-border",children:[(0,R.jsx)("div",{className:"flex gap-1",children:["TODO","IN_PROGRESS","REVIEW","DONE"].map(u=>{let k={TODO:"To Do",IN_PROGRESS:"In Progress",REVIEW:"Review",DONE:"Done"},_={TODO:m.status===u?"bg-krushr-task-todo/10 text-krushr-task-todo border-krushr-task-todo/30":"bg-white text-krushr-gray border-krushr-panel-border hover:bg-krushr-gray-50",IN_PROGRESS:m.status===u?"bg-krushr-task-progress/10 text-krushr-task-progress border-krushr-task-progress/30":"bg-white text-krushr-gray border-krushr-panel-border hover:bg-krushr-gray-50",REVIEW:m.status===u?"bg-krushr-task-review/10 text-krushr-task-review border-krushr-task-review/30":"bg-white text-krushr-gray border-krushr-panel-border hover:bg-krushr-gray-50",DONE:m.status===u?"bg-krushr-task-done/10 text-krushr-task-done border-krushr-task-done/30":"bg-white text-krushr-gray border-krushr-panel-border hover:bg-krushr-gray-50"};return(0,R.jsx)("button",{onClick:()=>ue(u),className:G("px-3 py-1.5 text-xs font-medium rounded-md border transition-all duration-200 shadow-sm",_[u]),children:k[u]},u)})}),(0,R.jsxs)("div",{className:"flex items-center gap-2",children:[(0,R.jsx)("span",{className:"text-xs font-medium text-krushr-gray-dark mr-1",children:"Priority:"}),(0,R.jsx)("div",{className:"flex gap-0.5",children:[1,2,3].map(u=>{let k=m.priority==="low"&&u<=1||m.priority==="medium"&&u<=2||m.priority==="high"&&u<=3,_=u===1?"low":u===2?"medium":"high";return(0,R.jsx)("button",{onClick:()=>ge(_),className:G("w-2.5 h-2.5 rounded-full transition-all duration-200 shadow-sm",k?"bg-krushr-priority-high":"bg-krushr-gray-300 hover:bg-krushr-priority-high/50"),title:`${u===1?"Low":u===2?"Medium":"High"} Priority`},u)})})]})]}),(0,R.jsxs)("div",{className:"flex-1 bg-white rounded-lg border border-krushr-panel-border p-4",children:[(0,R.jsx)("label",{className:"text-sm font-medium text-krushr-gray-dark block mb-3",children:"Description & Notes"}),c?(0,R.jsx)(Wo,{content:h,onChange:v,onBlur:T,placeholder:"Add a description with rich formatting...",className:"min-h-[120px]"}):(0,R.jsx)("div",{onClick:()=>{v(m?.description||""),d(!0)},className:"min-h-[120px] p-3 text-sm border border-krushr-panel-border rounded-md cursor-pointer hover:bg-krushr-gray-50 prose prose-sm max-w-none transition-colors",dangerouslySetInnerHTML:{__html:m.description||'<span class="text-gray-400 italic">Click to add description...</span>'}})]}),(0,R.jsxs)("div",{className:"flex items-center gap-6 text-sm text-krushr-gray bg-krushr-gray-50 p-4 rounded-lg border border-krushr-panel-border",children:[(0,R.jsxs)("div",{className:"flex items-center gap-2",children:[(0,R.jsx)(Jr,{className:"w-4 h-4"}),(0,R.jsxs)(Bl,{value:m.assigneeId||"unassigned",onValueChange:u=>{D.mutate({id:e,assigneeId:u==="unassigned"?null:u})},children:[(0,R.jsx)(Va,{className:"w-auto border-none shadow-none p-0 h-auto text-sm hover:text-krushr-gray-dark focus:ring-0 transition-colors",children:(0,R.jsx)(zl,{placeholder:"Unassigned",children:m.assignee?(0,R.jsxs)("div",{className:"flex items-center gap-2",children:[(0,R.jsxs)(qt,{className:"w-5 h-5",children:[(0,R.jsx)(Wn,{src:m.assignee.avatar}),(0,R.jsx)(Jt,{className:"text-xs",children:m.assignee.name?.charAt(0)})]}),(0,R.jsx)("span",{className:"truncate",children:m.assignee.name})]}):(0,R.jsx)("span",{className:"text-krushr-gray-light",children:"Unassigned"})})}),(0,R.jsxs)(Ga,{children:[(0,R.jsx)(Gr,{value:"unassigned",children:(0,R.jsxs)("div",{className:"flex items-center gap-2",children:[(0,R.jsx)(Jr,{className:"w-4 h-4 text-gray-500"}),(0,R.jsx)("span",{children:"Unassigned"})]})}),(0,R.jsx)(Gr,{value:"user1",children:(0,R.jsxs)("div",{className:"flex items-center gap-2",children:[(0,R.jsx)(qt,{className:"w-4 h-4",children:(0,R.jsx)(Jt,{className:"text-xs",children:"JD"})}),(0,R.jsx)("span",{children:"John Doe"})]})}),(0,R.jsx)(Gr,{value:"user2",children:(0,R.jsxs)("div",{className:"flex items-center gap-2",children:[(0,R.jsx)(qt,{className:"w-4 h-4",children:(0,R.jsx)(Jt,{className:"text-xs",children:"JS"})}),(0,R.jsx)("span",{children:"Jane Smith"})]})}),(0,R.jsx)(Gr,{value:"user3",children:(0,R.jsxs)("div",{className:"flex items-center gap-2",children:[(0,R.jsx)(qt,{className:"w-4 h-4",children:(0,R.jsx)(Jt,{className:"text-xs",children:"MJ"})}),(0,R.jsx)("span",{children:"Mike Johnson"})]})})]})]})]}),(0,R.jsxs)("div",{className:"flex items-center gap-1",children:[(0,R.jsx)(Pn,{className:"w-4 h-4"}),(0,R.jsx)("input",{type:"date",value:m.dueDate?Zi(new Date(m.dueDate),"yyyy-MM-dd"):"",onChange:u=>{D.mutate({id:e,dueDate:u.target.value?new Date(u.target.value).toISOString():null})},className:"bg-transparent border-none text-sm cursor-pointer hover:text-krushr-gray-dark w-20 transition-colors",placeholder:"No date"})]}),(0,R.jsxs)("div",{className:"flex items-center gap-1 text-krushr-gray-light",children:[(0,R.jsx)(Rr,{className:"w-4 h-4"}),(0,R.jsxs)("span",{children:[io(new Date(m.createdAt))," ago"]})]})]}),m.tags&&m.tags.length>0&&(0,R.jsx)("div",{className:"flex flex-wrap gap-2",children:m.tags.map(u=>(0,R.jsx)(Oe,{variant:"secondary",children:typeof u=="string"?u:u.name},u.id||u))}),(0,R.jsx)("div",{className:"bg-white rounded-lg border border-krushr-panel-border p-4",children:(0,R.jsx)(Si,{taskId:e,workspaceId:m.project?.workspaceId||"",onUpdate:()=>{y(),n?.()}})}),(0,R.jsxs)("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto pr-2",children:[(0,R.jsxs)("div",{className:"space-y-4 bg-white rounded-lg border border-krushr-panel-border p-4",children:[(0,R.jsxs)("div",{className:"flex items-center gap-2",children:[(0,R.jsx)(zi,{className:"w-4 h-4 text-blue-600"}),(0,R.jsxs)("h3",{className:"text-sm font-medium text-krushr-gray-dark",children:["Comments (",b.length,")"]})]}),(0,R.jsxs)("div",{className:"space-y-2",children:[(0,R.jsx)(Wo,{content:o,onChange:a,placeholder:E.isLoading?"Posting comment...":"Add a comment...",className:"min-h-[80px]",minimal:!0,editable:!E.isLoading}),(0,R.jsx)("div",{className:"flex justify-end",children:(0,R.jsxs)(be,{size:"sm",onClick:ae,disabled:!o.trim()||E.isLoading,children:[(0,R.jsx)(ji,{className:"w-4 h-4 mr-2"}),E.isLoading?"Posting...":"Post Comment"]})})]}),(0,R.jsxs)("div",{className:"space-y-3 max-h-40 overflow-y-auto",children:[b.map(u=>(0,R.jsx)("div",{className:"border border-krushr-panel-border rounded-lg p-3 bg-krushr-gray-50/50",children:(0,R.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,R.jsx)("div",{className:"w-8 h-8 bg-krushr-primary rounded-full flex items-center justify-center text-white text-xs",children:u.user?.name?.charAt(0)?.toUpperCase()||"U"}),(0,R.jsxs)("div",{className:"flex-1",children:[(0,R.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,R.jsx)("span",{className:"text-sm font-medium text-krushr-gray-dark",children:u.user?.name||"Unknown User"}),(0,R.jsxs)("span",{className:"text-xs text-krushr-gray",children:[io(new Date(u.createdAt))," ago"]})]}),(0,R.jsx)("div",{className:"text-sm text-krushr-gray prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:u.content}}),(0,R.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[(0,R.jsx)("button",{className:"text-xs text-krushr-gray-light hover:text-krushr-primary transition-colors",children:"Reply"}),(0,R.jsx)("button",{className:"text-xs text-krushr-gray-light hover:text-krushr-primary transition-colors",children:"Like"}),(0,R.jsx)("button",{className:"text-xs text-krushr-gray-light hover:text-krushr-primary transition-colors",children:"..."})]})]})]})},u.id)),b.length===0&&(0,R.jsx)("div",{className:"text-center py-4 text-krushr-gray-light text-sm",children:"No comments yet. Be the first to add one!"})]})]}),(0,R.jsxs)("div",{className:"border border-krushr-panel-border rounded-lg bg-white shadow-sm",children:[(0,R.jsx)("div",{className:"p-4 border-b border-krushr-panel-border bg-krushr-gray-50",children:(0,R.jsxs)("div",{className:"flex items-center gap-2",children:[(0,R.jsx)(_n,{className:"w-4 h-4 text-krushr-secondary"}),(0,R.jsxs)("h3",{className:"font-medium text-krushr-gray-dark",children:["Files (",I.length,")"]})]})}),(0,R.jsxs)("div",{className:"p-4 space-y-3",children:[(0,R.jsxs)("div",{className:"border-2 border-dashed border-krushr-panel-border rounded-lg p-4 text-center text-sm text-krushr-gray hover:border-krushr-secondary/50 transition-colors bg-krushr-gray-50",children:[(0,R.jsx)(Vi,{className:"w-5 h-5 mx-auto mb-2 text-krushr-gray-light"}),(0,R.jsx)("span",{className:"font-medium",children:"Drop files here or click to upload"})]}),I.length>0&&(0,R.jsx)("div",{className:"pt-2 border-t border-krushr-panel-border",children:(0,R.jsx)(Gl,{attachments:I,canDelete:!0,onRefresh:()=>{le()}})})]})]})]}),(0,R.jsxs)("div",{className:"border border-krushr-panel-border rounded-lg bg-white shadow-sm",children:[(0,R.jsx)("div",{className:"p-4 border-b border-krushr-panel-border bg-krushr-gray-50",children:(0,R.jsxs)("div",{className:"flex items-center gap-2",children:[(0,R.jsx)(Rr,{className:"w-4 h-4 text-amber-500"}),(0,R.jsx)("h3",{className:"font-medium text-krushr-gray-dark",children:"Activity"})]})}),(0,R.jsx)("div",{className:"p-4 space-y-2",children:w.map(u=>(0,R.jsxs)("div",{className:"flex items-start gap-3",children:[(0,R.jsx)("div",{className:"w-2 h-2 bg-krushr-gray-300 rounded-full mt-2"}),(0,R.jsxs)("div",{className:"flex-1",children:[(0,R.jsxs)("p",{className:"text-sm",children:[(0,R.jsx)("span",{className:"font-medium",children:u.user?.name})," ",u.action]}),(0,R.jsxs)("p",{className:"text-xs text-krushr-gray",children:[io(new Date(u.createdAt))," ago"]})]})]},u.id))})]})]})]})}),(0,R.jsx)(Un,{open:S,onClose:()=>p(!1),task:m,workspaceId:m?.workspaceId||"",onSuccess:()=>{p(!1),y(),n?.()}})]})}var P=U(ve(),1);function Th({kanban:e,className:t}){let{triggerConfetti:r}=To(),[n,o]=(0,Ve.useState)(null),[a,s]=(0,Ve.useState)(""),[i,c]=(0,Ve.useState)(!1),[d,f]=(0,Ve.useState)([]),[l,h]=(0,Ve.useState)([]),[v,S]=(0,Ve.useState)(!1),[p,m]=(0,Ve.useState)(null),[y,b]=(0,Ve.useState)(null),[x,I]=(0,Ve.useState)(!1),[w,E]=(0,Ve.useState)(null),[D,A]=(0,Ve.useState)(""),[J,oe]=(0,Ve.useState)("#6B7280"),[$,le]=(0,Ve.useState)(!1),[ae,ue]=(0,Ve.useState)(new Set),[ge,ie]=(0,Ve.useState)(!1),[T,ee]=(0,Ve.useState)(()=>{let M=localStorage.getItem(`kanban-toolbar-${e.id}`);return M?JSON.parse(M):!1}),{data:O,refetch:g}=pe.kanban.get.useQuery({id:e.id}),u=O?.columns||[],{data:k=[],refetch:_}=pe.task.list.useQuery({workspaceId:e.workspaceId,kanbanId:e.id}),j=pe.task.update.useMutation({onSuccess:()=>{_()}}),X=pe.task.create.useMutation({onSuccess:()=>{_()}}),W=pe.task.delete.useMutation({onSuccess:()=>{_()}}),N=pe.kanban.createColumn.useMutation({onSuccess:()=>{g(),A(""),oe("#6B7280")}}),B=pe.kanban.updateColumn.useMutation({onSuccess:()=>{g(),E(null)}}),Q=pe.kanban.deleteColumn.useMutation({onSuccess:()=>{g()}}),L=pe.kanban.reorderColumns.useMutation({onSuccess:()=>{g()}}),q=u.map(M=>M.id),me=k.filter(M=>M.kanbanColumnId&&q.includes(M.kanbanColumnId)).filter(M=>{let re=!a||M.title.toLowerCase().includes(a.toLowerCase())||M.description?.toLowerCase().includes(a.toLowerCase()),ce=d.length===0||d.includes(M.priority),Ge=l.length===0||M.assigneeId&&l.includes(M.assigneeId);return re&&ce&&Ge}),Y=u.reduce((M,re)=>(M[re.id]=me.filter(ce=>ce.kanbanColumnId===re.id).sort((ce,Ge)=>ce.position-Ge.position),M),{}),Ce=Xn(un(zt,{activationConstraint:{distance:8}})),Ne=M=>{let{active:re}=M;re.data.current?.type==="task"&&o(re.data.current.task)},ke=async M=>{let{active:re,over:ce}=M;if(o(null),!ce)return;let Ge=re.data.current?.type,Yt=ce.data.current?.type;if(Ge==="task"){let Kr=re.data.current?.task;if(!Kr)return;let Hr=u.find(ye=>ye.id===Kr.kanbanColumnId),yt,_t;if(Yt==="column")yt=u.find(ye=>ye.id===ce.id),_t=Y[yt.id]?.length||0;else if(Yt==="task"){let ye=ce.data.current?.task;yt=u.find(Ke=>Ke.id===ye.kanbanColumnId),_t=Y[yt.id].findIndex(Ke=>Ke.id===ye.id)}else return;if(!Hr||!yt)return;let Ct=Y[yt.id],Me;if(Ct.length===0)Me=1;else if(_t===0)Me=Ct[0].position-1;else if(_t>=Ct.length)Me=Ct[Ct.length-1].position+1;else{let ye=Ct[_t-1].position,Ke=Ct[_t].position;Me=(ye+Ke)/2}let qe={kanbanColumnId:yt.id,position:Me};try{await j.mutateAsync({id:Kr.id,...qe});let ye=yt.title?.toLowerCase()||"",Ke=ye.includes("done")||ye.includes("complete")||ye.includes("finished"),He=Hr.title?.toLowerCase()||"",Je=He.includes("done")||He.includes("complete")||He.includes("finished");Ke&&!Je&&!$&&r({origin:{x:.5,y:.6},particleCount:150,spread:80})}catch(ye){console.error("Failed to move task:",ye)}}},We=M=>Y[M]?.length||0,nt=M=>{switch(M?.toLowerCase()){case"high":return"bg-krushr-priority-high/10 text-krushr-priority-high border-krushr-priority-high/20";case"medium":return"bg-krushr-priority-medium/10 text-krushr-priority-medium border-krushr-priority-medium/20";case"low":return"bg-krushr-priority-low/10 text-krushr-priority-low border-krushr-priority-low/20";default:return"bg-gray-100 text-gray-700 border-gray-200"}},De=M=>{let re=new Set(ae);re.has(M)?re.delete(M):re.add(M),ue(re),ie(re.size>0)},At=()=>{let M=new Set(me.map(re=>re.id));ue(M),ie(M.size>0)},st=()=>{ue(new Set),ie(!1),le(!1)},br=M=>{if(ae.size===0)return;Array.from(ae).forEach(ce=>{k.find(Yt=>Yt.id===ce)&&j.mutate({id:ce,kanbanColumnId:M})}),st()},$t=M=>{if(ae.size===0)return;Array.from(ae).forEach(ce=>{j.mutate({id:ce,priority:M})}),st()},yr=async()=>{if(D.trim())try{await N.mutateAsync({kanbanId:e.id,title:D.trim(),color:J})}catch(M){console.error("Failed to create column:",M)}},Xt=async(M,re,ce)=>{try{await B.mutateAsync({id:M,title:re.trim(),color:ce})}catch(Ge){console.error("Failed to update column:",Ge)}},{deleteItem:gt}=ts(),{execute:vt}=rs(),{toast:bt}=es(),Ot=async M=>{let re=u.find(Ge=>Ge.id===M),ce=We(M);if(ce>0){bt({title:"Cannot Delete Column",description:`The column "${re?.title}" contains ${ce} task${ce!==1?"s":""}. Please move or delete the tasks first.`,variant:"destructive"});return}re&&await gt({type:"column",item:re,itemName:re.title,deleteAction:async()=>{await Q.mutateAsync({id:M})},onOptimisticRemove:()=>{},onRestore:()=>{g()}})},ot=async M=>{try{await L.mutateAsync({kanbanId:e.id,columnIds:M})}catch(re){console.error("Failed to reorder columns:",re)}};return(0,P.jsxs)("div",{className:G("flex flex-col h-full bg-gray-50",t),children:[ge&&(0,P.jsx)("div",{className:"mx-2 mt-1 p-2 bg-blue-50 border border-blue-200 rounded-lg",children:(0,P.jsxs)("div",{className:"flex items-center justify-between",children:[(0,P.jsxs)("div",{className:"flex items-center gap-2",children:[(0,P.jsxs)("span",{className:"text-sm font-medium text-blue-900 font-manrope",children:[ae.size," task",ae.size!==1?"s":""," selected"]}),(0,P.jsx)(be,{size:"sm",variant:"outline",onClick:st,className:"h-8 min-h-[32px] text-xs hover:bg-gray-50 focus:bg-gray-50 focus:ring-2 focus:ring-blue-500 transition-all duration-200 font-manrope","aria-label":"Clear task selection",children:"Clear"})]}),(0,P.jsxs)("div",{className:"flex items-center gap-1",children:[(0,P.jsxs)("select",{className:"text-sm border border-gray-300 rounded px-3 py-2 h-10 min-h-[40px] shadow-sm hover:shadow-md transition-shadow focus:shadow-md focus:border-krushr-primary font-manrope",onChange:M=>M.target.value&&br(M.target.value),defaultValue:"","aria-label":"Move selected tasks to column",children:[(0,P.jsx)("option",{value:"",children:"Move to..."}),u.map(M=>(0,P.jsx)("option",{value:M.id,children:M.title},M.id))]}),(0,P.jsxs)("select",{className:"text-sm border border-gray-300 rounded px-3 py-2 h-10 min-h-[40px] shadow-sm hover:shadow-md transition-shadow focus:shadow-md focus:border-krushr-primary font-manrope",onChange:M=>M.target.value&&$t(M.target.value),defaultValue:"","aria-label":"Set priority for selected tasks",children:[(0,P.jsx)("option",{value:"",children:"Set priority..."}),(0,P.jsx)("option",{value:"high",children:"High"}),(0,P.jsx)("option",{value:"medium",children:"Medium"}),(0,P.jsx)("option",{value:"low",children:"Low"})]}),(0,P.jsx)(be,{size:"sm",variant:"destructive",onClick:async()=>{let M=Array.from(ae),re=M.map(ce=>k.find(Ge=>Ge.id===ce)).filter(Boolean);st(),await vt({type:"bulk-tasks",action:async()=>{for(let ce of M)await W.mutateAsync({id:ce})},undoAction:async()=>{for(let ce of re)ce&&await X.mutateAsync({title:ce.title,description:ce.description,status:ce.status,priority:ce.priority,dueDate:ce.dueDate,assignedUserId:ce.assignedUserId,tags:ce.tags,kanbanColumnId:ce.kanbanColumnId,projectId:ce.projectId})},item:re,getMessage:()=>`${M.length} tasks deleted`,getUndoMessage:()=>`${M.length} tasks restored`})},className:"h-10 min-h-[40px] text-sm px-3 hover:bg-red-600 focus:bg-red-600 focus:ring-2 focus:ring-red-500 transition-all duration-200","aria-label":`Delete ${ae.size} selected tasks`,children:"Delete"})]})]})}),(0,P.jsx)("button",{"data-kanban-toolbar-toggle":!0,onClick:()=>{let M=!T;ee(M),localStorage.setItem(`kanban-toolbar-${e.id}`,JSON.stringify(M))},style:{display:"none"},"aria-hidden":"true"}),!T&&(0,P.jsx)("div",{className:"bg-white border-b",children:(0,P.jsxs)("div",{className:"flex items-center justify-between p-2 gap-3",children:[(0,P.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,P.jsx)("button",{onClick:()=>{b(u[0]?.id||null),S(!0)},className:"w-7 h-7 bg-krushr-primary text-white rounded-md flex items-center justify-center hover:bg-krushr-primary/90 transition-colors flex-shrink-0","aria-label":"Create new task",title:"Create new task",children:(0,P.jsx)(Nt,{className:"w-3.5 h-3.5"})}),(0,P.jsx)(Et,{label:"Search tasks",value:a,onChange:M=>s(M.target.value),className:"w-48 h-7 text-sm",type:"search"}),(0,P.jsxs)(be,{size:"sm",variant:"outline",onClick:()=>c(!i),className:"h-7 text-xs px-2 hover:bg-gray-50 focus:bg-gray-50 transition-all duration-200","aria-label":`${i?"Hide":"Show"} task filters`,"aria-expanded":i,children:[(0,P.jsx)(_i,{className:"w-3 h-3 mr-1"}),"Filters"]})]}),(0,P.jsxs)("div",{className:"flex items-center gap-1",children:[(0,P.jsxs)(be,{size:"sm",variant:"outline",onClick:()=>I(!x),className:"h-7 text-xs px-2 hover:bg-gray-50 focus:bg-gray-50 transition-all duration-200","aria-label":`${x?"Hide":"Show"} column management`,"aria-expanded":x,children:[(0,P.jsx)(Ln,{className:"w-3 h-3 mr-1"}),"Columns"]}),(0,P.jsx)(be,{size:"sm",variant:$?"default":"outline",onClick:()=>{le(!$),$&&st()},className:"h-7 text-xs px-2 hover:bg-gray-50 focus:bg-gray-50 transition-all duration-200","aria-label":$?"Exit bulk selection mode":"Enter bulk selection mode","aria-pressed":$,children:$?"Exit Bulk":"Bulk"}),$&&(0,P.jsx)(be,{size:"sm",variant:"outline",onClick:At,className:"h-7 text-xs px-2 hover:bg-gray-50 focus:bg-gray-50 transition-all duration-200","aria-label":"Select all visible tasks",children:"All"})]})]})}),i&&(0,P.jsx)("div",{className:"mx-2 mt-1 p-2 bg-gray-50 rounded border",children:(0,P.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),(0,P.jsx)("div",{className:"flex flex-wrap gap-2",children:["high","medium","low"].map(M=>(0,P.jsx)(Oe,{variant:d.includes(M)?"default":"outline",className:G("cursor-pointer capitalize",d.includes(M)&&nt(M)),onClick:()=>{f(re=>re.includes(M)?re.filter(ce=>ce!==M):[...re,M])},children:M},M))})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assignees"}),(0,P.jsx)("div",{className:"text-sm text-gray-500",children:"Select team members to filter by..."})]})]})}),x&&(0,P.jsxs)("div",{className:"mx-2 mt-1 p-3 bg-white border rounded-lg shadow-sm",children:[(0,P.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,P.jsx)("h3",{className:"font-medium text-gray-900",children:"Manage Columns"}),(0,P.jsx)(be,{size:"sm",variant:"ghost",onClick:()=>I(!1),className:"h-6 w-6 p-0",children:"\xD7"})]}),(0,P.jsx)("div",{className:"mb-4 p-3 bg-gray-50 rounded border",children:(0,P.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,P.jsx)(Et,{label:"Column title",value:D,onChange:M=>A(M.target.value),className:"flex-1 h-8 text-sm",onKeyPress:M=>M.key==="Enter"&&yr()}),(0,P.jsxs)("select",{value:J,onChange:M=>oe(M.target.value),className:"h-8 text-sm border border-gray-300 rounded px-2 shadow-sm hover:shadow-md transition-shadow focus:shadow-md focus:border-krushr-primary",children:[(0,P.jsx)("option",{value:"#6B7280",children:"Gray"}),(0,P.jsx)("option",{value:"#3B82F6",children:"Blue"}),(0,P.jsx)("option",{value:"#10B981",children:"Green"}),(0,P.jsx)("option",{value:"#F59E0B",children:"Yellow"}),(0,P.jsx)("option",{value:"#EF4444",children:"Red"}),(0,P.jsx)("option",{value:"#8B5CF6",children:"Purple"})]}),(0,P.jsx)("button",{onClick:yr,disabled:!D.trim()||N.isLoading,className:"w-8 h-8 bg-krushr-primary text-white rounded-md flex items-center justify-center hover:bg-krushr-primary/90 transition-colors disabled:opacity-50",title:"Add column",children:(0,P.jsx)(Nt,{className:"w-4 h-4"})})]})}),(0,P.jsx)("div",{className:"space-y-2",children:u.map(M=>(0,P.jsxs)("div",{className:"flex items-center gap-2 p-2 border rounded hover:bg-gray-50",children:[(0,P.jsx)(On,{className:"w-4 h-4 text-gray-400 cursor-move"}),(0,P.jsx)("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:M.color}}),w?.id===M.id?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(Et,{label:"Column title",value:w.title,onChange:re=>E({...w,title:re.target.value}),className:"flex-1 h-7 text-sm",onKeyPress:re=>{re.key==="Enter"&&Xt(M.id,w.title,w.color)},autoFocus:!0}),(0,P.jsxs)("select",{value:w.color,onChange:re=>E({...w,color:re.target.value}),className:"h-7 text-sm border border-gray-300 rounded px-1 shadow-sm hover:shadow-md transition-shadow focus:shadow-md focus:border-krushr-primary",children:[(0,P.jsx)("option",{value:"#6B7280",children:"Gray"}),(0,P.jsx)("option",{value:"#3B82F6",children:"Blue"}),(0,P.jsx)("option",{value:"#10B981",children:"Green"}),(0,P.jsx)("option",{value:"#F59E0B",children:"Yellow"}),(0,P.jsx)("option",{value:"#EF4444",children:"Red"}),(0,P.jsx)("option",{value:"#8B5CF6",children:"Purple"})]}),(0,P.jsx)("button",{onClick:()=>Xt(M.id,w.title,w.color),className:"w-8 h-8 bg-krushr-primary text-white rounded-md flex items-center justify-center hover:bg-krushr-primary/90 transition-colors",title:"Save changes",children:(0,P.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,P.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,P.jsx)("button",{onClick:()=>E(null),className:"w-8 h-8 bg-krushr-gray-light text-krushr-gray-dark rounded-md flex items-center justify-center hover:bg-krushr-gray transition-colors",title:"Cancel",children:(0,P.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,P.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("span",{className:"flex-1 text-sm font-medium",children:M.title}),(0,P.jsxs)(Oe,{variant:"outline",className:"text-xs",children:[We(M.id)," tasks"]}),(0,P.jsx)("button",{onClick:()=>E({id:M.id,title:M.title,color:M.color}),className:"w-8 h-8 bg-krushr-gray-light text-krushr-gray-dark rounded-md flex items-center justify-center hover:bg-krushr-gray transition-colors",title:"Edit column",children:(0,P.jsx)(Ui,{className:"w-4 h-4"})}),(0,P.jsx)("button",{onClick:()=>Ot(M.id),disabled:We(M.id)>0,className:"w-8 h-8 bg-krushr-secondary text-white rounded-md flex items-center justify-center hover:bg-krushr-secondary/90 transition-colors disabled:opacity-50",title:"Delete column",children:(0,P.jsx)(Mt,{className:"w-4 h-4"})})]})]},M.id))})]}),(0,P.jsx)("div",{className:"flex-1 overflow-x-auto",children:(0,P.jsxs)(Zn,{sensors:Ce,collisionDetection:Yn,onDragStart:Ne,onDragEnd:ke,children:[(0,P.jsx)("div",{className:"flex gap-3 p-2 min-w-max h-full",children:(0,P.jsx)(ao,{items:u.map(M=>M.id),strategy:Ks,children:u.map(M=>(0,P.jsx)(ta,{column:M,tasks:Y[M.id]||[],taskCount:We(M.id),onTaskClick:re=>m(re),onAddTask:()=>{b(M.id),S(!0)},bulkMode:$,selectedTasks:ae,onTaskSelect:De,onEditColumn:()=>E({id:M.id,title:M.title,color:M.color}),onDeleteColumn:()=>Ot(M.id)},M.id))})}),(0,P.jsx)(Gs,{children:n&&(0,P.jsx)(mn,{task:n,isDragOverlay:!0})})]})}),(0,P.jsx)(Un,{open:v,onClose:()=>{S(!1),b(null)},workspaceId:e.workspaceId,kanbanId:e.id,kanbanColumnId:y||void 0,onSuccess:()=>{_(),g(),S(!1),b(null)}}),p&&(0,P.jsx)(Ri,{taskId:p,open:!!p,onClose:()=>m(null),onUpdate:()=>{_(),g()}})]})}export{cr as a,Lr as b,Hg as c,fr as d,Wr as e,gb as f,vb as g,qc as h,Jc as i,Zc as j,Ca as k,Sa as l,Ra as m,Na as n,Qc as o,Ur as p,rl as q,Bl as r,zl as s,Va as t,Ga as u,Gr as v,Qs as w,ec as x,tc as y,io as z,Ja as A,el as B,xb as C,Ma as D,Da as E,Ia as F,ei as G,ou as H,au as I,Mn as J,ld as K,ud as L,wi as M,Eo as N,Ih as O,xi as P,Ph as Q,ko as R,Eh as S,Th as T};
