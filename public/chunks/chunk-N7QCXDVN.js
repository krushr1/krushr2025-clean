import{d as u,e as d,f as p}from"/chunks/chunk-OCDNZNMT.js";import{c,e as m,pb as l}from"/chunks/chunk-DMBWTQIB.js";var o=c(m(),1);function w(){let{toast:e}=d(),{addUndoableAction:g,undo:v,removeAction:s}=p();return{execute:async({type:f,action:k,undoAction:y,item:A,getMessage:b,getUndoMessage:O,ttl:a=1e4,showUndo:r=!0})=>{let i=b(),t;r?(t=g(f,i,A,y,a),e({title:i,duration:a,action:(0,o.jsxs)(u,{size:"sm",variant:"outline",onClick:async()=>{try{await v(t),e({title:O?.()||"Action undone",duration:3e3})}catch{e({title:"Failed to undo",description:"The action could not be undone",variant:"destructive"})}},className:"ml-auto",children:[(0,o.jsx)(l,{className:"mr-1 h-3 w-3"}),"Undo"]}),onOpenChange:n=>{!n&&t&&s(t)}})):e({title:i,duration:3e3});try{return await k(),!0}catch(n){return r&&t&&s(t),e({title:"Action failed",description:n instanceof Error?n.message:"Something went wrong",variant:"destructive"}),!1}}}}export{w as a};
