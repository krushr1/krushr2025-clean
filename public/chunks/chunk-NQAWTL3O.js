import{A as vr,B as jn,C as Si,G as Wn,I as Ci,L as Ri,M as Ni,Q as ki,T as Di,X as Hn,Y as qr,b as Kt,c as Qo,f as Fr,g as Re,h as dt,i as hr,j as $r,m as Gr,o as zn,p as vi,q as yi,r as bi,s as xi,t as wi,w as ve}from"/chunks/chunk-U2LJ4VBM.js";import{a as Xt}from"/chunks/chunk-QBROC7HK.js";import{a as Rt}from"/chunks/chunk-WGRBIA4T.js";import{a as Ti}from"/chunks/chunk-N7QCXDVN.js";import{b as qo,d as fe,e as Ei,g as Ii}from"/chunks/chunk-OCDNZNMT.js";import{c as ee}from"/chunks/chunk-4BKYIWEF.js";import{a as Fn,b as gi,c as Nt,d as Yr,e as kt}from"/chunks/chunk-SCMRC7S7.js";import{a as ae,b as hi,c as Gt,d as ot,e as ce,g as gr,h as Xr}from"/chunks/chunk-YZLHBH2V.js";import{a as Yo,c as ge,d as St}from"/chunks/chunk-VJ4R7UJF.js";import{$ as Bn,A as jr,B as On,E as Zo,F as Wr,Fa as ci,G as ei,Ga as ui,I as ti,K as $t,La as Ur,Q as _n,Qa as ut,R as ri,W as Ln,X as ni,Xa as di,Y as oi,Z as Hr,Za as Vr,_ as ii,c as F,ca as ai,d as ie,db as fi,e as xe,eb as mi,g as j,ga as si,i as Jo,lb as Ct,ma as li,qb as pi,sb as pr,x as zr,xb as Kr}from"/chunks/chunk-DMBWTQIB.js";var Pe=F(ie(),1);var y=F(ie()),At=F(Yo());var me=F(ie());function Ai(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,me.useMemo)(()=>n=>{t.forEach(o=>o(n))},t)}var yr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Dt(e){let t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Jr(e){return"nodeType"in e}function Ie(e){var t,r;return e?Dt(e)?e:Jr(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}function Qr(e){let{Document:t}=Ie(e);return e instanceof t}function Yt(e){return Dt(e)?!1:e instanceof Ie(e).HTMLElement}function Vn(e){return e instanceof Ie(e).SVGElement}function Et(e){return e?Dt(e)?e.document:Jr(e)?Qr(e)?e:Yt(e)||Vn(e)?e.ownerDocument:document:document:document}var je=yr?me.useLayoutEffect:me.useEffect;function br(e){let t=(0,me.useRef)(e);return je(()=>{t.current=e}),(0,me.useCallback)(function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return t.current==null?void 0:t.current(...n)},[])}function Mi(){let e=(0,me.useRef)(null),t=(0,me.useCallback)((n,o)=>{e.current=setInterval(n,o)},[]),r=(0,me.useCallback)(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,r]}function qt(e,t){t===void 0&&(t=[e]);let r=(0,me.useRef)(e);return je(()=>{r.current!==e&&(r.current=e)},t),r}function Jt(e,t){let r=(0,me.useRef)();return(0,me.useMemo)(()=>{let n=e(r.current);return r.current=n,n},[...t])}function xr(e){let t=br(e),r=(0,me.useRef)(null),n=(0,me.useCallback)(o=>{o!==r.current&&t?.(o,r.current),r.current=o},[]);return[r,n]}function wr(e){let t=(0,me.useRef)();return(0,me.useEffect)(()=>{t.current=e},[e]),t.current}var Un={};function It(e,t){return(0,me.useMemo)(()=>{if(t)return t;let r=Un[e]==null?0:Un[e]+1;return Un[e]=r,e+"-"+r},[e,t])}function Oi(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return n.reduce((i,s)=>{let a=Object.entries(s);for(let[l,u]of a){let m=i[l];m!=null&&(i[l]=m+e*u)}return i},{...t})}}var Tt=Oi(1),Qt=Oi(-1);function bl(e){return"clientX"in e&&"clientY"in e}function Zt(e){if(!e)return!1;let{KeyboardEvent:t}=Ie(e.target);return t&&e instanceof t}function xl(e){if(!e)return!1;let{TouchEvent:t}=Ie(e.target);return t&&e instanceof t}function Sr(e){if(xl(e)){if(e.touches&&e.touches.length){let{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){let{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return bl(e)?{x:e.clientX,y:e.clientY}:null}var ze=Object.freeze({Translate:{toString(e){if(!e)return;let{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;let{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[ze.Translate.toString(e),ze.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:n}=e;return t+" "+r+"ms "+n}}}),Pi="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function _i(e){return e.matches(Pi)?e:e.querySelector(Pi)}var Pt=F(ie()),wl={display:"none"};function Li(e){let{id:t,value:r}=e;return Pt.default.createElement("div",{id:t,style:wl},r)}function Bi(e){let{id:t,announcement:r,ariaLiveType:n="assertive"}=e,o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Pt.default.createElement("div",{id:t,style:o,role:"status","aria-live":n,"aria-atomic":!0},r)}function Fi(){let[e,t]=(0,Pt.useState)("");return{announce:(0,Pt.useCallback)(n=>{n!=null&&t(n)},[]),announcement:e}}var Ji=(0,y.createContext)(null);function Sl(e){let t=(0,y.useContext)(Ji);(0,y.useEffect)(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Cl(){let[e]=(0,y.useState)(()=>new Set),t=(0,y.useCallback)(n=>(e.add(n),()=>e.delete(n)),[e]);return[(0,y.useCallback)(n=>{let{type:o,event:i}=n;e.forEach(s=>{var a;return(a=s[o])==null?void 0:a.call(s,i)})},[e]),t]}var Rl={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Nl={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function kl(e){let{announcements:t=Nl,container:r,hiddenTextDescribedById:n,screenReaderInstructions:o=Rl}=e,{announce:i,announcement:s}=Fi(),a=It("DndLiveRegion"),[l,u]=(0,y.useState)(!1);if((0,y.useEffect)(()=>{u(!0)},[]),Sl((0,y.useMemo)(()=>({onDragStart(c){let{active:p}=c;i(t.onDragStart({active:p}))},onDragMove(c){let{active:p,over:v}=c;t.onDragMove&&i(t.onDragMove({active:p,over:v}))},onDragOver(c){let{active:p,over:v}=c;i(t.onDragOver({active:p,over:v}))},onDragEnd(c){let{active:p,over:v}=c;i(t.onDragEnd({active:p,over:v}))},onDragCancel(c){let{active:p,over:v}=c;i(t.onDragCancel({active:p,over:v}))}}),[i,t])),!l)return null;let m=y.default.createElement(y.default.Fragment,null,y.default.createElement(Li,{id:n,value:o.draggable}),y.default.createElement(Bi,{id:a,announcement:s}));return r?(0,At.createPortal)(m,r):m}var we;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(we||(we={}));function en(){}function Qi(e,t){return(0,y.useMemo)(()=>({sensor:e,options:t??{}}),[e,t])}function Zi(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,y.useMemo)(()=>[...t].filter(n=>n!=null),[...t])}var Ge=Object.freeze({x:0,y:0});function Dl(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function El(e,t){let r=Sr(e);if(!r)return"0 0";let n={x:(r.x-t.left)/t.width*100,y:(r.y-t.top)/t.height*100};return n.x+"% "+n.y+"%"}function Il(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return r-n}function Tl(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return n-r}function zi(e){let{left:t,top:r,height:n,width:o}=e;return[{x:t,y:r},{x:t+o,y:r},{x:t,y:r+n},{x:t+o,y:r+n}]}function ea(e,t){if(!e||e.length===0)return null;let[r]=e;return t?r[t]:r}var Zn=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e,o=zi(t),i=[];for(let s of n){let{id:a}=s,l=r.get(a);if(l){let u=zi(l),m=o.reduce((p,v,R)=>p+Dl(u[R],v),0),c=Number((m/4).toFixed(4));i.push({id:a,data:{droppableContainer:s,value:c}})}}return i.sort(Il)};function Pl(e,t){let r=Math.max(t.top,e.top),n=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),s=o-n,a=i-r;if(n<o&&r<i){let l=t.width*t.height,u=e.width*e.height,m=s*a,c=m/(l+u-m);return Number(c.toFixed(4))}return 0}var Al=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e,o=[];for(let i of n){let{id:s}=i,a=r.get(s);if(a){let l=Pl(a,t);l>0&&o.push({id:s,data:{droppableContainer:i,value:l}})}}return o.sort(Tl)};function Ml(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}function ta(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Ge}function Ol(e){return function(r){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return o.reduce((s,a)=>({...s,top:s.top+e*a.y,bottom:s.bottom+e*a.y,left:s.left+e*a.x,right:s.right+e*a.x}),{...r})}}var _l=Ol(1);function ra(e){if(e.startsWith("matrix3d(")){let t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){let t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Ll(e,t,r){let n=ra(t);if(!n)return e;let{scaleX:o,scaleY:i,x:s,y:a}=n,l=e.left-s-(1-o)*parseFloat(r),u=e.top-a-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),m=o?e.width/o:e.width,c=i?e.height/i:e.height;return{width:m,height:c,top:u,right:l+m,bottom:u+c,left:l}}var Bl={ignoreTransform:!1};function _t(e,t){t===void 0&&(t=Bl);let r=e.getBoundingClientRect();if(t.ignoreTransform){let{transform:u,transformOrigin:m}=Ie(e).getComputedStyle(e);u&&(r=Ll(r,u,m))}let{top:n,left:o,width:i,height:s,bottom:a,right:l}=r;return{top:n,left:o,width:i,height:s,bottom:a,right:l}}function ji(e){return _t(e,{ignoreTransform:!0})}function Fl(e){let t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}function zl(e,t){return t===void 0&&(t=Ie(e).getComputedStyle(e)),t.position==="fixed"}function jl(e,t){t===void 0&&(t=Ie(e).getComputedStyle(e));let r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{let i=t[o];return typeof i=="string"?r.test(i):!1})}function nn(e,t){let r=[];function n(o){if(t!=null&&r.length>=t||!o)return r;if(Qr(o)&&o.scrollingElement!=null&&!r.includes(o.scrollingElement))return r.push(o.scrollingElement),r;if(!Yt(o)||Vn(o)||r.includes(o))return r;let i=Ie(e).getComputedStyle(o);return o!==e&&jl(o,i)&&r.push(o),zl(o,i)?r:n(o.parentNode)}return e?n(e):r}function na(e){let[t]=nn(e,1);return t??null}function Kn(e){return!yr||!e?null:Dt(e)?e:Jr(e)?Qr(e)||e===Et(e).scrollingElement?window:Yt(e)?e:null:null}function oa(e){return Dt(e)?e.scrollX:e.scrollLeft}function ia(e){return Dt(e)?e.scrollY:e.scrollTop}function Xn(e){return{x:oa(e),y:ia(e)}}var Ne;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Ne||(Ne={}));function aa(e){return!yr||!e?!1:e===document.scrollingElement}function sa(e){let t={x:0,y:0},r=aa(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},o=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,s=e.scrollTop>=n.y,a=e.scrollLeft>=n.x;return{isTop:o,isLeft:i,isBottom:s,isRight:a,maxScroll:n,minScroll:t}}var Wl={x:.2,y:.2};function Hl(e,t,r,n,o){let{top:i,left:s,right:a,bottom:l}=r;n===void 0&&(n=10),o===void 0&&(o=Wl);let{isTop:u,isBottom:m,isLeft:c,isRight:p}=sa(e),v={x:0,y:0},R={x:0,y:0},d={height:t.height*o.y,width:t.width*o.x};return!u&&i<=t.top+d.height?(v.y=Ne.Backward,R.y=n*Math.abs((t.top+d.height-i)/d.height)):!m&&l>=t.bottom-d.height&&(v.y=Ne.Forward,R.y=n*Math.abs((t.bottom-d.height-l)/d.height)),!p&&a>=t.right-d.width?(v.x=Ne.Forward,R.x=n*Math.abs((t.right-d.width-a)/d.width)):!c&&s<=t.left+d.width&&(v.x=Ne.Backward,R.x=n*Math.abs((t.left+d.width-s)/d.width)),{direction:v,speed:R}}function Ul(e){if(e===document.scrollingElement){let{innerWidth:i,innerHeight:s}=window;return{top:0,left:0,right:i,bottom:s,width:i,height:s}}let{top:t,left:r,right:n,bottom:o}=e.getBoundingClientRect();return{top:t,left:r,right:n,bottom:o,width:e.clientWidth,height:e.clientHeight}}function la(e){return e.reduce((t,r)=>Tt(t,Xn(r)),Ge)}function Vl(e){return e.reduce((t,r)=>t+oa(r),0)}function Kl(e){return e.reduce((t,r)=>t+ia(r),0)}function ca(e,t){if(t===void 0&&(t=_t),!e)return;let{top:r,left:n,bottom:o,right:i}=t(e);na(e)&&(o<=0||i<=0||r>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}var $l=[["x",["left","right"],Vl],["y",["top","bottom"],Kl]],Rr=class{constructor(t,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;let n=nn(r),o=la(n);this.rect={...t},this.width=t.width,this.height=t.height;for(let[i,s,a]of $l)for(let l of s)Object.defineProperty(this,l,{get:()=>{let u=a(n),m=o[i]-u;return this.rect[l]+m},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}},Mt=class{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=t}add(t,r,n){var o;(o=this.target)==null||o.addEventListener(t,r,n),this.listeners.push([t,r,n])}};function Gl(e){let{EventTarget:t}=Ie(e);return e instanceof t?e:Et(e)}function $n(e,t){let r=Math.abs(e.x),n=Math.abs(e.y);return typeof t=="number"?Math.sqrt(r**2+n**2)>t:"x"in t&&"y"in t?r>t.x&&n>t.y:"x"in t?r>t.x:"y"in t?n>t.y:!1}var Ke;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Ke||(Ke={}));function Wi(e){e.preventDefault()}function Xl(e){e.stopPropagation()}var $;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})($||($={}));var ua={start:[$.Space,$.Enter],cancel:[$.Esc],end:[$.Space,$.Enter,$.Tab]},Yl=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case $.Right:return{...r,x:r.x+25};case $.Left:return{...r,x:r.x-25};case $.Down:return{...r,y:r.y+25};case $.Up:return{...r,y:r.y-25}}},tn=class{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;let{event:{target:r}}=t;this.props=t,this.listeners=new Mt(Et(r)),this.windowListeners=new Mt(Ie(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ke.Resize,this.handleCancel),this.windowListeners.add(Ke.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ke.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:t,onStart:r}=this.props,n=t.node.current;n&&ca(n),r(Ge)}handleKeyDown(t){if(Zt(t)){let{active:r,context:n,options:o}=this.props,{keyboardCodes:i=ua,coordinateGetter:s=Yl,scrollBehavior:a="smooth"}=o,{code:l}=t;if(i.end.includes(l)){this.handleEnd(t);return}if(i.cancel.includes(l)){this.handleCancel(t);return}let{collisionRect:u}=n.current,m=u?{x:u.left,y:u.top}:Ge;this.referenceCoordinates||(this.referenceCoordinates=m);let c=s(t,{active:r,context:n.current,currentCoordinates:m});if(c){let p=Qt(c,m),v={x:0,y:0},{scrollableAncestors:R}=n.current;for(let d of R){let g=t.code,{isTop:x,isRight:f,isLeft:b,isBottom:k,maxScroll:N,minScroll:T}=sa(d),E=Ul(d),P={x:Math.min(g===$.Right?E.right-E.width/2:E.right,Math.max(g===$.Right?E.left:E.left+E.width/2,c.x)),y:Math.min(g===$.Down?E.bottom-E.height/2:E.bottom,Math.max(g===$.Down?E.top:E.top+E.height/2,c.y))},H=g===$.Right&&!f||g===$.Left&&!b,z=g===$.Down&&!k||g===$.Up&&!x;if(H&&P.x!==c.x){let B=d.scrollLeft+p.x,U=g===$.Right&&B<=N.x||g===$.Left&&B>=T.x;if(U&&!p.y){d.scrollTo({left:B,behavior:a});return}U?v.x=d.scrollLeft-B:v.x=g===$.Right?d.scrollLeft-N.x:d.scrollLeft-T.x,v.x&&d.scrollBy({left:-v.x,behavior:a});break}else if(z&&P.y!==c.y){let B=d.scrollTop+p.y,U=g===$.Down&&B<=N.y||g===$.Up&&B>=T.y;if(U&&!p.x){d.scrollTo({top:B,behavior:a});return}U?v.y=d.scrollTop-B:v.y=g===$.Down?d.scrollTop-N.y:d.scrollTop-T.y,v.y&&d.scrollBy({top:-v.y,behavior:a});break}}this.handleMove(t,Tt(Qt(c,this.referenceCoordinates),v))}}}handleMove(t,r){let{onMove:n}=this.props;t.preventDefault(),n(r)}handleEnd(t){let{onEnd:r}=this.props;t.preventDefault(),this.detach(),r()}handleCancel(t){let{onCancel:r}=this.props;t.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}};tn.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:n=ua,onActivation:o}=t,{active:i}=r,{code:s}=e.nativeEvent;if(n.start.includes(s)){let a=i.activatorNode.current;return a&&e.target!==a?!1:(e.preventDefault(),o?.({event:e.nativeEvent}),!0)}return!1}}];function Hi(e){return!!(e&&"distance"in e)}function Ui(e){return!!(e&&"delay"in e)}var Nr=class{constructor(t,r,n){var o;n===void 0&&(n=Gl(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=r;let{event:i}=t,{target:s}=i;this.props=t,this.events=r,this.document=Et(s),this.documentListeners=new Mt(this.document),this.listeners=new Mt(n),this.windowListeners=new Mt(Ie(s)),this.initialCoordinates=(o=Sr(i))!=null?o:Ge,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:t,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Ke.Resize,this.handleCancel),this.windowListeners.add(Ke.DragStart,Wi),this.windowListeners.add(Ke.VisibilityChange,this.handleCancel),this.windowListeners.add(Ke.ContextMenu,Wi),this.documentListeners.add(Ke.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Ui(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(Hi(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,r){let{active:n,onPending:o}=this.props;o(n,t,this.initialCoordinates,r)}handleStart(){let{initialCoordinates:t}=this,{onStart:r}=this.props;t&&(this.activated=!0,this.documentListeners.add(Ke.Click,Xl,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ke.SelectionChange,this.removeTextSelection),r(t))}handleMove(t){var r;let{activated:n,initialCoordinates:o,props:i}=this,{onMove:s,options:{activationConstraint:a}}=i;if(!o)return;let l=(r=Sr(t))!=null?r:Ge,u=Qt(o,l);if(!n&&a){if(Hi(a)){if(a.tolerance!=null&&$n(u,a.tolerance))return this.handleCancel();if($n(u,a.distance))return this.handleStart()}if(Ui(a)&&$n(u,a.tolerance))return this.handleCancel();this.handlePending(a,u);return}t.cancelable&&t.preventDefault(),s(l)}handleEnd(){let{onAbort:t,onEnd:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleCancel(){let{onAbort:t,onCancel:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleKeydown(t){t.code===$.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}},ql={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}},er=class extends Nr{constructor(t){let{event:r}=t,n=Et(r.target);super(t,ql,n)}};er.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return!r.isPrimary||r.button!==0?!1:(n?.({event:r}),!0)}}];var Jl={move:{name:"mousemove"},end:{name:"mouseup"}},Yn;(function(e){e[e.RightClick=2]="RightClick"})(Yn||(Yn={}));var qn=class extends Nr{constructor(t){super(t,Jl,Et(t.event.target))}};qn.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return r.button===Yn.RightClick?!1:(n?.({event:r}),!0)}}];var Gn={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}},Jn=class extends Nr{constructor(t){super(t,Gn)}static setup(){return window.addEventListener(Gn.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Gn.move.name,t)};function t(){}}};Jn.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t,{touches:o}=r;return o.length>1?!1:(n?.({event:r}),!0)}}];var Cr;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Cr||(Cr={}));var rn;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(rn||(rn={}));function Ql(e){let{acceleration:t,activator:r=Cr.Pointer,canScroll:n,draggingRect:o,enabled:i,interval:s=5,order:a=rn.TreeOrder,pointerCoordinates:l,scrollableAncestors:u,scrollableAncestorRects:m,delta:c,threshold:p}=e,v=ec({delta:c,disabled:!i}),[R,d]=Mi(),g=(0,y.useRef)({x:0,y:0}),x=(0,y.useRef)({x:0,y:0}),f=(0,y.useMemo)(()=>{switch(r){case Cr.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case Cr.DraggableRect:return o}},[r,o,l]),b=(0,y.useRef)(null),k=(0,y.useCallback)(()=>{let T=b.current;if(!T)return;let E=g.current.x*x.current.x,P=g.current.y*x.current.y;T.scrollBy(E,P)},[]),N=(0,y.useMemo)(()=>a===rn.TreeOrder?[...u].reverse():u,[a,u]);(0,y.useEffect)(()=>{if(!i||!u.length||!f){d();return}for(let T of N){if(n?.(T)===!1)continue;let E=u.indexOf(T),P=m[E];if(!P)continue;let{direction:H,speed:z}=Hl(T,P,f,t,p);for(let B of["x","y"])v[B][H[B]]||(z[B]=0,H[B]=0);if(z.x>0||z.y>0){d(),b.current=T,R(k,s),g.current=z,x.current=H;return}}g.current={x:0,y:0},x.current={x:0,y:0},d()},[t,k,n,d,i,s,JSON.stringify(f),JSON.stringify(v),R,u,N,m,JSON.stringify(p)])}var Zl={x:{[Ne.Backward]:!1,[Ne.Forward]:!1},y:{[Ne.Backward]:!1,[Ne.Forward]:!1}};function ec(e){let{delta:t,disabled:r}=e,n=wr(t);return Jt(o=>{if(r||!n||!o)return Zl;let i={x:Math.sign(t.x-n.x),y:Math.sign(t.y-n.y)};return{x:{[Ne.Backward]:o.x[Ne.Backward]||i.x===-1,[Ne.Forward]:o.x[Ne.Forward]||i.x===1},y:{[Ne.Backward]:o.y[Ne.Backward]||i.y===-1,[Ne.Forward]:o.y[Ne.Forward]||i.y===1}}},[r,t,n])}function tc(e,t){let r=t!=null?e.get(t):void 0,n=r?r.node.current:null;return Jt(o=>{var i;return t==null?null:(i=n??o)!=null?i:null},[n,t])}function rc(e,t){return(0,y.useMemo)(()=>e.reduce((r,n)=>{let{sensor:o}=n,i=o.activators.map(s=>({eventName:s.eventName,handler:t(s.handler,n)}));return[...r,...i]},[]),[e,t])}var kr;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(kr||(kr={}));var Qn;(function(e){e.Optimized="optimized"})(Qn||(Qn={}));var Vi=new Map;function nc(e,t){let{dragging:r,dependencies:n,config:o}=t,[i,s]=(0,y.useState)(null),{frequency:a,measure:l,strategy:u}=o,m=(0,y.useRef)(e),c=g(),p=qt(c),v=(0,y.useCallback)(function(x){x===void 0&&(x=[]),!p.current&&s(f=>f===null?x:f.concat(x.filter(b=>!f.includes(b))))},[p]),R=(0,y.useRef)(null),d=Jt(x=>{if(c&&!r)return Vi;if(!x||x===Vi||m.current!==e||i!=null){let f=new Map;for(let b of e){if(!b)continue;if(i&&i.length>0&&!i.includes(b.id)&&b.rect.current){f.set(b.id,b.rect.current);continue}let k=b.node.current,N=k?new Rr(l(k),k):null;b.rect.current=N,N&&f.set(b.id,N)}return f}return x},[e,i,r,c,l]);return(0,y.useEffect)(()=>{m.current=e},[e]),(0,y.useEffect)(()=>{c||v()},[r,c]),(0,y.useEffect)(()=>{i&&i.length>0&&s(null)},[JSON.stringify(i)]),(0,y.useEffect)(()=>{c||typeof a!="number"||R.current!==null||(R.current=setTimeout(()=>{v(),R.current=null},a))},[a,c,v,...n]),{droppableRects:d,measureDroppableContainers:v,measuringScheduled:i!=null};function g(){switch(u){case kr.Always:return!1;case kr.BeforeDragging:return r;default:return!r}}}function eo(e,t){return Jt(r=>e?r||(typeof t=="function"?t(e):e):null,[t,e])}function oc(e,t){return eo(e,t)}function ic(e){let{callback:t,disabled:r}=e,n=br(t),o=(0,y.useMemo)(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;let{MutationObserver:i}=window;return new i(n)},[n,r]);return(0,y.useEffect)(()=>()=>o?.disconnect(),[o]),o}function on(e){let{callback:t,disabled:r}=e,n=br(t),o=(0,y.useMemo)(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;let{ResizeObserver:i}=window;return new i(n)},[r]);return(0,y.useEffect)(()=>()=>o?.disconnect(),[o]),o}function ac(e){return new Rr(_t(e),e)}function Ki(e,t,r){t===void 0&&(t=ac);let[n,o]=(0,y.useState)(null);function i(){o(l=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=l??r)!=null?u:null}let m=t(e);return JSON.stringify(l)===JSON.stringify(m)?l:m})}let s=ic({callback(l){if(e)for(let u of l){let{type:m,target:c}=u;if(m==="childList"&&c instanceof HTMLElement&&c.contains(e)){i();break}}}}),a=on({callback:i});return je(()=>{i(),e?(a?.observe(e),s?.observe(document.body,{childList:!0,subtree:!0})):(a?.disconnect(),s?.disconnect())},[e]),n}function sc(e){let t=eo(e);return ta(e,t)}var $i=[];function lc(e){let t=(0,y.useRef)(e),r=Jt(n=>e?n&&n!==$i&&e&&t.current&&e.parentNode===t.current.parentNode?n:nn(e):$i,[e]);return(0,y.useEffect)(()=>{t.current=e},[e]),r}function cc(e){let[t,r]=(0,y.useState)(null),n=(0,y.useRef)(e),o=(0,y.useCallback)(i=>{let s=Kn(i.target);s&&r(a=>a?(a.set(s,Xn(s)),new Map(a)):null)},[]);return(0,y.useEffect)(()=>{let i=n.current;if(e!==i){s(i);let a=e.map(l=>{let u=Kn(l);return u?(u.addEventListener("scroll",o,{passive:!0}),[u,Xn(u)]):null}).filter(l=>l!=null);r(a.length?new Map(a):null),n.current=e}return()=>{s(e),s(i)};function s(a){a.forEach(l=>{let u=Kn(l);u?.removeEventListener("scroll",o)})}},[o,e]),(0,y.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((i,s)=>Tt(i,s),Ge):la(e):Ge,[e,t])}function Gi(e,t){t===void 0&&(t=[]);let r=(0,y.useRef)(null);return(0,y.useEffect)(()=>{r.current=null},t),(0,y.useEffect)(()=>{let n=e!==Ge;n&&!r.current&&(r.current=e),!n&&r.current&&(r.current=null)},[e]),r.current?Qt(e,r.current):Ge}function uc(e){(0,y.useEffect)(()=>{if(!yr)return;let t=e.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(let r of t)r?.()}},e.map(t=>{let{sensor:r}=t;return r}))}function dc(e,t){return(0,y.useMemo)(()=>e.reduce((r,n)=>{let{eventName:o,handler:i}=n;return r[o]=s=>{i(s,t)},r},{}),[e,t])}function da(e){return(0,y.useMemo)(()=>e?Fl(e):null,[e])}var Xi=[];function fc(e,t){t===void 0&&(t=_t);let[r]=e,n=da(r?Ie(r):null),[o,i]=(0,y.useState)(Xi);function s(){i(()=>e.length?e.map(l=>aa(l)?n:new Rr(t(l),l)):Xi)}let a=on({callback:s});return je(()=>{a?.disconnect(),s(),e.forEach(l=>a?.observe(l))},[e]),o}function fa(e){if(!e)return null;if(e.children.length>1)return e;let t=e.children[0];return Yt(t)?t:e}function mc(e){let{measure:t}=e,[r,n]=(0,y.useState)(null),o=(0,y.useCallback)(u=>{for(let{target:m}of u)if(Yt(m)){n(c=>{let p=t(m);return c?{...c,width:p.width,height:p.height}:p});break}},[t]),i=on({callback:o}),s=(0,y.useCallback)(u=>{let m=fa(u);i?.disconnect(),m&&i?.observe(m),n(m?t(m):null)},[t,i]),[a,l]=xr(s);return(0,y.useMemo)(()=>({nodeRef:a,rect:r,setRef:l}),[r,a,l])}var pc=[{sensor:er,options:{}},{sensor:tn,options:{}}],hc={current:{}},Zr={draggable:{measure:ji},droppable:{measure:ji,strategy:kr.WhileDragging,frequency:Qn.Optimized},dragOverlay:{measure:_t}},Ot=class extends Map{get(t){var r;return t!=null&&(r=super.get(t))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:r}=t;return!r})}getNodeFor(t){var r,n;return(r=(n=this.get(t))==null?void 0:n.node.current)!=null?r:void 0}},gc={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ot,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:en},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Zr,measureDroppableContainers:en,windowRect:null,measuringScheduled:!1},ma={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:en,draggableNodes:new Map,over:null,measureDroppableContainers:en},Dr=(0,y.createContext)(ma),pa=(0,y.createContext)(gc);function vc(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ot}}}function yc(e,t){switch(t.type){case we.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case we.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case we.DragEnd:case we.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case we.RegisterDroppable:{let{element:r}=t,{id:n}=r,o=new Ot(e.droppable.containers);return o.set(n,r),{...e,droppable:{...e.droppable,containers:o}}}case we.SetDroppableDisabled:{let{id:r,key:n,disabled:o}=t,i=e.droppable.containers.get(r);if(!i||n!==i.key)return e;let s=new Ot(e.droppable.containers);return s.set(r,{...i,disabled:o}),{...e,droppable:{...e.droppable,containers:s}}}case we.UnregisterDroppable:{let{id:r,key:n}=t,o=e.droppable.containers.get(r);if(!o||n!==o.key)return e;let i=new Ot(e.droppable.containers);return i.delete(r),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function bc(e){let{disabled:t}=e,{active:r,activatorEvent:n,draggableNodes:o}=(0,y.useContext)(Dr),i=wr(n),s=wr(r?.id);return(0,y.useEffect)(()=>{if(!t&&!n&&i&&s!=null){if(!Zt(i)||document.activeElement===i.target)return;let a=o.get(s);if(!a)return;let{activatorNode:l,node:u}=a;if(!l.current&&!u.current)return;requestAnimationFrame(()=>{for(let m of[l.current,u.current]){if(!m)continue;let c=_i(m);if(c){c.focus();break}}})}},[n,t,o,s,i]),null}function ha(e,t){let{transform:r,...n}=t;return e!=null&&e.length?e.reduce((o,i)=>i({transform:o,...n}),r):r}function xc(e){return(0,y.useMemo)(()=>({draggable:{...Zr.draggable,...e?.draggable},droppable:{...Zr.droppable,...e?.droppable},dragOverlay:{...Zr.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function wc(e){let{activeNode:t,measure:r,initialRect:n,config:o=!0}=e,i=(0,y.useRef)(!1),{x:s,y:a}=typeof o=="boolean"?{x:o,y:o}:o;je(()=>{if(!s&&!a||!t){i.current=!1;return}if(i.current||!n)return;let u=t?.node.current;if(!u||u.isConnected===!1)return;let m=r(u),c=ta(m,n);if(s||(c.x=0),a||(c.y=0),i.current=!0,Math.abs(c.x)>0||Math.abs(c.y)>0){let p=na(u);p&&p.scrollBy({top:c.y,left:c.x})}},[t,s,a,n,r])}var an=(0,y.createContext)({...Ge,scaleX:1,scaleY:1}),ft;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(ft||(ft={}));var ga=(0,y.memo)(function(t){var r,n,o,i;let{id:s,accessibility:a,autoScroll:l=!0,children:u,sensors:m=pc,collisionDetection:c=Al,measuring:p,modifiers:v,...R}=t,d=(0,y.useReducer)(yc,void 0,vc),[g,x]=d,[f,b]=Cl(),[k,N]=(0,y.useState)(ft.Uninitialized),T=k===ft.Initialized,{draggable:{active:E,nodes:P,translate:H},droppable:{containers:z}}=g,B=E!=null?P.get(E):null,U=(0,y.useRef)({initial:null,translated:null}),Q=(0,y.useMemo)(()=>{var le;return E!=null?{id:E,data:(le=B?.data)!=null?le:hc,rect:U}:null},[E,B]),re=(0,y.useRef)(null),[ue,se]=(0,y.useState)(null),[V,Y]=(0,y.useState)(null),ne=qt(R,Object.values(R)),Se=It("DndDescribedBy",s),Ae=(0,y.useMemo)(()=>z.getEnabled(),[z]),de=xc(p),{droppableRects:De,measureDroppableContainers:Ce,measuringScheduled:S}=nc(Ae,{dragging:T,dependencies:[H.x,H.y],config:de.droppable}),q=tc(P,E),M=(0,y.useMemo)(()=>V?Sr(V):null,[V]),X=Ue(),oe=oc(q,de.draggable.measure);wc({activeNode:E!=null?P.get(E):null,config:X.layoutShiftCompensation,initialRect:oe,measure:de.draggable.measure});let A=Ki(q,de.draggable.measure,oe),K=Ki(q?q.parentElement:null),G=(0,y.useRef)({activatorEvent:null,active:null,activeNode:q,collisionRect:null,collisions:null,droppableRects:De,draggableNodes:P,draggingNode:null,draggingNodeRect:null,droppableContainers:z,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ee=z.getNodeFor((r=G.current.over)==null?void 0:r.id),be=mc({measure:de.dragOverlay.measure}),Me=(n=be.nodeRef.current)!=null?n:q,He=T?(o=be.rect)!=null?o:A:null,it=!!(be.nodeRef.current&&be.rect),Lr=sc(it?null:A),tt=da(Me?Ie(Me):null),qe=lc(T?Ee??q:null),Ht=fc(qe),bt=ha(v,{transform:{x:H.x-Lr.x,y:H.y-Lr.y,scaleX:1,scaleY:1},activatorEvent:V,active:Q,activeNodeRect:A,containerNodeRect:K,draggingNodeRect:He,over:G.current.over,overlayNodeRect:be.rect,scrollableAncestors:qe,scrollableAncestorRects:Ht,windowRect:tt}),lr=M?Tt(M,H):null,Br=cc(qe),Tn=Gi(Br),Pn=Gi(Br,[A]),rt=Tt(bt,Tn),xt=He?_l(He,bt):null,w=Q&&xt?c({active:Q,collisionRect:xt,droppableRects:De,droppableContainers:Ae,pointerCoordinates:lr}):null,_=ea(w,"id"),[L,Oe]=(0,y.useState)(null),Ut=it?bt:Tt(bt,Pn),cr=Ml(Ut,(i=L?.rect)!=null?i:null,A),ur=(0,y.useRef)(null),Je=(0,y.useCallback)((le,Le)=>{let{sensor:Be,options:st}=Le;if(re.current==null)return;let Ve=P.get(re.current);if(!Ve)return;let Fe=le.nativeEvent,Ze=new Be({active:re.current,activeNode:Ve,event:Fe,options:st,context:G,onAbort(ke){if(!P.get(ke))return;let{onDragAbort:et}=ne.current,nt={id:ke};et?.(nt),f({type:"onDragAbort",event:nt})},onPending(ke,lt,et,nt){if(!P.get(ke))return;let{onDragPending:fr}=ne.current,ct={id:ke,constraint:lt,initialCoordinates:et,offset:nt};fr?.(ct),f({type:"onDragPending",event:ct})},onStart(ke){let lt=re.current;if(lt==null)return;let et=P.get(lt);if(!et)return;let{onDragStart:nt}=ne.current,dr={activatorEvent:Fe,active:{id:lt,data:et.data,rect:U}};(0,At.unstable_batchedUpdates)(()=>{nt?.(dr),N(ft.Initializing),x({type:we.DragStart,initialCoordinates:ke,active:lt}),f({type:"onDragStart",event:dr}),se(ur.current),Y(Fe)})},onMove(ke){x({type:we.DragMove,coordinates:ke})},onEnd:Vt(we.DragEnd),onCancel:Vt(we.DragCancel)});ur.current=Ze;function Vt(ke){return async function(){let{active:et,collisions:nt,over:dr,scrollAdjustedTranslate:fr}=G.current,ct=null;if(et&&fr){let{cancelDrop:mr}=ne.current;ct={activatorEvent:Fe,active:et,collisions:nt,delta:fr,over:dr},ke===we.DragEnd&&typeof mr=="function"&&await Promise.resolve(mr(ct))&&(ke=we.DragCancel)}re.current=null,(0,At.unstable_batchedUpdates)(()=>{x({type:ke}),N(ft.Uninitialized),Oe(null),se(null),Y(null),ur.current=null;let mr=ke===we.DragEnd?"onDragEnd":"onDragCancel";if(ct){let Mn=ne.current[mr];Mn?.(ct),f({type:mr,event:ct})}})}}},[P]),at=(0,y.useCallback)((le,Le)=>(Be,st)=>{let Ve=Be.nativeEvent,Fe=P.get(st);if(re.current!==null||!Fe||Ve.dndKit||Ve.defaultPrevented)return;let Ze={active:Fe};le(Be,Le.options,Ze)===!0&&(Ve.dndKit={capturedBy:Le.sensor},re.current=st,Je(Be,Le))},[P,Je]),Qe=rc(m,at);uc(m),je(()=>{A&&k===ft.Initializing&&N(ft.Initialized)},[A,k]),(0,y.useEffect)(()=>{let{onDragMove:le}=ne.current,{active:Le,activatorEvent:Be,collisions:st,over:Ve}=G.current;if(!Le||!Be)return;let Fe={active:Le,activatorEvent:Be,collisions:st,delta:{x:rt.x,y:rt.y},over:Ve};(0,At.unstable_batchedUpdates)(()=>{le?.(Fe),f({type:"onDragMove",event:Fe})})},[rt.x,rt.y]),(0,y.useEffect)(()=>{let{active:le,activatorEvent:Le,collisions:Be,droppableContainers:st,scrollAdjustedTranslate:Ve}=G.current;if(!le||re.current==null||!Le||!Ve)return;let{onDragOver:Fe}=ne.current,Ze=st.get(_),Vt=Ze&&Ze.rect.current?{id:Ze.id,rect:Ze.rect.current,data:Ze.data,disabled:Ze.disabled}:null,ke={active:le,activatorEvent:Le,collisions:Be,delta:{x:Ve.x,y:Ve.y},over:Vt};(0,At.unstable_batchedUpdates)(()=>{Oe(Vt),Fe?.(ke),f({type:"onDragOver",event:ke})})},[_]),je(()=>{G.current={activatorEvent:V,active:Q,activeNode:q,collisionRect:xt,collisions:w,droppableRects:De,draggableNodes:P,draggingNode:Me,draggingNodeRect:He,droppableContainers:z,over:L,scrollableAncestors:qe,scrollAdjustedTranslate:rt},U.current={initial:He,translated:xt}},[Q,q,w,xt,P,Me,He,De,z,L,qe,rt]),Ql({...X,delta:H,draggingRect:xt,pointerCoordinates:lr,scrollableAncestors:qe,scrollableAncestorRects:Ht});let wt=(0,y.useMemo)(()=>({active:Q,activeNode:q,activeNodeRect:A,activatorEvent:V,collisions:w,containerNodeRect:K,dragOverlay:be,draggableNodes:P,droppableContainers:z,droppableRects:De,over:L,measureDroppableContainers:Ce,scrollableAncestors:qe,scrollableAncestorRects:Ht,measuringConfiguration:de,measuringScheduled:S,windowRect:tt}),[Q,q,A,V,w,K,be,P,z,De,L,Ce,qe,Ht,de,S,tt]),An=(0,y.useMemo)(()=>({activatorEvent:V,activators:Qe,active:Q,activeNodeRect:A,ariaDescribedById:{draggable:Se},dispatch:x,draggableNodes:P,over:L,measureDroppableContainers:Ce}),[V,Qe,Q,A,x,Se,P,L,Ce]);return y.default.createElement(Ji.Provider,{value:b},y.default.createElement(Dr.Provider,{value:An},y.default.createElement(pa.Provider,{value:wt},y.default.createElement(an.Provider,{value:cr},u)),y.default.createElement(bc,{disabled:a?.restoreFocus===!1})),y.default.createElement(kl,{...a,hiddenTextDescribedById:Se}));function Ue(){let le=ue?.autoScrollEnabled===!1,Le=typeof l=="object"?l.enabled===!1:l===!1,Be=T&&!le&&!Le;return typeof l=="object"?{...l,enabled:Be}:{enabled:Be}}}),Sc=(0,y.createContext)(null),Yi="button",Cc="Draggable";function va(e){let{id:t,data:r,disabled:n=!1,attributes:o}=e,i=It(Cc),{activators:s,activatorEvent:a,active:l,activeNodeRect:u,ariaDescribedById:m,draggableNodes:c,over:p}=(0,y.useContext)(Dr),{role:v=Yi,roleDescription:R="draggable",tabIndex:d=0}=o??{},g=l?.id===t,x=(0,y.useContext)(g?an:Sc),[f,b]=xr(),[k,N]=xr(),T=dc(s,t),E=qt(r);je(()=>(c.set(t,{id:t,key:i,node:f,activatorNode:k,data:E}),()=>{let H=c.get(t);H&&H.key===i&&c.delete(t)}),[c,t]);let P=(0,y.useMemo)(()=>({role:v,tabIndex:d,"aria-disabled":n,"aria-pressed":g&&v===Yi?!0:void 0,"aria-roledescription":R,"aria-describedby":m.draggable}),[n,v,d,g,R,m.draggable]);return{active:l,activatorEvent:a,activeNodeRect:u,attributes:P,isDragging:g,listeners:n?void 0:T,node:f,over:p,setNodeRef:b,setActivatorNodeRef:N,transform:x}}function to(){return(0,y.useContext)(pa)}var Rc="Droppable",Nc={timeout:25};function sn(e){let{data:t,disabled:r=!1,id:n,resizeObserverConfig:o}=e,i=It(Rc),{active:s,dispatch:a,over:l,measureDroppableContainers:u}=(0,y.useContext)(Dr),m=(0,y.useRef)({disabled:r}),c=(0,y.useRef)(!1),p=(0,y.useRef)(null),v=(0,y.useRef)(null),{disabled:R,updateMeasurementsFor:d,timeout:g}={...Nc,...o},x=qt(d??n),f=(0,y.useCallback)(()=>{if(!c.current){c.current=!0;return}v.current!=null&&clearTimeout(v.current),v.current=setTimeout(()=>{u(Array.isArray(x.current)?x.current:[x.current]),v.current=null},g)},[g]),b=on({callback:f,disabled:R||!s}),k=(0,y.useCallback)((P,H)=>{b&&(H&&(b.unobserve(H),c.current=!1),P&&b.observe(P))},[b]),[N,T]=xr(k),E=qt(t);return(0,y.useEffect)(()=>{!b||!N.current||(b.disconnect(),c.current=!1,b.observe(N.current))},[N,b]),(0,y.useEffect)(()=>(a({type:we.RegisterDroppable,element:{id:n,key:i,disabled:r,node:N,rect:p,data:E}}),()=>a({type:we.UnregisterDroppable,key:i,id:n})),[n]),(0,y.useEffect)(()=>{r!==m.current.disabled&&(a({type:we.SetDroppableDisabled,id:n,key:i,disabled:r}),m.current.disabled=r)},[n,i,r,a]),{active:s,rect:p,isOver:l?.id===n,node:N,over:l,setNodeRef:T}}function kc(e){let{animation:t,children:r}=e,[n,o]=(0,y.useState)(null),[i,s]=(0,y.useState)(null),a=wr(r);return!r&&!n&&a&&o(a),je(()=>{if(!i)return;let l=n?.key,u=n?.props.id;if(l==null||u==null){o(null);return}Promise.resolve(t(u,i)).then(()=>{o(null)})},[t,n,i]),y.default.createElement(y.default.Fragment,null,r,n?(0,y.cloneElement)(n,{ref:s}):null)}var Dc={x:0,y:0,scaleX:1,scaleY:1};function Ec(e){let{children:t}=e;return y.default.createElement(Dr.Provider,{value:ma},y.default.createElement(an.Provider,{value:Dc},t))}var Ic={position:"fixed",touchAction:"none"},Tc=e=>Zt(e)?"transform 250ms ease":void 0,Pc=(0,y.forwardRef)((e,t)=>{let{as:r,activatorEvent:n,adjustScale:o,children:i,className:s,rect:a,style:l,transform:u,transition:m=Tc}=e;if(!a)return null;let c=o?u:{...u,scaleX:1,scaleY:1},p={...Ic,width:a.width,height:a.height,top:a.top,left:a.left,transform:ze.Transform.toString(c),transformOrigin:o&&n?El(n,a):void 0,transition:typeof m=="function"?m(n):m,...l};return y.default.createElement(r,{className:s,style:p,ref:t},i)}),Ac=e=>t=>{let{active:r,dragOverlay:n}=t,o={},{styles:i,className:s}=e;if(i!=null&&i.active)for(let[a,l]of Object.entries(i.active))l!==void 0&&(o[a]=r.node.style.getPropertyValue(a),r.node.style.setProperty(a,l));if(i!=null&&i.dragOverlay)for(let[a,l]of Object.entries(i.dragOverlay))l!==void 0&&n.node.style.setProperty(a,l);return s!=null&&s.active&&r.node.classList.add(s.active),s!=null&&s.dragOverlay&&n.node.classList.add(s.dragOverlay),function(){for(let[l,u]of Object.entries(o))r.node.style.setProperty(l,u);s!=null&&s.active&&r.node.classList.remove(s.active)}},Mc=e=>{let{transform:{initial:t,final:r}}=e;return[{transform:ze.Transform.toString(t)},{transform:ze.Transform.toString(r)}]},Oc={duration:250,easing:"ease",keyframes:Mc,sideEffects:Ac({styles:{active:{opacity:"0"}}})};function _c(e){let{config:t,draggableNodes:r,droppableContainers:n,measuringConfiguration:o}=e;return br((i,s)=>{if(t===null)return;let a=r.get(i);if(!a)return;let l=a.node.current;if(!l)return;let u=fa(s);if(!u)return;let{transform:m}=Ie(s).getComputedStyle(s),c=ra(m);if(!c)return;let p=typeof t=="function"?t:Lc(t);return ca(l,o.draggable.measure),p({active:{id:i,data:a.data,node:l,rect:o.draggable.measure(l)},draggableNodes:r,dragOverlay:{node:s,rect:o.dragOverlay.measure(u)},droppableContainers:n,measuringConfiguration:o,transform:c})})}function Lc(e){let{duration:t,easing:r,sideEffects:n,keyframes:o}={...Oc,...e};return i=>{let{active:s,dragOverlay:a,transform:l,...u}=i;if(!t)return;let m={x:a.rect.left-s.rect.left,y:a.rect.top-s.rect.top},c={scaleX:l.scaleX!==1?s.rect.width*l.scaleX/a.rect.width:1,scaleY:l.scaleY!==1?s.rect.height*l.scaleY/a.rect.height:1},p={x:l.x-m.x,y:l.y-m.y,...c},v=o({...u,active:s,dragOverlay:a,transform:{initial:l,final:p}}),[R]=v,d=v[v.length-1];if(JSON.stringify(R)===JSON.stringify(d))return;let g=n?.({active:s,dragOverlay:a,...u}),x=a.node.animate(v,{duration:t,easing:r,fill:"forwards"});return new Promise(f=>{x.onfinish=()=>{g?.(),f()}})}}var qi=0;function Bc(e){return(0,y.useMemo)(()=>{if(e!=null)return qi++,qi},[e])}var ya=y.default.memo(e=>{let{adjustScale:t=!1,children:r,dropAnimation:n,style:o,transition:i,modifiers:s,wrapperElement:a="div",className:l,zIndex:u=999}=e,{activatorEvent:m,active:c,activeNodeRect:p,containerNodeRect:v,draggableNodes:R,droppableContainers:d,dragOverlay:g,over:x,measuringConfiguration:f,scrollableAncestors:b,scrollableAncestorRects:k,windowRect:N}=to(),T=(0,y.useContext)(an),E=Bc(c?.id),P=ha(s,{activatorEvent:m,active:c,activeNodeRect:p,containerNodeRect:v,draggingNodeRect:g.rect,over:x,overlayNodeRect:g.rect,scrollableAncestors:b,scrollableAncestorRects:k,transform:T,windowRect:N}),H=eo(p),z=_c({config:n,draggableNodes:R,droppableContainers:d,measuringConfiguration:f}),B=H?g.setRef:void 0;return y.default.createElement(Ec,null,y.default.createElement(kc,{animation:z},c&&E?y.default.createElement(Pc,{key:E,id:c.id,ref:B,as:a,activatorEvent:m,adjustScale:t,className:l,transition:i,rect:H,style:{zIndex:u,...o},transform:P},r):null))});var pe=F(ie());function ba(e,t,r){let n=e.slice();return n.splice(r<0?n.length+r:r,0,n.splice(t,1)[0]),n}function Fc(e,t){return e.reduce((r,n,o)=>{let i=t.get(n);return i&&(r[o]=i),r},Array(e.length))}function ln(e){return e!==null&&e>=0}function zc(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function jc(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}var cn={scaleX:1,scaleY:1},xa=e=>{var t;let{rects:r,activeNodeRect:n,activeIndex:o,overIndex:i,index:s}=e,a=(t=r[o])!=null?t:n;if(!a)return null;let l=Wc(r,s,o);if(s===o){let u=r[i];return u?{x:o<i?u.left+u.width-(a.left+a.width):u.left-a.left,y:0,...cn}:null}return s>o&&s<=i?{x:-a.width-l,y:0,...cn}:s<o&&s>=i?{x:a.width+l,y:0,...cn}:{x:0,y:0,...cn}};function Wc(e,t,r){let n=e[t],o=e[t-1],i=e[t+1];return!n||!o&&!i?0:r<t?o?n.left-(o.left+o.width):i.left-(n.left+n.width):i?i.left-(n.left+n.width):n.left-(o.left+o.width)}var wa=e=>{let{rects:t,activeIndex:r,overIndex:n,index:o}=e,i=ba(t,n,r),s=t[o],a=i[o];return!a||!s?null:{x:a.left-s.left,y:a.top-s.top,scaleX:a.width/s.width,scaleY:a.height/s.height}};var Sa="Sortable",Ca=pe.default.createContext({activeIndex:-1,containerId:Sa,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:wa,disabled:{draggable:!1,droppable:!1}});function Ra(e){let{children:t,id:r,items:n,strategy:o=wa,disabled:i=!1}=e,{active:s,dragOverlay:a,droppableRects:l,over:u,measureDroppableContainers:m}=to(),c=It(Sa,r),p=a.rect!==null,v=(0,pe.useMemo)(()=>n.map(T=>typeof T=="object"&&"id"in T?T.id:T),[n]),R=s!=null,d=s?v.indexOf(s.id):-1,g=u?v.indexOf(u.id):-1,x=(0,pe.useRef)(v),f=!zc(v,x.current),b=g!==-1&&d===-1||f,k=jc(i);je(()=>{f&&R&&m(v)},[f,v,R,m]),(0,pe.useEffect)(()=>{x.current=v},[v]);let N=(0,pe.useMemo)(()=>({activeIndex:d,containerId:c,disabled:k,disableTransforms:b,items:v,overIndex:g,useDragOverlay:p,sortedRects:Fc(v,l),strategy:o}),[d,c,k.draggable,k.droppable,b,v,g,l,p,o]);return pe.default.createElement(Ca.Provider,{value:N},t)}var Hc=e=>{let{id:t,items:r,activeIndex:n,overIndex:o}=e;return ba(r,n,o).indexOf(t)},Uc=e=>{let{containerId:t,isSorting:r,wasDragging:n,index:o,items:i,newIndex:s,previousItems:a,previousContainerId:l,transition:u}=e;return!u||!n||a!==i&&o===s?!1:r?!0:s!==o&&t===l},Vc={duration:200,easing:"ease"},Na="transform",Kc=ze.Transition.toString({property:Na,duration:0,easing:"linear"}),$c={roleDescription:"sortable"};function Gc(e){let{disabled:t,index:r,node:n,rect:o}=e,[i,s]=(0,pe.useState)(null),a=(0,pe.useRef)(r);return je(()=>{if(!t&&r!==a.current&&n.current){let l=o.current;if(l){let u=_t(n.current,{ignoreTransform:!0}),m={x:l.left-u.left,y:l.top-u.top,scaleX:l.width/u.width,scaleY:l.height/u.height};(m.x||m.y)&&s(m)}}r!==a.current&&(a.current=r)},[t,r,n,o]),(0,pe.useEffect)(()=>{i&&s(null)},[i]),i}function un(e){let{animateLayoutChanges:t=Uc,attributes:r,disabled:n,data:o,getNewIndex:i=Hc,id:s,strategy:a,resizeObserverConfig:l,transition:u=Vc}=e,{items:m,containerId:c,activeIndex:p,disabled:v,disableTransforms:R,sortedRects:d,overIndex:g,useDragOverlay:x,strategy:f}=(0,pe.useContext)(Ca),b=Xc(n,v),k=m.indexOf(s),N=(0,pe.useMemo)(()=>({sortable:{containerId:c,index:k,items:m},...o}),[c,o,k,m]),T=(0,pe.useMemo)(()=>m.slice(m.indexOf(s)),[m,s]),{rect:E,node:P,isOver:H,setNodeRef:z}=sn({id:s,data:N,disabled:b.droppable,resizeObserverConfig:{updateMeasurementsFor:T,...l}}),{active:B,activatorEvent:U,activeNodeRect:Q,attributes:re,setNodeRef:ue,listeners:se,isDragging:V,over:Y,setActivatorNodeRef:ne,transform:Se}=va({id:s,data:N,attributes:{...$c,...r},disabled:b.draggable}),Ae=Ai(z,ue),de=!!B,De=de&&!R&&ln(p)&&ln(g),Ce=!x&&V,S=Ce&&De?Se:null,M=De?S??(a??f)({rects:d,activeNodeRect:Q,activeIndex:p,overIndex:g,index:k}):null,X=ln(p)&&ln(g)?i({id:s,items:m,activeIndex:p,overIndex:g}):k,oe=B?.id,A=(0,pe.useRef)({activeId:oe,items:m,newIndex:X,containerId:c}),K=m!==A.current.items,G=t({active:B,containerId:c,isDragging:V,isSorting:de,id:s,index:k,items:m,newIndex:A.current.newIndex,previousItems:A.current.items,previousContainerId:A.current.containerId,transition:u,wasDragging:A.current.activeId!=null}),Ee=Gc({disabled:!G,index:k,node:P,rect:E});return(0,pe.useEffect)(()=>{de&&A.current.newIndex!==X&&(A.current.newIndex=X),c!==A.current.containerId&&(A.current.containerId=c),m!==A.current.items&&(A.current.items=m)},[de,X,c,m]),(0,pe.useEffect)(()=>{if(oe===A.current.activeId)return;if(oe!=null&&A.current.activeId==null){A.current.activeId=oe;return}let Me=setTimeout(()=>{A.current.activeId=oe},50);return()=>clearTimeout(Me)},[oe]),{active:B,activeIndex:p,attributes:re,data:N,rect:E,index:k,newIndex:X,items:m,isOver:H,isSorting:de,isDragging:V,listeners:se,node:P,overIndex:g,over:Y,setNodeRef:Ae,setActivatorNodeRef:ne,setDroppableNodeRef:z,setDraggableNodeRef:ue,transform:Ee??M,transition:be()};function be(){if(Ee||K&&A.current.newIndex===k)return Kc;if(!(Ce&&!Zt(U)||!u)&&(de||G))return ze.Transition.toString({...u,property:Na})}}function Xc(e,t){var r,n;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e?.draggable)!=null?r:t.draggable,droppable:(n=e?.droppable)!=null?n:t.droppable}}var Rd=[$.Down,$.Right,$.Up,$.Left];var I=F(xe(),1);function Er({task:e,isDragOverlay:t=!1,className:r,onClick:n,bulkMode:o=!1,isSelected:i=!1,onSelect:s}){let{attributes:a,listeners:l,setNodeRef:u,transform:m,transition:c,isDragging:p}=un({id:e.id,data:{type:"task",task:e},disabled:t}),v={transform:ze.Transform.toString(m),transition:c},R=()=>{switch(e.priority){case"critical":return"border-l-krushr-priority-critical bg-red-50/30";case"high":return"border-l-krushr-priority-high bg-red-50/30";case"medium":return"border-l-krushr-priority-medium bg-orange-50/30";case"low":return"border-l-krushr-priority-low bg-green-50/30";default:return"border-l-gray-300 bg-white"}},d=()=>{switch(e.priority){case"critical":return"bg-krushr-priority-critical/10 text-krushr-priority-critical border-krushr-priority-critical/20 font-medium";case"high":return"bg-krushr-priority-high/10 text-krushr-priority-high border-krushr-priority-high/20 font-medium";case"medium":return"bg-krushr-priority-medium/10 text-krushr-priority-medium border-krushr-priority-medium/20 font-medium";case"low":return"bg-krushr-priority-low/10 text-krushr-priority-low border-krushr-priority-low/20 font-medium";default:return"bg-gray-100 text-gray-700 border-gray-200"}},g=e.dueDate&&new Date(e.dueDate)<new Date,x=e.dueDate&&new Date(e.dueDate)>new Date&&new Date(e.dueDate)<new Date(Date.now()+24*60*60*1e3);return(0,I.jsx)(Kt,{ref:u,style:v,onClick:n,onKeyDown:f=>{(f.key==="Enter"||f.key===" ")&&(f.preventDefault(),n?.())},className:j("cursor-grab active:cursor-grabbing transition-all duration-200 hover:shadow-md border-l-4 group","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","min-h-[44px] touch-manipulation",R(),p&&"opacity-50 rotate-2 shadow-lg",t&&"rotate-2 shadow-xl",i&&"ring-2 ring-krushr-primary bg-krushr-primary-50",o&&"cursor-pointer",r),role:"button",tabIndex:0,"aria-label":`Task: ${e.title}${e.description?` - ${e.description.substring(0,50)}...`:""}`,...a,...l,children:(0,I.jsxs)(Fr,{className:"p-4",children:[(0,I.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[o&&(0,I.jsx)("div",{className:"mr-2",children:(0,I.jsx)("input",{type:"checkbox",checked:i,onChange:f=>{f.stopPropagation(),s?.()},className:"w-5 h-5 min-w-[20px] min-h-[20px] text-krushr-primary border-krushr-gray-300 rounded focus:ring-krushr-primary focus:ring-2","aria-label":`Select task: ${e.title}`,tabIndex:0})}),(0,I.jsx)("h4",{className:"font-medium text-gray-900 line-clamp-2 flex-1 font-brand",children:e.title}),(0,I.jsx)("button",{className:"w-8 h-8 bg-krushr-gray-light text-krushr-gray-dark rounded-md flex items-center justify-center hover:bg-krushr-gray transition-colors opacity-0 group-hover:opacity-100 ml-2","aria-label":`More options for ${e.title}`,tabIndex:0,children:(0,I.jsx)(ri,{className:"w-4 h-4"})})]}),e.description&&(0,I.jsx)("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2 font-manrope",children:e.description}),e.attachments&&e.attachments.length>0&&(()=>{let f=e.attachments.filter(b=>b.mimeType?.startsWith("image/")&&b.thumbnailUrl);return f.length>0?(0,I.jsx)("div",{className:"mb-3",children:(0,I.jsxs)("div",{className:"flex flex-wrap gap-1",children:[f.slice(0,3).map(b=>(0,I.jsx)("img",{src:b.thumbnailUrl,alt:b.filename,className:"w-12 h-12 rounded object-cover border border-gray-200"},b.id)),f.length>3&&(0,I.jsx)("div",{className:"w-12 h-12 rounded border border-gray-200 bg-gray-100 flex items-center justify-center",children:(0,I.jsxs)("span",{className:"text-xs text-gray-600 font-medium font-manrope",children:["+",f.length-3]})})]})}):null})(),(0,I.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 font-manrope",children:[(0,I.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,I.jsx)(Re,{variant:"outline",className:j("capitalize font-manrope px-2 py-1 text-xs font-medium",d()),role:"status","aria-label":`Priority: ${e.priority}`,children:e.priority}),e.dueDate&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("span",{className:"text-gray-300",children:"\u2022"}),(0,I.jsxs)("div",{className:j("flex items-center space-x-1",g&&"text-krushr-secondary",x&&"text-amber-600"),children:[g?(0,I.jsx)(Wr,{className:"w-3 h-3"}):(0,I.jsx)(zr,{className:"w-3 h-3"}),(0,I.jsx)("span",{className:"font-medium",children:Jo(e.dueDate)})]})]})]}),(0,I.jsxs)("div",{className:"flex items-center space-x-1.5",children:[(e._count?.comments||0)>0&&(0,I.jsxs)("div",{className:"flex items-center space-x-1 text-gray-500",children:[(0,I.jsx)(ci,{className:"w-3 h-3"}),(0,I.jsx)("span",{children:e._count.comments})]}),(e._count?.attachments||0)>0&&(0,I.jsxs)("div",{className:"flex items-center space-x-1 text-gray-500",children:[(0,I.jsx)(Ur,{className:"w-3 h-3"}),(0,I.jsx)("span",{children:e._count.attachments})]}),e.checklists&&e.checklists.length>0&&(()=>{let f=e.checklists.reduce((k,N)=>k+(N.items?.length||0),0),b=e.checklists.reduce((k,N)=>k+(N.items?.filter(T=>T.completed).length||0),0);return f>0?(0,I.jsxs)("div",{className:j("flex items-center space-x-1",b===f?"text-emerald-600":"text-gray-500"),children:[(0,I.jsx)(fi,{className:"w-3 h-3"}),(0,I.jsxs)("span",{children:[b,"/",f]})]}):null})()]})]}),e.assignee&&(0,I.jsx)("div",{className:"flex items-center justify-between mt-2 pt-2 border-t border-gray-100",children:(0,I.jsxs)("div",{className:"flex items-center space-x-2 min-w-0 flex-1",children:[(0,I.jsxs)(Nt,{className:"w-5 h-5 border border-white",children:[(0,I.jsx)(Yr,{src:e.assignee.avatar||void 0}),(0,I.jsx)(kt,{className:"text-[10px] bg-gradient-to-br from-krushr-secondary to-krushr-secondary/80 text-white font-medium",children:e.assignee.name.split(" ").map(f=>f[0]).join("").toUpperCase()})]}),(0,I.jsx)("span",{className:"text-xs text-gray-600 truncate",children:e.assignee.name}),(0,I.jsx)("span",{className:"text-gray-300 text-xs",children:"\u2022"}),(0,I.jsxs)("div",{className:"flex items-center space-x-1 text-gray-400",children:[(0,I.jsx)($t,{className:"w-3 h-3"}),(0,I.jsxs)("span",{className:"text-xs",children:[e.estimatedHours||0,"h"]})]}),e.tags&&e.tags.length>0&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("span",{className:"text-gray-300 text-xs",children:"\u2022"}),(0,I.jsxs)("div",{className:"flex items-center space-x-1",children:[e.tags.slice(0,2).map(f=>(0,I.jsx)(Re,{variant:"secondary",className:"px-1.5 py-0.5 text-xs font-medium",children:typeof f=="string"?f:f.name},typeof f=="string"?f:f.id)),e.tags.length>2&&(0,I.jsxs)(Re,{variant:"secondary",className:"px-1.5 py-0.5 text-xs font-medium",children:["+",e.tags.length-2]})]})]})]})}),!e.assignee&&(0,I.jsx)("div",{className:"flex items-center mt-2 pt-2 border-t border-gray-100",children:(0,I.jsxs)("div",{className:"flex items-center space-x-2 text-gray-400",children:[(0,I.jsx)(pr,{className:"w-3 h-3"}),(0,I.jsx)("span",{className:"text-xs",children:"Unassigned"}),(0,I.jsx)("span",{className:"text-gray-300 text-xs",children:"\u2022"}),(0,I.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,I.jsx)($t,{className:"w-3 h-3"}),(0,I.jsxs)("span",{className:"text-xs",children:[e.estimatedHours||0,"h"]})]}),e.tags&&e.tags.length>0&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("span",{className:"text-gray-300 text-xs",children:"\u2022"}),(0,I.jsxs)("div",{className:"flex items-center space-x-1",children:[e.tags.slice(0,2).map(f=>(0,I.jsx)(Re,{variant:"secondary",className:"px-1.5 py-0.5 text-xs font-medium",children:typeof f=="string"?f:f.name},typeof f=="string"?f:f.id)),e.tags.length>2&&(0,I.jsxs)(Re,{variant:"secondary",className:"px-1.5 py-0.5 text-xs font-medium",children:["+",e.tags.length-2]})]})]})]})})]})})}var ye=F(xe(),1);function ro({column:e,tasks:t,taskCount:r,className:n,onTaskClick:o,onAddTask:i,bulkMode:s=!1,selectedTasks:a=new Set,onTaskSelect:l,onEditColumn:u,onDeleteColumn:m}){let{attributes:c,listeners:p,setNodeRef:v,transform:R,transition:d,isDragging:g}=un({id:e.id,data:{type:"column",column:e}}),{setNodeRef:x,isOver:f}=sn({id:e.id,data:{type:"column",accepts:["task"]}}),b={transform:ze.Transform.toString(R),transition:d},k=()=>{if(e.color)return"";if(e.isCompletedColumn)return"bg-emerald-500";let N=["bg-gray-500","bg-krushr-secondary","bg-amber-500","bg-emerald-500"];return N[e.position%N.length]||"bg-krushr-blue"};return(0,ye.jsx)("div",{ref:N=>{v(N),x(N)},style:b,className:j("flex flex-col w-80 h-full transition-all duration-200",g&&"opacity-50 scale-105",f&&"ring-2 ring-krushr-secondary ring-opacity-50",n),...c,children:(0,ye.jsxs)(Kt,{className:j("flex flex-col h-full bg-white transition-all duration-200",f&&"bg-krushr-secondary/5 border-krushr-secondary/20"),children:[(0,ye.jsx)(Qo,{className:"flex-shrink-0 py-2 cursor-grab active:cursor-grabbing",...p,children:(0,ye.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ye.jsxs)("div",{className:"flex items-center space-x-2 min-w-0 flex-1",children:[(0,ye.jsx)("div",{className:j("w-3 h-3 rounded-full border flex-shrink-0",!e.color&&k()),style:e.color?{backgroundColor:e.color}:{},role:"presentation","aria-hidden":"true"}),(0,ye.jsx)("h3",{className:"font-semibold text-gray-900 text-sm truncate font-brand",role:"heading","aria-level":"3",children:e.title}),(0,ye.jsxs)(Re,{variant:"secondary",className:j("text-xs min-h-[18px] px-1.5 flex-shrink-0 bg-krushr-coral-red text-white",e.wipLimit&&r>e.wipLimit&&"bg-red-100 text-red-700 border-red-200"),role:"status","aria-label":`${r} tasks${e.wipLimit?` out of ${e.wipLimit} limit`:""}`,children:[r,e.wipLimit?`/${e.wipLimit}`:""]}),e.wipLimit&&r>e.wipLimit&&(0,ye.jsx)(Re,{variant:"outline",className:"text-xs text-red-700 border-red-200 px-1.5 py-0 flex-shrink-0 font-manrope",children:"WIP!"}),e.isCompletedColumn&&(0,ye.jsx)(Re,{variant:"outline",className:"text-xs text-green-700 border-green-200 px-1.5 py-0 flex-shrink-0 font-manrope",children:"\u2713"})]}),(0,ye.jsxs)("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[(0,ye.jsx)(Vr,{className:"w-4 h-4 text-krushr-gray-500 hover:text-krushr-primary cursor-pointer transition-colors",onClick:u,title:"Column settings"}),(0,ye.jsx)(ut,{className:"w-4 h-4 text-krushr-gray-500 hover:text-krushr-primary cursor-pointer transition-colors",onClick:i,title:"Add task"})]})]})}),(0,ye.jsx)(Fr,{className:"flex-1 p-3 pt-0 overflow-y-auto",children:(0,ye.jsxs)("div",{className:"space-y-3",children:[t.map(N=>(0,ye.jsx)(Er,{task:N,onClick:()=>o?.(N.id),bulkMode:s,isSelected:a.has(N.id),onSelect:()=>l?.(N.id)},N.id)),(0,ye.jsxs)(fe,{variant:"ghost",className:j("w-full h-12 min-h-[44px] border-2 border-dashed transition-all duration-200","border-gray-200 hover:border-krushr-secondary/30 hover:bg-krushr-secondary/5","focus:border-krushr-secondary/50 focus:bg-krushr-secondary/10 focus:ring-2 focus:ring-krushr-secondary","text-gray-500 hover:text-krushr-secondary focus:text-krushr-secondary","touch-manipulation",f&&"border-krushr-secondary/50 bg-krushr-secondary/10 text-krushr-secondary"),onClick:i,"aria-label":`Add new task to ${e.title} column`,tabIndex:0,children:[(0,ye.jsx)(ut,{className:"w-5 h-5 mr-2"}),"Add a task"]})]})})]})})}function tr(e,t){let r=ve(e),n=ve(t),o=r.getTime()-n.getTime();return o<0?-1:o>0?1:o}function ka(e,t){let r=ve(e),n=ve(t),o=r.getFullYear()-n.getFullYear(),i=r.getMonth()-n.getMonth();return o*12+i}function Da(e){return t=>{let n=(e?Math[e]:Math.trunc)(t);return n===0?0:n}}function Ea(e,t){return+ve(e)-+ve(t)}function Ia(e){let t=ve(e);return+Ri(t)==+Ni(t)}function Ta(e,t){let r=ve(e),n=ve(t),o=tr(r,n),i=Math.abs(ka(r,n)),s;if(i<1)s=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-o*i);let a=tr(r,n)===-o;Ia(ve(e))&&i===1&&tr(e,n)===1&&(a=!1),s=o*(i-Number(a))}return s===0?0:s}function Pa(e,t,r){let n=Ea(e,t)/1e3;return Da(r?.roundingMethod)(n)}function Aa(e,t,r){let n=Si(),o=r?.locale??n.locale??ki,i=2520,s=tr(e,t);if(isNaN(s))throw new RangeError("Invalid time value");let a=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:s}),l,u;s>0?(l=ve(t),u=ve(e)):(l=ve(e),u=ve(t));let m=Pa(u,l),c=(Wn(u)-Wn(l))/1e3,p=Math.round((m-c)/60),v;if(p<2)return r?.includeSeconds?m<5?o.formatDistance("lessThanXSeconds",5,a):m<10?o.formatDistance("lessThanXSeconds",10,a):m<20?o.formatDistance("lessThanXSeconds",20,a):m<40?o.formatDistance("halfAMinute",0,a):m<60?o.formatDistance("lessThanXMinutes",1,a):o.formatDistance("xMinutes",1,a):p===0?o.formatDistance("lessThanXMinutes",1,a):o.formatDistance("xMinutes",p,a);if(p<45)return o.formatDistance("xMinutes",p,a);if(p<90)return o.formatDistance("aboutXHours",1,a);if(p<jn){let R=Math.round(p/60);return o.formatDistance("aboutXHours",R,a)}else{if(p<i)return o.formatDistance("xDays",1,a);if(p<vr){let R=Math.round(p/jn);return o.formatDistance("xDays",R,a)}else if(p<vr*2)return v=Math.round(p/vr),o.formatDistance("aboutXMonths",v,a)}if(v=Ta(u,l),v<12){let R=Math.round(p/vr);return o.formatDistance("xMonths",R,a)}else{let R=v%12,d=Math.trunc(v/12);return R<3?o.formatDistance("aboutXYears",d,a):R<9?o.formatDistance("overXYears",d,a):o.formatDistance("almostXYears",d+1,a)}}function dn(e,t){return Aa(e,Ci(e),t)}var yt=F(ie(),1);var Or=F(ie(),1);var Z=F(ie(),1);var $e=F(ie(),1);var Ba=F(xe(),1),no="focusScope.autoFocusOnMount",oo="focusScope.autoFocusOnUnmount",Ma={bubbles:!1,cancelable:!0},Yc="FocusScope",Ir=$e.forwardRef((e,t)=>{let{loop:r=!1,trapped:n=!1,onMountAutoFocus:o,onUnmountAutoFocus:i,...s}=e,[a,l]=$e.useState(null),u=gr(o),m=gr(i),c=$e.useRef(null),p=ge(t,d=>l(d)),v=$e.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;$e.useEffect(()=>{if(n){let f=function(T){if(v.paused||!a)return;let E=T.target;a.contains(E)?c.current=E:mt(c.current,{select:!0})},b=function(T){if(v.paused||!a)return;let E=T.relatedTarget;E!==null&&(a.contains(E)||mt(c.current,{select:!0}))},k=function(T){if(document.activeElement===document.body)for(let P of T)P.removedNodes.length>0&&mt(a)};var d=f,g=b,x=k;document.addEventListener("focusin",f),document.addEventListener("focusout",b);let N=new MutationObserver(k);return a&&N.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",f),document.removeEventListener("focusout",b),N.disconnect()}}},[n,a,v.paused]),$e.useEffect(()=>{if(a){_a.add(v);let d=document.activeElement;if(!a.contains(d)){let x=new CustomEvent(no,Ma);a.addEventListener(no,u),a.dispatchEvent(x),x.defaultPrevented||(qc(tu(Fa(a)),{select:!0}),document.activeElement===d&&mt(a))}return()=>{a.removeEventListener(no,u),setTimeout(()=>{let x=new CustomEvent(oo,Ma);a.addEventListener(oo,m),a.dispatchEvent(x),x.defaultPrevented||mt(d??document.body,{select:!0}),a.removeEventListener(oo,m),_a.remove(v)},0)}}},[a,u,m,v]);let R=$e.useCallback(d=>{if(!r&&!n||v.paused)return;let g=d.key==="Tab"&&!d.altKey&&!d.ctrlKey&&!d.metaKey,x=document.activeElement;if(g&&x){let f=d.currentTarget,[b,k]=Jc(f);b&&k?!d.shiftKey&&x===k?(d.preventDefault(),r&&mt(b,{select:!0})):d.shiftKey&&x===b&&(d.preventDefault(),r&&mt(k,{select:!0})):x===f&&d.preventDefault()}},[r,n,v.paused]);return(0,Ba.jsx)(ce.div,{tabIndex:-1,...s,ref:p,onKeyDown:R})});Ir.displayName=Yc;function qc(e,{select:t=!1}={}){let r=document.activeElement;for(let n of e)if(mt(n,{select:t}),document.activeElement!==r)return}function Jc(e){let t=Fa(e),r=Oa(t,e),n=Oa(t.reverse(),e);return[r,n]}function Fa(e){let t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{let o=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||o?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Oa(e,t){for(let r of e)if(!Qc(r,{upTo:t}))return r}function Qc(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Zc(e){return e instanceof HTMLInputElement&&"select"in e}function mt(e,{select:t=!1}={}){if(e&&e.focus){let r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&Zc(e)&&t&&e.select()}}var _a=eu();function eu(){let e=[];return{add(t){let r=e[0];t!==r&&r?.pause(),e=La(e,t),e.unshift(t)},remove(t){e=La(e,t),e[0]?.resume()}}}function La(e,t){let r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function tu(e){return e.filter(t=>t.tagName!=="A")}var ja=F(ie(),1),io=0;function fn(){ja.useEffect(()=>{let e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??za()),document.body.insertAdjacentElement("beforeend",e[1]??za()),io++,()=>{io===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),io--}},[])}function za(){let e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var _e=function(){return _e=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},_e.apply(this,arguments)};function mn(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function Pf(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function a(m){try{u(n.next(m))}catch(c){s(c)}}function l(m){try{u(n.throw(m))}catch(c){s(c)}}function u(m){m.done?i(m.value):o(m.value).then(a,l)}u((n=n.apply(e,t||[])).next())})}function Wa(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var yn=F(ie());var Te=F(ie());var Lt="right-scroll-bar-position",Bt="width-before-scroll-bar",ao="with-scroll-bars-hidden",so="--removed-body-scroll-bar-size";function pn(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}var Ha=F(ie());function Ua(e,t){var r=(0,Ha.useState)(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var o=r.value;o!==n&&(r.value=n,r.callback(n,o))}}}})[0];return r.callback=t,r.facade}var hn=F(ie());var ru=typeof window<"u"?hn.useLayoutEffect:hn.useEffect,Va=new WeakMap;function lo(e,t){var r=Ua(t||null,function(n){return e.forEach(function(o){return pn(o,n)})});return ru(function(){var n=Va.get(r);if(n){var o=new Set(n),i=new Set(e),s=r.current;o.forEach(function(a){i.has(a)||pn(a,null)}),i.forEach(function(a){o.has(a)||pn(a,s)})}Va.set(r,e)},[e]),r}function nu(e){return e}function ou(e,t){t===void 0&&(t=nu);var r=[],n=!1,o={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var s=t(i,n);return r.push(s),function(){r=r.filter(function(a){return a!==s})}},assignSyncMedium:function(i){for(n=!0;r.length;){var s=r;r=[],s.forEach(i)}r={push:function(a){return i(a)},filter:function(){return r}}},assignMedium:function(i){n=!0;var s=[];if(r.length){var a=r;r=[],a.forEach(i),s=r}var l=function(){var m=s;s=[],m.forEach(i)},u=function(){return Promise.resolve().then(l)};u(),r={push:function(m){s.push(m),u()},filter:function(m){return s=s.filter(m),r}}}};return o}function co(e){e===void 0&&(e={});var t=ou(null);return t.options=_e({async:!0,ssr:!1},e),t}var Ka=F(ie()),$a=function(e){var t=e.sideCar,r=mn(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return Ka.createElement(n,_e({},r))};$a.isSideCarExport=!0;function uo(e,t){return e.useMedium(t),$a}var gn=co();var fo=function(){},Tr=Te.forwardRef(function(e,t){var r=Te.useRef(null),n=Te.useState({onScrollCapture:fo,onWheelCapture:fo,onTouchMoveCapture:fo}),o=n[0],i=n[1],s=e.forwardProps,a=e.children,l=e.className,u=e.removeScrollBar,m=e.enabled,c=e.shards,p=e.sideCar,v=e.noRelative,R=e.noIsolation,d=e.inert,g=e.allowPinchZoom,x=e.as,f=x===void 0?"div":x,b=e.gapMode,k=mn(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=p,T=lo([r,t]),E=_e(_e({},k),o);return Te.createElement(Te.Fragment,null,m&&Te.createElement(N,{sideCar:gn,removeScrollBar:u,shards:c,noRelative:v,noIsolation:R,inert:d,setCallbacks:i,allowPinchZoom:!!g,lockRef:r,gapMode:b}),s?Te.cloneElement(Te.Children.only(a),_e(_e({},E),{ref:T})):Te.createElement(f,_e({},E,{className:l,ref:T}),a))});Tr.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Tr.classNames={fullWidth:Bt,zeroRight:Lt};var te=F(ie());var nr=F(ie());var Ya=F(ie());var Ga;var Xa=function(){if(Ga)return Ga;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function iu(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Xa();return t&&e.setAttribute("nonce",t),e}function au(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function su(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var mo=function(){var e=0,t=null;return{add:function(r){e==0&&(t=iu())&&(au(t,r),su(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}};var po=function(){var e=mo();return function(t,r){Ya.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}};var Pr=function(){var e=po(),t=function(r){var n=r.styles,o=r.dynamic;return e(n,o),null};return t};var lu={left:0,top:0,right:0,gap:0},ho=function(e){return parseInt(e||"",10)||0},cu=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[ho(r),ho(n),ho(o)]},go=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return lu;var t=cu(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}};var uu=Pr(),rr="data-scroll-locked",du=function(e,t,r,n){var o=e.left,i=e.top,s=e.right,a=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(ao,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(a,"px ").concat(n,`;
  }
  body[`).concat(rr,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(a,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Lt,` {
    right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(Bt,` {
    margin-right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(Lt," .").concat(Lt,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Bt," .").concat(Bt,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(rr,`] {
    `).concat(so,": ").concat(a,`px;
  }
`)},qa=function(){var e=parseInt(document.body.getAttribute(rr)||"0",10);return isFinite(e)?e:0},fu=function(){nr.useEffect(function(){return document.body.setAttribute(rr,(qa()+1).toString()),function(){var e=qa()-1;e<=0?document.body.removeAttribute(rr):document.body.setAttribute(rr,e.toString())}},[])},vo=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,o=n===void 0?"margin":n;fu();var i=nr.useMemo(function(){return go(o)},[o]);return nr.createElement(uu,{styles:du(i,!t,o,r?"":"!important")})};var yo=!1;if(typeof window<"u")try{Ar=Object.defineProperty({},"passive",{get:function(){return yo=!0,!0}}),window.addEventListener("test",Ar,Ar),window.removeEventListener("test",Ar,Ar)}catch{yo=!1}var Ar,Ft=yo?{passive:!1}:!1;var mu=function(e){return e.tagName==="TEXTAREA"},Ja=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!mu(e)&&r[t]==="visible")},pu=function(e){return Ja(e,"overflowY")},hu=function(e){return Ja(e,"overflowX")},bo=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var o=Qa(e,n);if(o){var i=Za(e,n),s=i[1],a=i[2];if(s>a)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},gu=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},vu=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},Qa=function(e,t){return e==="v"?pu(t):hu(t)},Za=function(e,t){return e==="v"?gu(t):vu(t)},yu=function(e,t){return e==="h"&&t==="rtl"?-1:1},es=function(e,t,r,n,o){var i=yu(e,window.getComputedStyle(t).direction),s=i*n,a=r.target,l=t.contains(a),u=!1,m=s>0,c=0,p=0;do{if(!a)break;var v=Za(e,a),R=v[0],d=v[1],g=v[2],x=d-g-i*R;(R||x)&&Qa(e,a)&&(c+=x,p+=R);var f=a.parentNode;a=f&&f.nodeType===Node.DOCUMENT_FRAGMENT_NODE?f.host:f}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(m&&(o&&Math.abs(c)<1||!o&&s>c)||!m&&(o&&Math.abs(p)<1||!o&&-s>p))&&(u=!0),u};var vn=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},ts=function(e){return[e.deltaX,e.deltaY]},rs=function(e){return e&&"current"in e?e.current:e},bu=function(e,t){return e[0]===t[0]&&e[1]===t[1]},xu=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},wu=0,or=[];function ns(e){var t=te.useRef([]),r=te.useRef([0,0]),n=te.useRef(),o=te.useState(wu++)[0],i=te.useState(Pr)[0],s=te.useRef(e);te.useEffect(function(){s.current=e},[e]),te.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var d=Wa([e.lockRef.current],(e.shards||[]).map(rs),!0).filter(Boolean);return d.forEach(function(g){return g.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),d.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var a=te.useCallback(function(d,g){if("touches"in d&&d.touches.length===2||d.type==="wheel"&&d.ctrlKey)return!s.current.allowPinchZoom;var x=vn(d),f=r.current,b="deltaX"in d?d.deltaX:f[0]-x[0],k="deltaY"in d?d.deltaY:f[1]-x[1],N,T=d.target,E=Math.abs(b)>Math.abs(k)?"h":"v";if("touches"in d&&E==="h"&&T.type==="range")return!1;var P=bo(E,T);if(!P)return!0;if(P?N=E:(N=E==="v"?"h":"v",P=bo(E,T)),!P)return!1;if(!n.current&&"changedTouches"in d&&(b||k)&&(n.current=N),!N)return!0;var H=n.current||N;return es(H,g,d,H==="h"?b:k,!0)},[]),l=te.useCallback(function(d){var g=d;if(!(!or.length||or[or.length-1]!==i)){var x="deltaY"in g?ts(g):vn(g),f=t.current.filter(function(N){return N.name===g.type&&(N.target===g.target||g.target===N.shadowParent)&&bu(N.delta,x)})[0];if(f&&f.should){g.cancelable&&g.preventDefault();return}if(!f){var b=(s.current.shards||[]).map(rs).filter(Boolean).filter(function(N){return N.contains(g.target)}),k=b.length>0?a(g,b[0]):!s.current.noIsolation;k&&g.cancelable&&g.preventDefault()}}},[]),u=te.useCallback(function(d,g,x,f){var b={name:d,delta:g,target:x,should:f,shadowParent:Su(x)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(k){return k!==b})},1)},[]),m=te.useCallback(function(d){r.current=vn(d),n.current=void 0},[]),c=te.useCallback(function(d){u(d.type,ts(d),d.target,a(d,e.lockRef.current))},[]),p=te.useCallback(function(d){u(d.type,vn(d),d.target,a(d,e.lockRef.current))},[]);te.useEffect(function(){return or.push(i),e.setCallbacks({onScrollCapture:c,onWheelCapture:c,onTouchMoveCapture:p}),document.addEventListener("wheel",l,Ft),document.addEventListener("touchmove",l,Ft),document.addEventListener("touchstart",m,Ft),function(){or=or.filter(function(d){return d!==i}),document.removeEventListener("wheel",l,Ft),document.removeEventListener("touchmove",l,Ft),document.removeEventListener("touchstart",m,Ft)}},[]);var v=e.removeScrollBar,R=e.inert;return te.createElement(te.Fragment,null,R?te.createElement(i,{styles:xu(o)}):null,v?te.createElement(vo,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Su(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}var os=uo(gn,ns);var is=yn.forwardRef(function(e,t){return yn.createElement(Tr,_e({},e,{ref:t,sideCar:os}))});is.classNames=Tr.classNames;var Mr=is;var Cu=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},ir=new WeakMap,bn=new WeakMap,xn={},xo=0,as=function(e){return e&&(e.host||as(e.parentNode))},Ru=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=as(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},Nu=function(e,t,r,n){var o=Ru(t,Array.isArray(e)?e:[e]);xn[r]||(xn[r]=new WeakMap);var i=xn[r],s=[],a=new Set,l=new Set(o),u=function(c){!c||a.has(c)||(a.add(c),u(c.parentNode))};o.forEach(u);var m=function(c){!c||l.has(c)||Array.prototype.forEach.call(c.children,function(p){if(a.has(p))m(p);else try{var v=p.getAttribute(n),R=v!==null&&v!=="false",d=(ir.get(p)||0)+1,g=(i.get(p)||0)+1;ir.set(p,d),i.set(p,g),s.push(p),d===1&&R&&bn.set(p,!0),g===1&&p.setAttribute(r,"true"),R||p.setAttribute(n,"true")}catch(x){console.error("aria-hidden: cannot operate on ",p,x)}})};return m(t),a.clear(),xo++,function(){s.forEach(function(c){var p=ir.get(c)-1,v=i.get(c)-1;ir.set(c,p),i.set(c,v),p||(bn.has(c)||c.removeAttribute(n),bn.delete(c)),v||c.removeAttribute(r)}),xo--,xo||(ir=new WeakMap,ir=new WeakMap,bn=new WeakMap,xn={})}},wn=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),o=t||Cu(e);return o?(n.push.apply(n,Array.from(o.querySelectorAll("[aria-live], script"))),Nu(n,o,r,"aria-hidden")):function(){return null}};var J=F(xe(),1),Cn="Dialog",[ss,tp]=Gt(Cn),[ku,Xe]=ss(Cn),ls=e=>{let{__scopeDialog:t,children:r,open:n,defaultOpen:o,onOpenChange:i,modal:s=!0}=e,a=Z.useRef(null),l=Z.useRef(null),[u,m]=hr({prop:n,defaultProp:o??!1,onChange:i,caller:Cn});return(0,J.jsx)(ku,{scope:t,triggerRef:a,contentRef:l,contentId:dt(),titleId:dt(),descriptionId:dt(),open:u,onOpenChange:m,onOpenToggle:Z.useCallback(()=>m(c=>!c),[m]),modal:s,children:r})};ls.displayName=Cn;var cs="DialogTrigger",us=Z.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,o=Xe(cs,r),i=ge(t,o.triggerRef);return(0,J.jsx)(ce.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Co(o.open),...n,ref:i,onClick:ae(e.onClick,o.onOpenToggle)})});us.displayName=cs;var wo="DialogPortal",[Du,ds]=ss(wo,{forceMount:void 0}),fs=e=>{let{__scopeDialog:t,forceMount:r,children:n,container:o}=e,i=Xe(wo,t);return(0,J.jsx)(Du,{scope:t,forceMount:r,children:Z.Children.map(n,s=>(0,J.jsx)(Xr,{present:r||i.open,children:(0,J.jsx)(Gr,{asChild:!0,container:o,children:s})}))})};fs.displayName=wo;var Sn="DialogOverlay",ms=Z.forwardRef((e,t)=>{let r=ds(Sn,e.__scopeDialog),{forceMount:n=r.forceMount,...o}=e,i=Xe(Sn,e.__scopeDialog);return i.modal?(0,J.jsx)(Xr,{present:n||i.open,children:(0,J.jsx)(Iu,{...o,ref:t})}):null});ms.displayName=Sn;var Eu=St("DialogOverlay.RemoveScroll"),Iu=Z.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,o=Xe(Sn,r);return(0,J.jsx)(Mr,{as:Eu,allowPinchZoom:!0,shards:[o.contentRef],children:(0,J.jsx)(ce.div,{"data-state":Co(o.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),zt="DialogContent",ps=Z.forwardRef((e,t)=>{let r=ds(zt,e.__scopeDialog),{forceMount:n=r.forceMount,...o}=e,i=Xe(zt,e.__scopeDialog);return(0,J.jsx)(Xr,{present:n||i.open,children:i.modal?(0,J.jsx)(Tu,{...o,ref:t}):(0,J.jsx)(Pu,{...o,ref:t})})});ps.displayName=zt;var Tu=Z.forwardRef((e,t)=>{let r=Xe(zt,e.__scopeDialog),n=Z.useRef(null),o=ge(t,r.contentRef,n);return Z.useEffect(()=>{let i=n.current;if(i)return wn(i)},[]),(0,J.jsx)(hs,{...e,ref:o,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ae(e.onCloseAutoFocus,i=>{i.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:ae(e.onPointerDownOutside,i=>{let s=i.detail.originalEvent,a=s.button===0&&s.ctrlKey===!0;(s.button===2||a)&&i.preventDefault()}),onFocusOutside:ae(e.onFocusOutside,i=>i.preventDefault())})}),Pu=Z.forwardRef((e,t)=>{let r=Xe(zt,e.__scopeDialog),n=Z.useRef(!1),o=Z.useRef(!1);return(0,J.jsx)(hs,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{e.onCloseAutoFocus?.(i),i.defaultPrevented||(n.current||r.triggerRef.current?.focus(),i.preventDefault()),n.current=!1,o.current=!1},onInteractOutside:i=>{e.onInteractOutside?.(i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(o.current=!0));let s=i.target;r.triggerRef.current?.contains(s)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&o.current&&i.preventDefault()}})}),hs=Z.forwardRef((e,t)=>{let{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:o,onCloseAutoFocus:i,...s}=e,a=Xe(zt,r),l=Z.useRef(null),u=ge(t,l);return fn(),(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(Ir,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:o,onUnmountAutoFocus:i,children:(0,J.jsx)($r,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":Co(a.open),...s,ref:u,onDismiss:()=>a.onOpenChange(!1)})}),(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(Au,{titleId:a.titleId}),(0,J.jsx)(Ou,{contentRef:l,descriptionId:a.descriptionId})]})]})}),So="DialogTitle",gs=Z.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,o=Xe(So,r);return(0,J.jsx)(ce.h2,{id:o.titleId,...n,ref:t})});gs.displayName=So;var vs="DialogDescription",ys=Z.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,o=Xe(vs,r);return(0,J.jsx)(ce.p,{id:o.descriptionId,...n,ref:t})});ys.displayName=vs;var bs="DialogClose",xs=Z.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,o=Xe(bs,r);return(0,J.jsx)(ce.button,{type:"button",...n,ref:t,onClick:ae(e.onClick,()=>o.onOpenChange(!1))})});xs.displayName=bs;function Co(e){return e?"open":"closed"}var ws="DialogTitleWarning",[rp,Ss]=hi(ws,{contentName:zt,titleName:So,docsSlug:"dialog"}),Au=({titleId:e})=>{let t=Ss(ws),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return Z.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},Mu="DialogDescriptionWarning",Ou=({contentRef:e,descriptionId:t})=>{let n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Ss(Mu).contentName}}.`;return Z.useEffect(()=>{let o=e.current?.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},Cs=ls,Rs=us,Ns=fs,Ro=ms,No=ps,ko=gs,Do=ys,ks=xs;var We=F(xe(),1),Ds=Cs,ap=Rs;var Lu=Ns,Es=Or.forwardRef(({className:e,...t},r)=>(0,We.jsx)(Ro,{className:j("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));Es.displayName=Ro.displayName;var Bu=qo("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Eo=Or.forwardRef(({side:e="right",className:t,children:r,hideOverlay:n=!1,...o},i)=>(0,We.jsxs)(Lu,{children:[!n&&(0,We.jsx)(Es,{}),(0,We.jsxs)(No,{ref:i,className:j(Bu({side:e}),t),...o,children:[(0,We.jsxs)(ks,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,We.jsx)(Kr,{className:"h-4 w-4"}),(0,We.jsx)("span",{className:"sr-only",children:"Close"})]}),r]})]}));Eo.displayName=No.displayName;var Io=({className:e,...t})=>(0,We.jsx)("div",{className:j("flex flex-col space-y-2 text-center sm:text-left",e),...t});Io.displayName="SheetHeader";var Fu=({className:e,...t})=>(0,We.jsx)("div",{className:j("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Fu.displayName="SheetFooter";var To=Or.forwardRef(({className:e,...t},r)=>(0,We.jsx)(ko,{ref:r,className:j("text-lg font-semibold text-foreground",e),...t}));To.displayName=ko.displayName;var zu=Or.forwardRef(({className:e,...t},r)=>(0,We.jsx)(Do,{ref:r,className:j("text-sm text-muted-foreground",e),...t}));zu.displayName=Do.displayName;var vt=F(ie(),1);var D=F(ie(),1),Lo=F(Yo(),1);var pt=F(ie(),1);var Rn=F(xe(),1),ju=F(ie(),1);var Wu=F(xe(),1);function Is(e){let t=e+"CollectionProvider",[r,n]=Gt(t),[o,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),s=d=>{let{scope:g,children:x}=d,f=pt.default.useRef(null),b=pt.default.useRef(new Map).current;return(0,Rn.jsx)(o,{scope:g,itemMap:b,collectionRef:f,children:x})};s.displayName=t;let a=e+"CollectionSlot",l=St(a),u=pt.default.forwardRef((d,g)=>{let{scope:x,children:f}=d,b=i(a,x),k=ge(g,b.collectionRef);return(0,Rn.jsx)(l,{ref:k,children:f})});u.displayName=a;let m=e+"CollectionItemSlot",c="data-radix-collection-item",p=St(m),v=pt.default.forwardRef((d,g)=>{let{scope:x,children:f,...b}=d,k=pt.default.useRef(null),N=ge(g,k),T=i(m,x);return pt.default.useEffect(()=>(T.itemMap.set(k,{ref:k,...b}),()=>void T.itemMap.delete(k))),(0,Rn.jsx)(p,{[c]:"",ref:N,children:f})});v.displayName=m;function R(d){let g=i(e+"CollectionConsumer",d);return pt.default.useCallback(()=>{let f=g.collectionRef.current;if(!f)return[];let b=Array.from(f.querySelectorAll(`[${c}]`));return Array.from(g.itemMap.values()).sort((T,E)=>b.indexOf(T.ref.current)-b.indexOf(E.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:s,Slot:u,ItemSlot:v},R,n]}var Nn=F(ie(),1);function Ts(e){let t=Nn.useRef({value:e,previous:e});return Nn.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var O=F(xe(),1),Hu=[" ","Enter","ArrowUp","ArrowDown"],Uu=[" ","Enter"],jt="Select",[Dn,En,Vu]=Is(jt),[ar,_p]=Gt(jt,[Vu,zn]),In=zn(),[Ku,ht]=ar(jt),[$u,Gu]=ar(jt),Ps=e=>{let{__scopeSelect:t,children:r,open:n,defaultOpen:o,onOpenChange:i,value:s,defaultValue:a,onValueChange:l,dir:u,name:m,autoComplete:c,disabled:p,required:v,form:R}=e,d=In(t),[g,x]=D.useState(null),[f,b]=D.useState(null),[k,N]=D.useState(!1),T=gi(u),[E,P]=hr({prop:n,defaultProp:o??!1,onChange:i,caller:jt}),[H,z]=hr({prop:s,defaultProp:a,onChange:l,caller:jt}),B=D.useRef(null),U=g?R||!!g.closest("form"):!0,[Q,re]=D.useState(new Set),ue=Array.from(Q).map(se=>se.props.value).join(";");return(0,O.jsx)(vi,{...d,children:(0,O.jsxs)(Ku,{required:v,scope:t,trigger:g,onTriggerChange:x,valueNode:f,onValueNodeChange:b,valueNodeHasChildren:k,onValueNodeHasChildrenChange:N,contentId:dt(),value:H,onValueChange:z,open:E,onOpenChange:P,dir:T,triggerPointerDownPosRef:B,disabled:p,children:[(0,O.jsx)(Dn.Provider,{scope:t,children:(0,O.jsx)($u,{scope:e.__scopeSelect,onNativeOptionAdd:D.useCallback(se=>{re(V=>new Set(V).add(se))},[]),onNativeOptionRemove:D.useCallback(se=>{re(V=>{let Y=new Set(V);return Y.delete(se),Y})},[]),children:r})}),U?(0,O.jsxs)(tl,{"aria-hidden":!0,required:v,tabIndex:-1,name:m,autoComplete:c,value:H,onChange:se=>z(se.target.value),disabled:p,form:R,children:[H===void 0?(0,O.jsx)("option",{value:""}):null,Array.from(Q)]},ue):null]})})};Ps.displayName=jt;var As="SelectTrigger",Ms=D.forwardRef((e,t)=>{let{__scopeSelect:r,disabled:n=!1,...o}=e,i=In(r),s=ht(As,r),a=s.disabled||n,l=ge(t,s.onTriggerChange),u=En(r),m=D.useRef("touch"),[c,p,v]=nl(d=>{let g=u().filter(b=>!b.disabled),x=g.find(b=>b.value===s.value),f=ol(g,d,x);f!==void 0&&s.onValueChange(f.value)}),R=d=>{a||(s.onOpenChange(!0),v()),d&&(s.triggerPointerDownPosRef.current={x:Math.round(d.pageX),y:Math.round(d.pageY)})};return(0,O.jsx)(yi,{asChild:!0,...i,children:(0,O.jsx)(ce.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":rl(s.value)?"":void 0,...o,ref:l,onClick:ae(o.onClick,d=>{d.currentTarget.focus(),m.current!=="mouse"&&R(d)}),onPointerDown:ae(o.onPointerDown,d=>{m.current=d.pointerType;let g=d.target;g.hasPointerCapture(d.pointerId)&&g.releasePointerCapture(d.pointerId),d.button===0&&d.ctrlKey===!1&&d.pointerType==="mouse"&&(R(d),d.preventDefault())}),onKeyDown:ae(o.onKeyDown,d=>{let g=c.current!=="";!(d.ctrlKey||d.altKey||d.metaKey)&&d.key.length===1&&p(d.key),!(g&&d.key===" ")&&Hu.includes(d.key)&&(R(),d.preventDefault())})})})});Ms.displayName=As;var Os="SelectValue",_s=D.forwardRef((e,t)=>{let{__scopeSelect:r,className:n,style:o,children:i,placeholder:s="",...a}=e,l=ht(Os,r),{onValueNodeHasChildrenChange:u}=l,m=i!==void 0,c=ge(t,l.onValueNodeChange);return ot(()=>{u(m)},[u,m]),(0,O.jsx)(ce.span,{...a,ref:c,style:{pointerEvents:"none"},children:rl(l.value)?(0,O.jsx)(O.Fragment,{children:s}):i})});_s.displayName=Os;var Xu="SelectIcon",Ls=D.forwardRef((e,t)=>{let{__scopeSelect:r,children:n,...o}=e;return(0,O.jsx)(ce.span,{"aria-hidden":!0,...o,ref:t,children:n||"\u25BC"})});Ls.displayName=Xu;var Yu="SelectPortal",Bs=e=>(0,O.jsx)(Gr,{asChild:!0,...e});Bs.displayName=Yu;var Wt="SelectContent",Fs=D.forwardRef((e,t)=>{let r=ht(Wt,e.__scopeSelect),[n,o]=D.useState();if(ot(()=>{o(new DocumentFragment)},[]),!r.open){let i=n;return i?Lo.createPortal((0,O.jsx)(zs,{scope:e.__scopeSelect,children:(0,O.jsx)(Dn.Slot,{scope:e.__scopeSelect,children:(0,O.jsx)("div",{children:e.children})})}),i):null}return(0,O.jsx)(js,{...e,ref:t})});Fs.displayName=Wt;var Ye=10,[zs,gt]=ar(Wt),qu="SelectContentImpl",Ju=St("SelectContent.RemoveScroll"),js=D.forwardRef((e,t)=>{let{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:i,onPointerDownOutside:s,side:a,sideOffset:l,align:u,alignOffset:m,arrowPadding:c,collisionBoundary:p,collisionPadding:v,sticky:R,hideWhenDetached:d,avoidCollisions:g,...x}=e,f=ht(Wt,r),[b,k]=D.useState(null),[N,T]=D.useState(null),E=ge(t,M=>k(M)),[P,H]=D.useState(null),[z,B]=D.useState(null),U=En(r),[Q,re]=D.useState(!1),ue=D.useRef(!1);D.useEffect(()=>{if(b)return wn(b)},[b]),fn();let se=D.useCallback(M=>{let[X,...oe]=U().map(G=>G.ref.current),[A]=oe.slice(-1),K=document.activeElement;for(let G of M)if(G===K||(G?.scrollIntoView({block:"nearest"}),G===X&&N&&(N.scrollTop=0),G===A&&N&&(N.scrollTop=N.scrollHeight),G?.focus(),document.activeElement!==K))return},[U,N]),V=D.useCallback(()=>se([P,b]),[se,P,b]);D.useEffect(()=>{Q&&V()},[Q,V]);let{onOpenChange:Y,triggerPointerDownPosRef:ne}=f;D.useEffect(()=>{if(b){let M={x:0,y:0},X=A=>{M={x:Math.abs(Math.round(A.pageX)-(ne.current?.x??0)),y:Math.abs(Math.round(A.pageY)-(ne.current?.y??0))}},oe=A=>{M.x<=10&&M.y<=10?A.preventDefault():b.contains(A.target)||Y(!1),document.removeEventListener("pointermove",X),ne.current=null};return ne.current!==null&&(document.addEventListener("pointermove",X),document.addEventListener("pointerup",oe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",X),document.removeEventListener("pointerup",oe,{capture:!0})}}},[b,Y,ne]),D.useEffect(()=>{let M=()=>Y(!1);return window.addEventListener("blur",M),window.addEventListener("resize",M),()=>{window.removeEventListener("blur",M),window.removeEventListener("resize",M)}},[Y]);let[Se,Ae]=nl(M=>{let X=U().filter(K=>!K.disabled),oe=X.find(K=>K.ref.current===document.activeElement),A=ol(X,M,oe);A&&setTimeout(()=>A.ref.current.focus())}),de=D.useCallback((M,X,oe)=>{let A=!ue.current&&!oe;(f.value!==void 0&&f.value===X||A)&&(H(M),A&&(ue.current=!0))},[f.value]),De=D.useCallback(()=>b?.focus(),[b]),Ce=D.useCallback((M,X,oe)=>{let A=!ue.current&&!oe;(f.value!==void 0&&f.value===X||A)&&B(M)},[f.value]),S=n==="popper"?Po:Ws,q=S===Po?{side:a,sideOffset:l,align:u,alignOffset:m,arrowPadding:c,collisionBoundary:p,collisionPadding:v,sticky:R,hideWhenDetached:d,avoidCollisions:g}:{};return(0,O.jsx)(zs,{scope:r,content:b,viewport:N,onViewportChange:T,itemRefCallback:de,selectedItem:P,onItemLeave:De,itemTextRefCallback:Ce,focusSelectedItem:V,selectedItemText:z,position:n,isPositioned:Q,searchRef:Se,children:(0,O.jsx)(Mr,{as:Ju,allowPinchZoom:!0,children:(0,O.jsx)(Ir,{asChild:!0,trapped:f.open,onMountAutoFocus:M=>{M.preventDefault()},onUnmountAutoFocus:ae(o,M=>{f.trigger?.focus({preventScroll:!0}),M.preventDefault()}),children:(0,O.jsx)($r,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:M=>M.preventDefault(),onDismiss:()=>f.onOpenChange(!1),children:(0,O.jsx)(S,{role:"listbox",id:f.contentId,"data-state":f.open?"open":"closed",dir:f.dir,onContextMenu:M=>M.preventDefault(),...x,...q,onPlaced:()=>re(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:ae(x.onKeyDown,M=>{let X=M.ctrlKey||M.altKey||M.metaKey;if(M.key==="Tab"&&M.preventDefault(),!X&&M.key.length===1&&Ae(M.key),["ArrowUp","ArrowDown","Home","End"].includes(M.key)){let A=U().filter(K=>!K.disabled).map(K=>K.ref.current);if(["ArrowUp","End"].includes(M.key)&&(A=A.slice().reverse()),["ArrowUp","ArrowDown"].includes(M.key)){let K=M.target,G=A.indexOf(K);A=A.slice(G+1)}setTimeout(()=>se(A)),M.preventDefault()}})})})})})})});js.displayName=qu;var Qu="SelectItemAlignedPosition",Ws=D.forwardRef((e,t)=>{let{__scopeSelect:r,onPlaced:n,...o}=e,i=ht(Wt,r),s=gt(Wt,r),[a,l]=D.useState(null),[u,m]=D.useState(null),c=ge(t,E=>m(E)),p=En(r),v=D.useRef(!1),R=D.useRef(!0),{viewport:d,selectedItem:g,selectedItemText:x,focusSelectedItem:f}=s,b=D.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&u&&d&&g&&x){let E=i.trigger.getBoundingClientRect(),P=u.getBoundingClientRect(),H=i.valueNode.getBoundingClientRect(),z=x.getBoundingClientRect();if(i.dir!=="rtl"){let K=z.left-P.left,G=H.left-K,Ee=E.left-G,be=E.width+Ee,Me=Math.max(be,P.width),He=window.innerWidth-Ye,it=Fn(G,[Ye,Math.max(Ye,He-Me)]);a.style.minWidth=be+"px",a.style.left=it+"px"}else{let K=P.right-z.right,G=window.innerWidth-H.right-K,Ee=window.innerWidth-E.right-G,be=E.width+Ee,Me=Math.max(be,P.width),He=window.innerWidth-Ye,it=Fn(G,[Ye,Math.max(Ye,He-Me)]);a.style.minWidth=be+"px",a.style.right=it+"px"}let B=p(),U=window.innerHeight-Ye*2,Q=d.scrollHeight,re=window.getComputedStyle(u),ue=parseInt(re.borderTopWidth,10),se=parseInt(re.paddingTop,10),V=parseInt(re.borderBottomWidth,10),Y=parseInt(re.paddingBottom,10),ne=ue+se+Q+Y+V,Se=Math.min(g.offsetHeight*5,ne),Ae=window.getComputedStyle(d),de=parseInt(Ae.paddingTop,10),De=parseInt(Ae.paddingBottom,10),Ce=E.top+E.height/2-Ye,S=U-Ce,q=g.offsetHeight/2,M=g.offsetTop+q,X=ue+se+M,oe=ne-X;if(X<=Ce){let K=B.length>0&&g===B[B.length-1].ref.current;a.style.bottom="0px";let G=u.clientHeight-d.offsetTop-d.offsetHeight,Ee=Math.max(S,q+(K?De:0)+G+V),be=X+Ee;a.style.height=be+"px"}else{let K=B.length>0&&g===B[0].ref.current;a.style.top="0px";let Ee=Math.max(Ce,ue+d.offsetTop+(K?de:0)+q)+oe;a.style.height=Ee+"px",d.scrollTop=X-Ce+d.offsetTop}a.style.margin=`${Ye}px 0`,a.style.minHeight=Se+"px",a.style.maxHeight=U+"px",n?.(),requestAnimationFrame(()=>v.current=!0)}},[p,i.trigger,i.valueNode,a,u,d,g,x,i.dir,n]);ot(()=>b(),[b]);let[k,N]=D.useState();ot(()=>{u&&N(window.getComputedStyle(u).zIndex)},[u]);let T=D.useCallback(E=>{E&&R.current===!0&&(b(),f?.(),R.current=!1)},[b,f]);return(0,O.jsx)(ed,{scope:r,contentWrapper:a,shouldExpandOnScrollRef:v,onScrollButtonChange:T,children:(0,O.jsx)("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:(0,O.jsx)(ce.div,{...o,ref:c,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});Ws.displayName=Qu;var Zu="SelectPopperPosition",Po=D.forwardRef((e,t)=>{let{__scopeSelect:r,align:n="start",collisionPadding:o=Ye,...i}=e,s=In(r);return(0,O.jsx)(bi,{...s,...i,ref:t,align:n,collisionPadding:o,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Po.displayName=Zu;var[ed,Bo]=ar(Wt,{}),Ao="SelectViewport",Hs=D.forwardRef((e,t)=>{let{__scopeSelect:r,nonce:n,...o}=e,i=gt(Ao,r),s=Bo(Ao,r),a=ge(t,i.onViewportChange),l=D.useRef(0);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),(0,O.jsx)(Dn.Slot,{scope:r,children:(0,O.jsx)(ce.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:ae(o.onScroll,u=>{let m=u.currentTarget,{contentWrapper:c,shouldExpandOnScrollRef:p}=s;if(p?.current&&c){let v=Math.abs(l.current-m.scrollTop);if(v>0){let R=window.innerHeight-Ye*2,d=parseFloat(c.style.minHeight),g=parseFloat(c.style.height),x=Math.max(d,g);if(x<R){let f=x+v,b=Math.min(R,f),k=f-b;c.style.height=b+"px",c.style.bottom==="0px"&&(m.scrollTop=k>0?k:0,c.style.justifyContent="flex-end")}}}l.current=m.scrollTop})})})]})});Hs.displayName=Ao;var Us="SelectGroup",[td,rd]=ar(Us),nd=D.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e,o=dt();return(0,O.jsx)(td,{scope:r,id:o,children:(0,O.jsx)(ce.div,{role:"group","aria-labelledby":o,...n,ref:t})})});nd.displayName=Us;var Vs="SelectLabel",Ks=D.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e,o=rd(Vs,r);return(0,O.jsx)(ce.div,{id:o.id,...n,ref:t})});Ks.displayName=Vs;var kn="SelectItem",[od,$s]=ar(kn),Gs=D.forwardRef((e,t)=>{let{__scopeSelect:r,value:n,disabled:o=!1,textValue:i,...s}=e,a=ht(kn,r),l=gt(kn,r),u=a.value===n,[m,c]=D.useState(i??""),[p,v]=D.useState(!1),R=ge(t,f=>l.itemRefCallback?.(f,n,o)),d=dt(),g=D.useRef("touch"),x=()=>{o||(a.onValueChange(n),a.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,O.jsx)(od,{scope:r,value:n,disabled:o,textId:d,isSelected:u,onItemTextChange:D.useCallback(f=>{c(b=>b||(f?.textContent??"").trim())},[]),children:(0,O.jsx)(Dn.ItemSlot,{scope:r,value:n,disabled:o,textValue:m,children:(0,O.jsx)(ce.div,{role:"option","aria-labelledby":d,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...s,ref:R,onFocus:ae(s.onFocus,()=>v(!0)),onBlur:ae(s.onBlur,()=>v(!1)),onClick:ae(s.onClick,()=>{g.current!=="mouse"&&x()}),onPointerUp:ae(s.onPointerUp,()=>{g.current==="mouse"&&x()}),onPointerDown:ae(s.onPointerDown,f=>{g.current=f.pointerType}),onPointerMove:ae(s.onPointerMove,f=>{g.current=f.pointerType,o?l.onItemLeave?.():g.current==="mouse"&&f.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ae(s.onPointerLeave,f=>{f.currentTarget===document.activeElement&&l.onItemLeave?.()}),onKeyDown:ae(s.onKeyDown,f=>{l.searchRef?.current!==""&&f.key===" "||(Uu.includes(f.key)&&x(),f.key===" "&&f.preventDefault())})})})})});Gs.displayName=kn;var _r="SelectItemText",Xs=D.forwardRef((e,t)=>{let{__scopeSelect:r,className:n,style:o,...i}=e,s=ht(_r,r),a=gt(_r,r),l=$s(_r,r),u=Gu(_r,r),[m,c]=D.useState(null),p=ge(t,x=>c(x),l.onItemTextChange,x=>a.itemTextRefCallback?.(x,l.value,l.disabled)),v=m?.textContent,R=D.useMemo(()=>(0,O.jsx)("option",{value:l.value,disabled:l.disabled,children:v},l.value),[l.disabled,l.value,v]),{onNativeOptionAdd:d,onNativeOptionRemove:g}=u;return ot(()=>(d(R),()=>g(R)),[d,g,R]),(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(ce.span,{id:l.textId,...i,ref:p}),l.isSelected&&s.valueNode&&!s.valueNodeHasChildren?Lo.createPortal(i.children,s.valueNode):null]})});Xs.displayName=_r;var Ys="SelectItemIndicator",qs=D.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e;return $s(Ys,r).isSelected?(0,O.jsx)(ce.span,{"aria-hidden":!0,...n,ref:t}):null});qs.displayName=Ys;var Mo="SelectScrollUpButton",Js=D.forwardRef((e,t)=>{let r=gt(Mo,e.__scopeSelect),n=Bo(Mo,e.__scopeSelect),[o,i]=D.useState(!1),s=ge(t,n.onScrollButtonChange);return ot(()=>{if(r.viewport&&r.isPositioned){let l=function(){let m=u.scrollTop>0;i(m)};var a=l;let u=r.viewport;return l(),u.addEventListener("scroll",l),()=>u.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),o?(0,O.jsx)(Zs,{...e,ref:s,onAutoScroll:()=>{let{viewport:a,selectedItem:l}=r;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});Js.displayName=Mo;var Oo="SelectScrollDownButton",Qs=D.forwardRef((e,t)=>{let r=gt(Oo,e.__scopeSelect),n=Bo(Oo,e.__scopeSelect),[o,i]=D.useState(!1),s=ge(t,n.onScrollButtonChange);return ot(()=>{if(r.viewport&&r.isPositioned){let l=function(){let m=u.scrollHeight-u.clientHeight,c=Math.ceil(u.scrollTop)<m;i(c)};var a=l;let u=r.viewport;return l(),u.addEventListener("scroll",l),()=>u.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),o?(0,O.jsx)(Zs,{...e,ref:s,onAutoScroll:()=>{let{viewport:a,selectedItem:l}=r;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});Qs.displayName=Oo;var Zs=D.forwardRef((e,t)=>{let{__scopeSelect:r,onAutoScroll:n,...o}=e,i=gt("SelectScrollButton",r),s=D.useRef(null),a=En(r),l=D.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return D.useEffect(()=>()=>l(),[l]),ot(()=>{a().find(m=>m.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[a]),(0,O.jsx)(ce.div,{"aria-hidden":!0,...o,ref:t,style:{flexShrink:0,...o.style},onPointerDown:ae(o.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(n,50))}),onPointerMove:ae(o.onPointerMove,()=>{i.onItemLeave?.(),s.current===null&&(s.current=window.setInterval(n,50))}),onPointerLeave:ae(o.onPointerLeave,()=>{l()})})}),id="SelectSeparator",el=D.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e;return(0,O.jsx)(ce.div,{"aria-hidden":!0,...n,ref:t})});el.displayName=id;var _o="SelectArrow",ad=D.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e,o=In(r),i=ht(_o,r),s=gt(_o,r);return i.open&&s.position==="popper"?(0,O.jsx)(xi,{...o,...n,ref:t}):null});ad.displayName=_o;var sd="SelectBubbleInput",tl=D.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{let o=D.useRef(null),i=ge(n,o),s=Ts(t);return D.useEffect(()=>{let a=o.current;if(!a)return;let l=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==t&&m){let c=new Event("change",{bubbles:!0});m.call(a,t),a.dispatchEvent(c)}},[s,t]),(0,O.jsx)(ce.select,{...r,style:{...wi,...r.style},ref:i,defaultValue:t})});tl.displayName=sd;function rl(e){return e===""||e===void 0}function nl(e){let t=gr(e),r=D.useRef(""),n=D.useRef(0),o=D.useCallback(s=>{let a=r.current+s;t(a),function l(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>l(""),1e3))}(a)},[t]),i=D.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return D.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,o,i]}function ol(e,t,r){let o=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1,s=ld(e,Math.max(i,0));o.length===1&&(s=s.filter(u=>u!==r));let l=s.find(u=>u.textValue.toLowerCase().startsWith(o.toLowerCase()));return l!==r?l:void 0}function ld(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var il=Ps,Fo=Ms,al=_s,sl=Ls,ll=Bs,zo=Fs,cl=Hs;var jo=Ks,Wo=Gs,ul=Xs,dl=qs,Ho=Js,Uo=Qs,Vo=el;var he=F(xe(),1),fl=il;var ml=al,Ko=vt.forwardRef(({className:e,children:t,...r},n)=>(0,he.jsxs)(Fo,{ref:n,className:j("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,(0,he.jsx)(sl,{asChild:!0,children:(0,he.jsx)(On,{className:"h-4 w-4 opacity-50"})})]}));Ko.displayName=Fo.displayName;var pl=vt.forwardRef(({className:e,...t},r)=>(0,he.jsx)(Ho,{ref:r,className:j("flex cursor-default items-center justify-center py-1",e),...t,children:(0,he.jsx)(Zo,{className:"h-4 w-4"})}));pl.displayName=Ho.displayName;var hl=vt.forwardRef(({className:e,...t},r)=>(0,he.jsx)(Uo,{ref:r,className:j("flex cursor-default items-center justify-center py-1",e),...t,children:(0,he.jsx)(On,{className:"h-4 w-4"})}));hl.displayName=Uo.displayName;var $o=vt.forwardRef(({className:e,children:t,position:r="popper",...n},o)=>(0,he.jsx)(ll,{children:(0,he.jsxs)(zo,{ref:o,className:j("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[(0,he.jsx)(pl,{}),(0,he.jsx)(cl,{className:j("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,he.jsx)(hl,{})]})}));$o.displayName=zo.displayName;var ud=vt.forwardRef(({className:e,...t},r)=>(0,he.jsx)(jo,{ref:r,className:j("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));ud.displayName=jo.displayName;var sr=vt.forwardRef(({className:e,children:t,...r},n)=>(0,he.jsxs)(Wo,{ref:n,className:j("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[(0,he.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,he.jsx)(dl,{children:(0,he.jsx)(jr,{className:"h-4 w-4"})})}),(0,he.jsx)(ul,{children:t})]}));sr.displayName=Wo.displayName;var dd=vt.forwardRef(({className:e,...t},r)=>(0,he.jsx)(Vo,{ref:r,className:j("-mx-1 my-1 h-px bg-muted",e),...t}));dd.displayName=Vo.displayName;var Go=F(ie(),1);var W=F(xe(),1),fd=e=>!e||typeof e!="string"?Bn:e.startsWith("image/")?oi:e.startsWith("video/")?ii:e.includes("pdf")||e.includes("document")||e.includes("text")?Hr:e.includes("zip")||e.includes("rar")||e.includes("7z")?ni:Bn,md=e=>!e||typeof e!="string"?"bg-gray-100 text-gray-700":e.startsWith("image/")?"bg-green-100 text-green-700":e.startsWith("video/")?"bg-purple-100 text-purple-700":e.startsWith("audio/")?"bg-pink-100 text-pink-700":e.includes("pdf")?"bg-red-100 text-red-700":e.includes("document")||e.includes("text")?"bg-blue-100 text-blue-700":e.includes("zip")||e.includes("rar")?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-700",gl=e=>{if(e===0)return"0 Bytes";let t=1024,r=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,n)).toFixed(1))+" "+r[n]},pd=e=>{let t=new Date(e),n=Math.abs(new Date().getTime()-t.getTime()),o=Math.ceil(n/(1e3*60*60*24));return o===1?"Today":o===2?"Yesterday":o<=7?`${o} days ago`:t.toLocaleDateString()},vl=({attachment:e,className:t})=>{let[r,n]=(0,Go.useState)(!1);if(!e.thumbnailUrl||r){let o=fd(e.mimeType),i=md(e.mimeType);return(0,W.jsx)("div",{className:j("flex items-center justify-center rounded-lg p-2",i,t),children:(0,W.jsx)(o,{className:"h-8 w-8"})})}return(0,W.jsx)("img",{src:e.thumbnailUrl,alt:e.filename,className:j("rounded-lg object-cover",t),onError:()=>n(!0),onLoad:()=>console.log(`\u2705 Thumbnail loaded: ${e.thumbnailUrl}`)})},hd=({attachments:e,canDelete:t=!1,onRefresh:r,className:n,compact:o=!1})=>{let[i,s]=(0,Go.useState)(null),a=ee.upload.deleteAttachment.useMutation({onSuccess:()=>{Xt.success("Attachment deleted successfully"),s(null),r?.()},onError:c=>{Xt.error(`Failed to delete: ${c.message}`),s(null)}});if(e.length===0)return null;let l=c=>{try{let p=document.createElement("a");p.href=c.downloadUrl,p.download=c.filename,p.target="_blank",document.body.appendChild(p),p.click(),document.body.removeChild(p),Xt.success("Download started")}catch{Xt.error("Download failed")}},u=c=>{c.mimeType.startsWith("image/")||c.mimeType==="application/pdf"?window.open(c.downloadUrl,"_blank","noopener,noreferrer"):Xt.info("Preview not available for this file type")},m=c=>{i||(s(c.id),a.mutate({attachmentId:c.id}))};return o?(0,W.jsx)("div",{className:j("flex flex-wrap gap-2",n),children:e.map(c=>{let p=i===c.id;return(0,W.jsxs)("div",{className:j("flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-lg text-sm",p&&"opacity-50"),children:[(0,W.jsx)(vl,{attachment:c,className:"h-8 w-8"}),(0,W.jsx)("span",{className:"font-medium truncate max-w-[150px]",children:c.filename}),(0,W.jsx)("span",{className:"text-gray-500",children:gl(c.size)}),c.compressed&&(0,W.jsx)(Re,{variant:"secondary",className:"text-xs",children:"Compressed"}),(0,W.jsxs)("div",{className:"flex items-center gap-1",children:[(c.mimeType.startsWith("image/")||c.mimeType==="application/pdf")&&(0,W.jsx)(fe,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>u(c),title:"Preview",disabled:p,children:(0,W.jsx)(Ln,{className:"h-3 w-3"})}),(0,W.jsx)(fe,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>l(c),title:"Download",disabled:p,children:(0,W.jsx)(_n,{className:"h-3 w-3"})}),t&&(0,W.jsx)(fe,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",onClick:()=>m(c),title:"Delete",disabled:p,children:(0,W.jsx)(Ct,{className:"h-3 w-3"})})]})]},c.id)})}):(0,W.jsxs)("div",{className:j("space-y-3",n),children:[(0,W.jsx)("div",{className:"flex items-center justify-between",children:(0,W.jsxs)("h4",{className:"text-sm font-medium text-gray-900",children:["Attachments (",e.length,")"]})}),(0,W.jsx)("div",{className:"space-y-2",children:e.map(c=>{let p=i===c.id;return(0,W.jsx)(Kt,{className:j("p-4",p&&"opacity-50"),children:(0,W.jsxs)("div",{className:"flex items-start gap-3",children:[(0,W.jsx)(vl,{attachment:c,className:"w-16 h-16 flex-shrink-0"}),(0,W.jsx)("div",{className:"flex-1 min-w-0",children:(0,W.jsxs)("div",{className:"flex items-start justify-between",children:[(0,W.jsx)("div",{className:"min-w-0 flex-1",children:(0,W.jsxs)("p",{className:"text-sm font-medium text-gray-900 truncate",children:[c.filename,(0,W.jsxs)("span",{className:"text-xs text-gray-500 font-normal ml-2",children:["\u2022 ",gl(c.size)," \u2022 ",pd(c.uploadedAt),c.compressed&&(0,W.jsxs)(W.Fragment,{children:[" ","\u2022 ",(0,W.jsx)(Re,{variant:"secondary",className:"text-xs inline",children:"Compressed"})]})]})]})}),(0,W.jsxs)("div",{className:"flex items-center gap-1 ml-2",children:[(c.mimeType.startsWith("image/")||c.mimeType==="application/pdf")&&(0,W.jsx)(fe,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>u(c),title:"Preview",disabled:p,children:(0,W.jsx)(Ln,{className:"h-4 w-4"})}),(0,W.jsx)(fe,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>l(c),title:"Download",disabled:p,children:(0,W.jsx)(_n,{className:"h-4 w-4"})}),t&&(0,W.jsx)(fe,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",onClick:()=>m(c),title:"Delete",disabled:p,children:(0,W.jsx)(Ct,{className:"h-4 w-4"})})]})]})})]})},c.id)})})]})},yl=hd;var h=F(xe(),1);function Xo({taskId:e,open:t,onClose:r,onUpdate:n}){let[o,i]=(0,yt.useState)(""),[s,a]=(0,yt.useState)(!1),[l,u]=(0,yt.useState)(!1),[m,c]=(0,yt.useState)(""),[p,v]=(0,yt.useState)(""),[R,d]=(0,yt.useState)(""),[g,x]=(0,yt.useState)(!1),{data:f,refetch:b}=ee.task.get.useQuery({id:e},{enabled:!!e,onSuccess:S=>{S&&(c(S.title||""),v(S.description||""))}}),{data:k=[],refetch:N}=ee.comment.list.useQuery({taskId:e},{enabled:!!e}),{data:T=[]}=ee.upload.getTaskAttachments.useQuery({taskId:e},{enabled:!!e}),{data:E=[]}=ee.activity.list.useQuery({taskId:e},{enabled:!!e}),{data:P=[],refetch:H}=ee.task.get.useQuery({id:e},{enabled:!!e,select:S=>S?.checklists||[]}),z=ee.comment.create.useMutation({onSuccess:()=>{i(""),N(),b()},onError:S=>{console.error("Failed to add comment:",S)}}),B=ee.task.update.useMutation({onSuccess:()=>{b(),n?.(),a(!1),u(!1)}}),U=ee.task.delete.useMutation({onSuccess:()=>{r(),n?.()}}),Q=ee.checklist.addItem.useMutation({onSuccess:()=>{b(),d("")}}),re=ee.checklist.updateItem.useMutation({onSuccess:()=>{b()}}),ue=ee.checklist.deleteItem.useMutation({onSuccess:()=>{b()}}),{refetch:se}=ee.upload.getTaskAttachments.useQuery({taskId:e},{enabled:!!e});if(!f)return null;let V=()=>{o.trim()&&z.mutate({taskId:e,content:o})},Y=S=>{B.mutate({id:e,status:S})},ne=S=>{B.mutate({id:e,priority:S})},Se=()=>{m.trim()&&m!==f?.title?B.mutate({id:e,title:m.trim()}):(a(!1),c(f?.title||""))},Ae=()=>{p!==f?.description?B.mutate({id:e,description:p}):(u(!1),v(f?.description||""))},de=S=>({low:"text-green-500 bg-green-50 border-green-200",medium:"text-orange-500 bg-orange-50 border-orange-200",high:"text-red-500 bg-red-50 border-red-200"})[S],De=S=>{switch(S){case"DONE":return(0,h.jsx)(ei,{className:"w-4 h-4 text-green-500"});case"IN_PROGRESS":return(0,h.jsx)(Wr,{className:"w-4 h-4 text-blue-500"});default:return(0,h.jsx)(ti,{className:"w-4 h-4 text-gray-400"})}},Ce=S=>S.startsWith("image/")?(0,h.jsx)(li,{className:"w-4 h-4"}):(0,h.jsx)(Hr,{className:"w-4 h-4"});return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(Ds,{open:t,onOpenChange:r,children:(0,h.jsxs)(Eo,{className:"w-full sm:max-w-2xl overflow-y-auto shadow-krushr-modal",hideOverlay:!0,children:[(0,h.jsx)(Io,{className:"space-y-0 pb-6 border-b border-krushr-panel-border",children:(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[s?(0,h.jsx)(Rt,{label:"Task title",value:m,onChange:S=>c(S.target.value),onBlur:Se,onKeyDown:S=>{S.key==="Enter"&&(S.preventDefault(),Se()),S.key==="Escape"&&(a(!1),c(f?.title||""))},className:"text-xl font-semibold border-none shadow-none px-0 focus-visible:ring-0",autoFocus:!0}):(0,h.jsx)(To,{className:"text-xl font-semibold text-krushr-gray-dark cursor-pointer hover:bg-krushr-gray-50 px-2 py-1 rounded-md transition-colors font-brand",onClick:()=>{c(f?.title||""),a(!0)},children:f.title}),(0,h.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,h.jsx)(fe,{variant:"outline",size:"sm",onClick:()=>x(!0),className:"text-krushr-primary border-krushr-primary hover:bg-krushr-primary hover:text-white",children:"Edit Task"}),(0,h.jsx)(fe,{variant:"ghost",size:"sm",onClick:()=>{confirm("Are you sure you want to delete this task?")&&U.mutate({id:e})},children:(0,h.jsx)(Ct,{className:"w-4 h-4"})})]})]})}),(0,h.jsxs)("div",{className:"mt-6 space-y-6 font-brand",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between bg-krushr-gray-50 p-4 rounded-lg border border-krushr-panel-border",children:[(0,h.jsx)("div",{className:"flex gap-1",children:["TODO","IN_PROGRESS","REVIEW","DONE"].map(S=>{let q={TODO:"To Do",IN_PROGRESS:"In Progress",REVIEW:"Review",DONE:"Done"},M={TODO:f.status===S?"bg-krushr-task-todo/10 text-krushr-task-todo border-krushr-task-todo/30":"bg-white text-krushr-gray border-krushr-panel-border hover:bg-krushr-gray-50",IN_PROGRESS:f.status===S?"bg-krushr-task-progress/10 text-krushr-task-progress border-krushr-task-progress/30":"bg-white text-krushr-gray border-krushr-panel-border hover:bg-krushr-gray-50",REVIEW:f.status===S?"bg-krushr-task-review/10 text-krushr-task-review border-krushr-task-review/30":"bg-white text-krushr-gray border-krushr-panel-border hover:bg-krushr-gray-50",DONE:f.status===S?"bg-krushr-task-done/10 text-krushr-task-done border-krushr-task-done/30":"bg-white text-krushr-gray border-krushr-panel-border hover:bg-krushr-gray-50"};return(0,h.jsx)("button",{onClick:()=>Y(S),className:j("px-3 py-1.5 text-xs font-medium rounded-md border transition-all duration-200 shadow-sm",M[S]),children:q[S]},S)})}),(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)("span",{className:"text-xs font-medium text-krushr-gray-dark mr-1",children:"Priority:"}),(0,h.jsx)("div",{className:"flex gap-0.5",children:[1,2,3].map(S=>{let q=f.priority==="low"&&S<=1||f.priority==="medium"&&S<=2||f.priority==="high"&&S<=3,M=S===1?"low":S===2?"medium":"high";return(0,h.jsx)("button",{onClick:()=>ne(M),className:j("w-2.5 h-2.5 rounded-full transition-all duration-200 shadow-sm",q?"bg-krushr-priority-high":"bg-krushr-gray-300 hover:bg-krushr-priority-high/50"),title:`${S===1?"Low":S===2?"Medium":"High"} Priority`},S)})})]})]}),(0,h.jsxs)("div",{className:"flex-1 bg-white rounded-lg border border-krushr-panel-border p-4",children:[(0,h.jsx)("label",{className:"text-sm font-medium text-krushr-gray-dark block mb-3",children:"Description & Notes"}),l?(0,h.jsx)(Hn,{content:p,onChange:v,onBlur:Ae,placeholder:"Add a description with rich formatting...",className:"min-h-[120px]"}):(0,h.jsx)("div",{onClick:()=>{v(f?.description||""),u(!0)},className:"min-h-[120px] p-3 text-sm border border-krushr-panel-border rounded-md cursor-pointer hover:bg-krushr-gray-50 prose prose-sm max-w-none transition-colors",dangerouslySetInnerHTML:{__html:f.description||'<span class="text-gray-400 italic">Click to add description...</span>'}})]}),(0,h.jsxs)("div",{className:"flex items-center gap-6 text-sm text-krushr-gray bg-krushr-gray-50 p-4 rounded-lg border border-krushr-panel-border",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)(pr,{className:"w-4 h-4"}),(0,h.jsxs)(fl,{value:f.assigneeId||"unassigned",onValueChange:S=>{B.mutate({id:e,assigneeId:S==="unassigned"?null:S})},children:[(0,h.jsx)(Ko,{className:"w-auto border-none shadow-none p-0 h-auto text-sm hover:text-krushr-gray-dark focus:ring-0 transition-colors",children:(0,h.jsx)(ml,{placeholder:"Unassigned",children:f.assignee?(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsxs)(Nt,{className:"w-5 h-5",children:[(0,h.jsx)(Yr,{src:f.assignee.avatar}),(0,h.jsx)(kt,{className:"text-xs",children:f.assignee.name?.charAt(0)})]}),(0,h.jsx)("span",{className:"truncate",children:f.assignee.name})]}):(0,h.jsx)("span",{className:"text-krushr-gray-light",children:"Unassigned"})})}),(0,h.jsxs)($o,{children:[(0,h.jsx)(sr,{value:"unassigned",children:(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)(pr,{className:"w-4 h-4 text-gray-500"}),(0,h.jsx)("span",{children:"Unassigned"})]})}),(0,h.jsx)(sr,{value:"user1",children:(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)(Nt,{className:"w-4 h-4",children:(0,h.jsx)(kt,{className:"text-xs",children:"JD"})}),(0,h.jsx)("span",{children:"John Doe"})]})}),(0,h.jsx)(sr,{value:"user2",children:(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)(Nt,{className:"w-4 h-4",children:(0,h.jsx)(kt,{className:"text-xs",children:"JS"})}),(0,h.jsx)("span",{children:"Jane Smith"})]})}),(0,h.jsx)(sr,{value:"user3",children:(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)(Nt,{className:"w-4 h-4",children:(0,h.jsx)(kt,{className:"text-xs",children:"MJ"})}),(0,h.jsx)("span",{children:"Mike Johnson"})]})})]})]})]}),(0,h.jsxs)("div",{className:"flex items-center gap-1",children:[(0,h.jsx)(zr,{className:"w-4 h-4"}),(0,h.jsx)("input",{type:"date",value:f.dueDate?Di(new Date(f.dueDate),"yyyy-MM-dd"):"",onChange:S=>{B.mutate({id:e,dueDate:S.target.value?new Date(S.target.value).toISOString():null})},className:"bg-transparent border-none text-sm cursor-pointer hover:text-krushr-gray-dark w-20 transition-colors",placeholder:"No date"})]}),(0,h.jsxs)("div",{className:"flex items-center gap-1 text-krushr-gray-light",children:[(0,h.jsx)($t,{className:"w-4 h-4"}),(0,h.jsxs)("span",{children:[dn(new Date(f.createdAt))," ago"]})]})]}),f.tags&&f.tags.length>0&&(0,h.jsx)("div",{className:"flex flex-wrap gap-2",children:f.tags.map(S=>(0,h.jsx)(Re,{variant:"secondary",children:typeof S=="string"?S:S.name},S.id||S))}),(0,h.jsxs)("div",{className:"space-y-4 bg-white rounded-lg border border-krushr-panel-border p-4",children:[(0,h.jsx)("h3",{className:"text-sm font-medium text-krushr-gray-dark",children:"Checklist"}),(0,h.jsxs)("div",{className:"space-y-2",children:[f.checklists?.[0]?.items?.map(S=>(0,h.jsxs)("div",{className:"flex items-center gap-2 group",children:[(0,h.jsx)("button",{onClick:()=>{re.mutate({id:S.id,completed:!S.completed})},className:j("w-4 h-4 rounded border-2 flex items-center justify-center transition-all duration-200",S.completed?"bg-krushr-success border-krushr-success text-white":"border-krushr-panel-border hover:border-krushr-success/50"),children:S.completed&&(0,h.jsx)(jr,{className:"w-2.5 h-2.5"})}),(0,h.jsx)("span",{className:j("text-sm flex-1",S.completed?"line-through text-krushr-gray-light":"text-krushr-gray-dark"),children:S.text}),(0,h.jsx)("button",{onClick:()=>{ue.mutate({id:S.id})},className:"opacity-0 group-hover:opacity-100 text-krushr-secondary hover:text-krushr-secondary/80 transition-all duration-200",children:(0,h.jsx)(Kr,{className:"w-3 h-3"})})]},S.id))||[],(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)("div",{className:"w-4 h-4 border-2 border-krushr-panel-border rounded"}),(0,h.jsx)(Rt,{label:"Add checklist item",value:R,onChange:S=>d(S.target.value),className:"text-sm border-none shadow-none px-0 focus-visible:ring-0",onKeyPress:S=>{if(S.key==="Enter"&&R.trim()){let q=f.checklists?.[0]?.id;q?Q.mutate({checklistId:q,text:R.trim()}):console.log("Need to create checklist first")}}}),R.trim()&&(0,h.jsx)("button",{onClick:()=>{let S=f.checklists?.[0]?.id;S&&Q.mutate({checklistId:S,text:R.trim()})},className:"text-krushr-success hover:text-krushr-success/80 transition-colors",children:(0,h.jsx)(ut,{className:"w-3 h-3"})})]})]})]})]}),(0,h.jsxs)("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto pr-2",children:[(0,h.jsxs)("div",{className:"space-y-4 bg-white rounded-lg border border-krushr-panel-border p-4",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)(ui,{className:"w-4 h-4 text-blue-600"}),(0,h.jsxs)("h3",{className:"text-sm font-medium text-krushr-gray-dark",children:["Comments (",k.length,")"]})]}),(0,h.jsxs)("div",{className:"space-y-2",children:[(0,h.jsx)(Hn,{content:o,onChange:i,placeholder:z.isLoading?"Posting comment...":"Add a comment...",className:"min-h-[80px]",minimal:!0,editable:!z.isLoading}),(0,h.jsx)("div",{className:"flex justify-end",children:(0,h.jsxs)(fe,{size:"sm",onClick:V,disabled:!o.trim()||z.isLoading,children:[(0,h.jsx)(di,{className:"w-4 h-4 mr-2"}),z.isLoading?"Posting...":"Post Comment"]})})]}),(0,h.jsxs)("div",{className:"space-y-3 max-h-40 overflow-y-auto",children:[k.map(S=>(0,h.jsx)("div",{className:"border border-krushr-panel-border rounded-lg p-3 bg-krushr-gray-50/50",children:(0,h.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,h.jsx)("div",{className:"w-8 h-8 bg-krushr-primary rounded-full flex items-center justify-center text-white text-xs",children:S.user?.name?.charAt(0)?.toUpperCase()||"U"}),(0,h.jsxs)("div",{className:"flex-1",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,h.jsx)("span",{className:"text-sm font-medium text-krushr-gray-dark",children:S.user?.name||"Unknown User"}),(0,h.jsxs)("span",{className:"text-xs text-krushr-gray",children:[dn(new Date(S.createdAt))," ago"]})]}),(0,h.jsx)("div",{className:"text-sm text-krushr-gray prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:S.content}}),(0,h.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[(0,h.jsx)("button",{className:"text-xs text-krushr-gray-light hover:text-krushr-primary transition-colors",children:"Reply"}),(0,h.jsx)("button",{className:"text-xs text-krushr-gray-light hover:text-krushr-primary transition-colors",children:"Like"}),(0,h.jsx)("button",{className:"text-xs text-krushr-gray-light hover:text-krushr-primary transition-colors",children:"..."})]})]})]})},S.id)),k.length===0&&(0,h.jsx)("div",{className:"text-center py-4 text-krushr-gray-light text-sm",children:"No comments yet. Be the first to add one!"})]})]}),(0,h.jsxs)("div",{className:"border border-krushr-panel-border rounded-lg bg-white shadow-sm",children:[(0,h.jsx)("div",{className:"p-4 border-b border-krushr-panel-border bg-krushr-gray-50",children:(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)(Ur,{className:"w-4 h-4 text-krushr-secondary"}),(0,h.jsxs)("h3",{className:"font-medium text-krushr-gray-dark",children:["Files (",T.length,")"]})]})}),(0,h.jsxs)("div",{className:"p-4 space-y-3",children:[(0,h.jsxs)("div",{className:"border-2 border-dashed border-krushr-panel-border rounded-lg p-4 text-center text-sm text-krushr-gray hover:border-krushr-secondary/50 transition-colors bg-krushr-gray-50",children:[(0,h.jsx)(pi,{className:"w-5 h-5 mx-auto mb-2 text-krushr-gray-light"}),(0,h.jsx)("span",{className:"font-medium",children:"Drop files here or click to upload"})]}),T.length>0&&(0,h.jsx)("div",{className:"pt-2 border-t border-krushr-panel-border",children:(0,h.jsx)(yl,{attachments:T,canDelete:!0,onRefresh:()=>{se()}})})]})]})]}),(0,h.jsxs)("div",{className:"border border-krushr-panel-border rounded-lg bg-white shadow-sm",children:[(0,h.jsx)("div",{className:"p-4 border-b border-krushr-panel-border bg-krushr-gray-50",children:(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)($t,{className:"w-4 h-4 text-amber-500"}),(0,h.jsx)("h3",{className:"font-medium text-krushr-gray-dark",children:"Activity"})]})}),(0,h.jsx)("div",{className:"p-4 space-y-2",children:E.map(S=>(0,h.jsxs)("div",{className:"flex items-start gap-3",children:[(0,h.jsx)("div",{className:"w-2 h-2 bg-krushr-gray-300 rounded-full mt-2"}),(0,h.jsxs)("div",{className:"flex-1",children:[(0,h.jsxs)("p",{className:"text-sm",children:[(0,h.jsx)("span",{className:"font-medium",children:S.user?.name})," ",S.action]}),(0,h.jsxs)("p",{className:"text-xs text-krushr-gray",children:[dn(new Date(S.createdAt))," ago"]})]})]},S.id))})]})]})}),(0,h.jsx)(qr,{open:g,onClose:()=>x(!1),task:f,workspaceId:f?.workspaceId||"",onSuccess:()=>{x(!1),b(),n?.()}})]})}var C=F(xe(),1);function gd({kanban:e,className:t}){let[r,n]=(0,Pe.useState)(null),[o,i]=(0,Pe.useState)(""),[s,a]=(0,Pe.useState)(!1),[l,u]=(0,Pe.useState)([]),[m,c]=(0,Pe.useState)([]),[p,v]=(0,Pe.useState)(!1),[R,d]=(0,Pe.useState)(null),[g,x]=(0,Pe.useState)(null),[f,b]=(0,Pe.useState)(!1),[k,N]=(0,Pe.useState)(null),[T,E]=(0,Pe.useState)(""),[P,H]=(0,Pe.useState)("#6B7280"),[z,B]=(0,Pe.useState)(!1),[U,Q]=(0,Pe.useState)(new Set),[re,ue]=(0,Pe.useState)(!1),{data:se,refetch:V}=ee.kanban.get.useQuery({id:e.id}),Y=se?.columns||[],{data:ne=[],refetch:Se}=ee.task.list.useQuery({workspaceId:e.workspaceId,kanbanId:e.id}),Ae=ee.task.update.useMutation({onSuccess:()=>{Se()}}),de=ee.task.create.useMutation({onSuccess:()=>{Se()}}),De=ee.task.delete.useMutation({onSuccess:()=>{Se()}}),Ce=ee.kanban.createColumn.useMutation({onSuccess:()=>{V(),E(""),H("#6B7280")}}),S=ee.kanban.updateColumn.useMutation({onSuccess:()=>{V(),N(null)}}),q=ee.kanban.deleteColumn.useMutation({onSuccess:()=>{V()}}),M=ee.kanban.reorderColumns.useMutation({onSuccess:()=>{V()}}),X=Y.map(w=>w.id),A=ne.filter(w=>w.kanbanColumnId&&X.includes(w.kanbanColumnId)).filter(w=>{let _=!o||w.title.toLowerCase().includes(o.toLowerCase())||w.description?.toLowerCase().includes(o.toLowerCase()),L=l.length===0||l.includes(w.priority),Oe=m.length===0||w.assigneeId&&m.includes(w.assigneeId);return _&&L&&Oe}),K=Y.reduce((w,_)=>(w[_.id]=A.filter(L=>L.kanbanColumnId===_.id).sort((L,Oe)=>L.position-Oe.position),w),{}),G=Zi(Qi(er,{activationConstraint:{distance:8}})),Ee=w=>{let{active:_}=w;_.data.current?.type==="task"&&n(_.data.current.task)},be=async w=>{let{active:_,over:L}=w;if(n(null),!L)return;let Oe=_.data.current?.type,Ut=L.data.current?.type;if(Oe==="task"){let cr=_.data.current?.task;if(!cr)return;let ur=Y.find(Ue=>Ue.id===cr.kanbanColumnId),Je,at;if(Ut==="column")Je=Y.find(Ue=>Ue.id===L.id),at=K[Je.id]?.length||0;else if(Ut==="task"){let Ue=L.data.current?.task;Je=Y.find(le=>le.id===Ue.kanbanColumnId),at=K[Je.id].findIndex(le=>le.id===Ue.id)}else return;if(!ur||!Je)return;let Qe=K[Je.id],wt;if(Qe.length===0)wt=1;else if(at===0)wt=Qe[0].position-1;else if(at>=Qe.length)wt=Qe[Qe.length-1].position+1;else{let Ue=Qe[at-1].position,le=Qe[at].position;wt=(Ue+le)/2}let An={kanbanColumnId:Je.id,position:wt};try{await Ae.mutateAsync({id:cr.id,...An})}catch(Ue){console.error("Failed to move task:",Ue)}}},Me=w=>K[w]?.length||0,He=w=>{switch(w?.toLowerCase()){case"high":return"bg-krushr-priority-high/10 text-krushr-priority-high border-krushr-priority-high/20";case"medium":return"bg-krushr-priority-medium/10 text-krushr-priority-medium border-krushr-priority-medium/20";case"low":return"bg-krushr-priority-low/10 text-krushr-priority-low border-krushr-priority-low/20";default:return"bg-gray-100 text-gray-700 border-gray-200"}},it=w=>{let _=new Set(U);_.has(w)?_.delete(w):_.add(w),Q(_),ue(_.size>0)},Lr=()=>{let w=new Set(A.map(_=>_.id));Q(w),ue(w.size>0)},tt=()=>{Q(new Set),ue(!1),B(!1)},qe=w=>{if(U.size===0)return;Array.from(U).forEach(L=>{ne.find(Ut=>Ut.id===L)&&Ae.mutate({id:L,kanbanColumnId:w})}),tt()},Ht=w=>{if(U.size===0)return;Array.from(U).forEach(L=>{Ae.mutate({id:L,priority:w})}),tt()},bt=async()=>{if(T.trim())try{await Ce.mutateAsync({kanbanId:e.id,title:T.trim(),color:P})}catch(w){console.error("Failed to create column:",w)}},lr=async(w,_,L)=>{try{await S.mutateAsync({id:w,title:_.trim(),color:L})}catch(Oe){console.error("Failed to update column:",Oe)}},{deleteItem:Br}=Ii(),{execute:Tn}=Ti(),{toast:Pn}=Ei(),rt=async w=>{let _=Y.find(Oe=>Oe.id===w),L=Me(w);if(L>0){Pn({title:"Cannot Delete Column",description:`The column "${_?.title}" contains ${L} task${L!==1?"s":""}. Please move or delete the tasks first.`,variant:"destructive"});return}_&&await Br({type:"column",item:_,itemName:_.title,deleteAction:async()=>{await q.mutateAsync({id:w})},onOptimisticRemove:()=>{},onRestore:()=>{V()}})},xt=async w=>{try{await M.mutateAsync({kanbanId:e.id,columnIds:w})}catch(_){console.error("Failed to reorder columns:",_)}};return(0,C.jsxs)("div",{className:j("flex flex-col h-full bg-gray-50",t),children:[re&&(0,C.jsx)("div",{className:"mx-2 mt-1 p-2 bg-blue-50 border border-blue-200 rounded-lg",children:(0,C.jsxs)("div",{className:"flex items-center justify-between",children:[(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsxs)("span",{className:"text-sm font-medium text-blue-900 font-manrope",children:[U.size," task",U.size!==1?"s":""," selected"]}),(0,C.jsx)(fe,{size:"sm",variant:"outline",onClick:tt,className:"h-8 min-h-[32px] text-xs hover:bg-gray-50 focus:bg-gray-50 focus:ring-2 focus:ring-blue-500 transition-all duration-200 font-manrope","aria-label":"Clear task selection",children:"Clear"})]}),(0,C.jsxs)("div",{className:"flex items-center gap-1",children:[(0,C.jsxs)("select",{className:"text-sm border rounded px-3 py-2 h-10 min-h-[40px] focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-manrope",onChange:w=>w.target.value&&qe(w.target.value),defaultValue:"","aria-label":"Move selected tasks to column",children:[(0,C.jsx)("option",{value:"",children:"Move to..."}),Y.map(w=>(0,C.jsx)("option",{value:w.id,children:w.title},w.id))]}),(0,C.jsxs)("select",{className:"text-sm border rounded px-3 py-2 h-10 min-h-[40px] focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-manrope",onChange:w=>w.target.value&&Ht(w.target.value),defaultValue:"","aria-label":"Set priority for selected tasks",children:[(0,C.jsx)("option",{value:"",children:"Set priority..."}),(0,C.jsx)("option",{value:"high",children:"High"}),(0,C.jsx)("option",{value:"medium",children:"Medium"}),(0,C.jsx)("option",{value:"low",children:"Low"})]}),(0,C.jsx)(fe,{size:"sm",variant:"destructive",onClick:async()=>{let w=Array.from(U),_=w.map(L=>ne.find(Oe=>Oe.id===L)).filter(Boolean);tt(),await Tn({type:"bulk-tasks",action:async()=>{for(let L of w)await De.mutateAsync({id:L})},undoAction:async()=>{for(let L of _)L&&await de.mutateAsync({title:L.title,description:L.description,status:L.status,priority:L.priority,dueDate:L.dueDate,assignedUserId:L.assignedUserId,tags:L.tags,kanbanColumnId:L.kanbanColumnId,projectId:L.projectId})},item:_,getMessage:()=>`${w.length} tasks deleted`,getUndoMessage:()=>`${w.length} tasks restored`})},className:"h-10 min-h-[40px] text-sm px-3 hover:bg-red-600 focus:bg-red-600 focus:ring-2 focus:ring-red-500 transition-all duration-200","aria-label":`Delete ${U.size} selected tasks`,children:"Delete"})]})]})}),(0,C.jsxs)("div",{className:"flex items-center justify-between p-2 bg-white border-b",children:[(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)(Rt,{label:"Search tasks",value:o,onChange:w=>i(w.target.value),className:"w-64 h-10 min-h-[40px] text-sm focus:ring-2 focus:ring-blue-500",type:"search"}),(0,C.jsxs)(fe,{size:"sm",variant:"outline",onClick:()=>a(!s),className:"h-10 min-h-[40px] text-sm hover:bg-gray-50 focus:bg-gray-50 focus:ring-2 focus:ring-blue-500 transition-all duration-200","aria-label":`${s?"Hide":"Show"} task filters`,"aria-expanded":s,children:[(0,C.jsx)(ai,{className:"w-4 h-4 mr-2"}),"Filters"]})]}),(0,C.jsxs)("div",{className:"flex items-center gap-1",children:[(0,C.jsxs)(fe,{size:"sm",variant:"outline",onClick:()=>b(!f),className:"h-10 min-h-[40px] text-sm hover:bg-gray-50 focus:bg-gray-50 focus:ring-2 focus:ring-blue-500 transition-all duration-200","aria-label":`${f?"Hide":"Show"} column management`,"aria-expanded":f,children:[(0,C.jsx)(Vr,{className:"w-4 h-4 mr-2"}),"Columns"]}),(0,C.jsx)(fe,{size:"sm",variant:z?"default":"outline",onClick:()=>{B(!z),z&&tt()},className:"h-10 min-h-[40px] text-sm hover:bg-gray-50 focus:bg-gray-50 focus:ring-2 focus:ring-blue-500 transition-all duration-200","aria-label":z?"Exit bulk selection mode":"Enter bulk selection mode","aria-pressed":z,children:z?"Exit Bulk":"Bulk Select"}),z&&(0,C.jsx)(fe,{size:"sm",variant:"outline",onClick:Lr,className:"h-10 min-h-[40px] text-sm hover:bg-gray-50 focus:bg-gray-50 focus:ring-2 focus:ring-blue-500 transition-all duration-200","aria-label":"Select all visible tasks",children:"Select All"}),(0,C.jsx)("button",{onClick:()=>{x(Y[0]?.id||null),v(!0)},className:"w-8 h-8 bg-krushr-primary text-white rounded-md flex items-center justify-center hover:bg-krushr-primary/90 transition-colors","aria-label":"Create new task",title:"Create new task",children:(0,C.jsx)(ut,{className:"w-4 h-4"})})]})]}),s&&(0,C.jsx)("div",{className:"mx-2 mt-1 p-2 bg-gray-50 rounded border",children:(0,C.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),(0,C.jsx)("div",{className:"flex flex-wrap gap-2",children:["high","medium","low"].map(w=>(0,C.jsx)(Re,{variant:l.includes(w)?"default":"outline",className:j("cursor-pointer capitalize",l.includes(w)&&He(w)),onClick:()=>{u(_=>_.includes(w)?_.filter(L=>L!==w):[..._,w])},children:w},w))})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assignees"}),(0,C.jsx)("div",{className:"text-sm text-gray-500",children:"Select team members to filter by..."})]})]})}),f&&(0,C.jsxs)("div",{className:"mx-2 mt-1 p-3 bg-white border rounded-lg shadow-sm",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,C.jsx)("h3",{className:"font-medium text-gray-900",children:"Manage Columns"}),(0,C.jsx)(fe,{size:"sm",variant:"ghost",onClick:()=>b(!1),className:"h-6 w-6 p-0",children:"\xD7"})]}),(0,C.jsx)("div",{className:"mb-4 p-3 bg-gray-50 rounded border",children:(0,C.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,C.jsx)(Rt,{label:"Column title",value:T,onChange:w=>E(w.target.value),className:"flex-1 h-8 text-sm",onKeyPress:w=>w.key==="Enter"&&bt()}),(0,C.jsxs)("select",{value:P,onChange:w=>H(w.target.value),className:"h-8 text-sm border rounded px-2",children:[(0,C.jsx)("option",{value:"#6B7280",children:"Gray"}),(0,C.jsx)("option",{value:"#3B82F6",children:"Blue"}),(0,C.jsx)("option",{value:"#10B981",children:"Green"}),(0,C.jsx)("option",{value:"#F59E0B",children:"Yellow"}),(0,C.jsx)("option",{value:"#EF4444",children:"Red"}),(0,C.jsx)("option",{value:"#8B5CF6",children:"Purple"})]}),(0,C.jsx)("button",{onClick:bt,disabled:!T.trim()||Ce.isLoading,className:"w-8 h-8 bg-krushr-primary text-white rounded-md flex items-center justify-center hover:bg-krushr-primary/90 transition-colors disabled:opacity-50",title:"Add column",children:(0,C.jsx)(ut,{className:"w-4 h-4"})})]})}),(0,C.jsx)("div",{className:"space-y-2",children:Y.map(w=>(0,C.jsxs)("div",{className:"flex items-center gap-2 p-2 border rounded hover:bg-gray-50",children:[(0,C.jsx)(si,{className:"w-4 h-4 text-gray-400 cursor-move"}),(0,C.jsx)("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:w.color}}),k?.id===w.id?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Rt,{label:"Column title",value:k.title,onChange:_=>N({...k,title:_.target.value}),className:"flex-1 h-7 text-sm",onKeyPress:_=>{_.key==="Enter"&&lr(w.id,k.title,k.color)},autoFocus:!0}),(0,C.jsxs)("select",{value:k.color,onChange:_=>N({...k,color:_.target.value}),className:"h-7 text-sm border rounded px-1",children:[(0,C.jsx)("option",{value:"#6B7280",children:"Gray"}),(0,C.jsx)("option",{value:"#3B82F6",children:"Blue"}),(0,C.jsx)("option",{value:"#10B981",children:"Green"}),(0,C.jsx)("option",{value:"#F59E0B",children:"Yellow"}),(0,C.jsx)("option",{value:"#EF4444",children:"Red"}),(0,C.jsx)("option",{value:"#8B5CF6",children:"Purple"})]}),(0,C.jsx)("button",{onClick:()=>lr(w.id,k.title,k.color),className:"w-8 h-8 bg-krushr-primary text-white rounded-md flex items-center justify-center hover:bg-krushr-primary/90 transition-colors",title:"Save changes",children:(0,C.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,C.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,C.jsx)("button",{onClick:()=>N(null),className:"w-8 h-8 bg-krushr-gray-light text-krushr-gray-dark rounded-md flex items-center justify-center hover:bg-krushr-gray transition-colors",title:"Cancel",children:(0,C.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,C.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("span",{className:"flex-1 text-sm font-medium",children:w.title}),(0,C.jsxs)(Re,{variant:"outline",className:"text-xs",children:[Me(w.id)," tasks"]}),(0,C.jsx)("button",{onClick:()=>N({id:w.id,title:w.title,color:w.color}),className:"w-8 h-8 bg-krushr-gray-light text-krushr-gray-dark rounded-md flex items-center justify-center hover:bg-krushr-gray transition-colors",title:"Edit column",children:(0,C.jsx)(mi,{className:"w-4 h-4"})}),(0,C.jsx)("button",{onClick:()=>rt(w.id),disabled:Me(w.id)>0,className:"w-8 h-8 bg-krushr-secondary text-white rounded-md flex items-center justify-center hover:bg-krushr-secondary/90 transition-colors disabled:opacity-50",title:"Delete column",children:(0,C.jsx)(Ct,{className:"w-4 h-4"})})]})]},w.id))})]}),(0,C.jsx)("div",{className:"flex-1 overflow-x-auto",children:(0,C.jsxs)(ga,{sensors:G,collisionDetection:Zn,onDragStart:Ee,onDragEnd:be,children:[(0,C.jsx)("div",{className:"flex gap-3 p-2 min-w-max h-full",children:(0,C.jsx)(Ra,{items:Y.map(w=>w.id),strategy:xa,children:Y.map(w=>(0,C.jsx)(ro,{column:w,tasks:K[w.id]||[],taskCount:Me(w.id),onTaskClick:_=>d(_),onAddTask:()=>{x(w.id),v(!0)},bulkMode:z,selectedTasks:U,onTaskSelect:it,onEditColumn:()=>N({id:w.id,title:w.title,color:w.color}),onDeleteColumn:()=>rt(w.id)},w.id))})}),(0,C.jsx)(ya,{children:r&&(0,C.jsx)(Er,{task:r,isDragOverlay:!0})})]})}),(0,C.jsx)(qr,{open:p,onClose:()=>{v(!1),x(null)},workspaceId:e.workspaceId,kanbanId:e.id,kanbanColumnId:g||void 0,onSuccess:()=>{Se(),V(),v(!1),x(null)}}),R&&(0,C.jsx)(Xo,{taskId:R,open:!!R,onClose:()=>d(null),onUpdate:()=>{Se(),V()}})]})}export{Ir as a,fn as b,Pf as c,Mr as d,wn as e,tp as f,rp as g,Cs as h,Rs as i,Ns as j,Ro as k,No as l,ko as m,Do as n,ks as o,Is as p,Ts as q,fl as r,ml as s,Ko as t,$o as u,sr as v,ka as w,Ds as x,ap as y,Eo as z,Io as A,To as B,gd as C};
